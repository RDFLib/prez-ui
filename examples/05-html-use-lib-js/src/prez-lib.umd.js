(function(Q,Ie){typeof exports=="object"&&typeof module<"u"?Ie(exports,require("@rdfjs/types")):typeof define=="function"&&define.amd?define(["exports","@rdfjs/types"],Ie):(Q=typeof globalThis<"u"?globalThis:Q||self,Ie(Q.PrezLib={}))})(this,function(Q){"use strict";var gf=Object.defineProperty;var yf=(Q,Ie,Je)=>Ie in Q?gf(Q,Ie,{enumerable:!0,configurable:!0,writable:!0,value:Je}):Q[Ie]=Je;var rt=(Q,Ie,Je)=>(yf(Q,typeof Ie!="symbol"?Ie+"":Ie,Je),Je);function Ie(t){return t.value!==void 0}function Je(t){const e={value:typeof t=="string"?t:t.value,termType:"NamedNode",equals:r=>!!r&&e.termType===r.termType&&e.value===r.value};return typeof t!="string"&&Object.assign(e,t),e}function Er(t){const e={value:typeof t=="string"?t:t.value,termType:"Literal",equals:r=>r&&e.termType===r.termType&&e.value===r.value?e.language!==r.language?!1:e.datatype===r.datatype:!1};return typeof t!="string"&&Object.assign(e,t),e}function Pn(t){const e={value:typeof t=="string"?t:t.value,properties:{},termType:"BlankNode",equals:r=>!!r&&e.termType===r.termType&&e.value===r.value&&e.properties===r.properties};return typeof t!="string"&&Object.assign(e,t),e}var Ks=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ys(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var je={},zt={};zt.byteLength=Js,zt.toByteArray=to,zt.fromByteArray=io;for(var Be=[],ve=[],Xs=typeof Uint8Array<"u"?Uint8Array:Array,Sr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bt=0,Zs=Sr.length;bt<Zs;++bt)Be[bt]=Sr[bt],ve[Sr.charCodeAt(bt)]=bt;ve["-".charCodeAt(0)]=62,ve["_".charCodeAt(0)]=63;function $n(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function Js(t){var e=$n(t),r=e[0],n=e[1];return(r+n)*3/4-n}function eo(t,e,r){return(e+r)*3/4-r}function to(t){var e,r=$n(t),n=r[0],i=r[1],a=new Xs(eo(t,n,i)),l=0,u=i>0?n-4:n,p;for(p=0;p<u;p+=4)e=ve[t.charCodeAt(p)]<<18|ve[t.charCodeAt(p+1)]<<12|ve[t.charCodeAt(p+2)]<<6|ve[t.charCodeAt(p+3)],a[l++]=e>>16&255,a[l++]=e>>8&255,a[l++]=e&255;return i===2&&(e=ve[t.charCodeAt(p)]<<2|ve[t.charCodeAt(p+1)]>>4,a[l++]=e&255),i===1&&(e=ve[t.charCodeAt(p)]<<10|ve[t.charCodeAt(p+1)]<<4|ve[t.charCodeAt(p+2)]>>2,a[l++]=e>>8&255,a[l++]=e&255),a}function ro(t){return Be[t>>18&63]+Be[t>>12&63]+Be[t>>6&63]+Be[t&63]}function no(t,e,r){for(var n,i=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),i.push(ro(n));return i.join("")}function io(t){for(var e,r=t.length,n=r%3,i=[],a=16383,l=0,u=r-n;l<u;l+=a)i.push(no(t,l,l+a>u?u:l+a));return n===1?(e=t[r-1],i.push(Be[e>>2]+Be[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Be[e>>10]+Be[e>>4&63]+Be[e<<2&63]+"=")),i.join("")}var Rr={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Rr.read=function(t,e,r,n,i){var a,l,u=i*8-n-1,p=(1<<u)-1,_=p>>1,g=-7,S=r?i-1:0,m=r?-1:1,w=t[e+S];for(S+=m,a=w&(1<<-g)-1,w>>=-g,g+=u;g>0;a=a*256+t[e+S],S+=m,g-=8);for(l=a&(1<<-g)-1,a>>=-g,g+=n;g>0;l=l*256+t[e+S],S+=m,g-=8);if(a===0)a=1-_;else{if(a===p)return l?NaN:(w?-1:1)*(1/0);l=l+Math.pow(2,n),a=a-_}return(w?-1:1)*l*Math.pow(2,a-n)},Rr.write=function(t,e,r,n,i,a){var l,u,p,_=a*8-i-1,g=(1<<_)-1,S=g>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=n?0:a-1,I=n?1:-1,R=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,l=g):(l=Math.floor(Math.log(e)/Math.LN2),e*(p=Math.pow(2,-l))<1&&(l--,p*=2),l+S>=1?e+=m/p:e+=m*Math.pow(2,1-S),e*p>=2&&(l++,p/=2),l+S>=g?(u=0,l=g):l+S>=1?(u=(e*p-1)*Math.pow(2,i),l=l+S):(u=e*Math.pow(2,S-1)*Math.pow(2,i),l=0));i>=8;t[r+w]=u&255,w+=I,u/=256,i-=8);for(l=l<<i|u,_+=i;_>0;t[r+w]=l&255,w+=I,l/=256,_-=8);t[r+w-I]|=R*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=zt,r=Rr,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=O,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,u.TYPED_ARRAY_SUPPORT=a(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const f=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(f,s),f.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function l(f){if(f>i)throw new RangeError('The value "'+f+'" is invalid for option "size"');const s=new Uint8Array(f);return Object.setPrototypeOf(s,u.prototype),s}function u(f,s,o){if(typeof f=="number"){if(typeof s=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return S(f)}return p(f,s,o)}u.poolSize=8192;function p(f,s,o){if(typeof f=="string")return m(f,s);if(ArrayBuffer.isView(f))return I(f);if(f==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(C(f,ArrayBuffer)||f&&C(f.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(C(f,SharedArrayBuffer)||f&&C(f.buffer,SharedArrayBuffer)))return R(f,s,o);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const d=f.valueOf&&f.valueOf();if(d!=null&&d!==f)return u.from(d,s,o);const b=N(f);if(b)return b;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return u.from(f[Symbol.toPrimitive]("string"),s,o);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}u.from=function(f,s,o){return p(f,s,o)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function _(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(f<0)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function g(f,s,o){return _(f),f<=0?l(f):s!==void 0?typeof o=="string"?l(f).fill(s,o):l(f).fill(s):l(f)}u.alloc=function(f,s,o){return g(f,s,o)};function S(f){return _(f),l(f<0?0:k(f)|0)}u.allocUnsafe=function(f){return S(f)},u.allocUnsafeSlow=function(f){return S(f)};function m(f,s){if((typeof s!="string"||s==="")&&(s="utf8"),!u.isEncoding(s))throw new TypeError("Unknown encoding: "+s);const o=T(f,s)|0;let d=l(o);const b=d.write(f,s);return b!==o&&(d=d.slice(0,b)),d}function w(f){const s=f.length<0?0:k(f.length)|0,o=l(s);for(let d=0;d<s;d+=1)o[d]=f[d]&255;return o}function I(f){if(C(f,Uint8Array)){const s=new Uint8Array(f);return R(s.buffer,s.byteOffset,s.byteLength)}return w(f)}function R(f,s,o){if(s<0||f.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<s+(o||0))throw new RangeError('"length" is outside of buffer bounds');let d;return s===void 0&&o===void 0?d=new Uint8Array(f):o===void 0?d=new Uint8Array(f,s):d=new Uint8Array(f,s,o),Object.setPrototypeOf(d,u.prototype),d}function N(f){if(u.isBuffer(f)){const s=k(f.length)|0,o=l(s);return o.length===0||f.copy(o,0,0,s),o}if(f.length!==void 0)return typeof f.length!="number"||$e(f.length)?l(0):w(f);if(f.type==="Buffer"&&Array.isArray(f.data))return w(f.data)}function k(f){if(f>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return f|0}function O(f){return+f!=f&&(f=0),u.alloc(+f)}u.isBuffer=function(s){return s!=null&&s._isBuffer===!0&&s!==u.prototype},u.compare=function(s,o){if(C(s,Uint8Array)&&(s=u.from(s,s.offset,s.byteLength)),C(o,Uint8Array)&&(o=u.from(o,o.offset,o.byteLength)),!u.isBuffer(s)||!u.isBuffer(o))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(s===o)return 0;let d=s.length,b=o.length;for(let E=0,A=Math.min(d,b);E<A;++E)if(s[E]!==o[E]){d=s[E],b=o[E];break}return d<b?-1:b<d?1:0},u.isEncoding=function(s){switch(String(s).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(s,o){if(!Array.isArray(s))throw new TypeError('"list" argument must be an Array of Buffers');if(s.length===0)return u.alloc(0);let d;if(o===void 0)for(o=0,d=0;d<s.length;++d)o+=s[d].length;const b=u.allocUnsafe(o);let E=0;for(d=0;d<s.length;++d){let A=s[d];if(C(A,Uint8Array))E+A.length>b.length?(u.isBuffer(A)||(A=u.from(A)),A.copy(b,E)):Uint8Array.prototype.set.call(b,A,E);else if(u.isBuffer(A))A.copy(b,E);else throw new TypeError('"list" argument must be an Array of Buffers');E+=A.length}return b};function T(f,s){if(u.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||C(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);const o=f.length,d=arguments.length>2&&arguments[2]===!0;if(!d&&o===0)return 0;let b=!1;for(;;)switch(s){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":return j(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o*2;case"hex":return o>>>1;case"base64":return Y(f).length;default:if(b)return d?-1:j(f).length;s=(""+s).toLowerCase(),b=!0}}u.byteLength=T;function q(f,s,o){let d=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((o===void 0||o>this.length)&&(o=this.length),o<=0)||(o>>>=0,s>>>=0,o<=s))return"";for(f||(f="utf8");;)switch(f){case"hex":return re(this,s,o);case"utf8":case"utf-8":return K(this,s,o);case"ascii":return le(this,s,o);case"latin1":case"binary":return ue(this,s,o);case"base64":return P(this,s,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe(this,s,o);default:if(d)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),d=!0}}u.prototype._isBuffer=!0;function U(f,s,o){const d=f[s];f[s]=f[o],f[o]=d}u.prototype.swap16=function(){const s=this.length;if(s%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let o=0;o<s;o+=2)U(this,o,o+1);return this},u.prototype.swap32=function(){const s=this.length;if(s%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let o=0;o<s;o+=4)U(this,o,o+3),U(this,o+1,o+2);return this},u.prototype.swap64=function(){const s=this.length;if(s%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let o=0;o<s;o+=8)U(this,o,o+7),U(this,o+1,o+6),U(this,o+2,o+5),U(this,o+3,o+4);return this},u.prototype.toString=function(){const s=this.length;return s===0?"":arguments.length===0?K(this,0,s):q.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(s){if(!u.isBuffer(s))throw new TypeError("Argument must be a Buffer");return this===s?!0:u.compare(this,s)===0},u.prototype.inspect=function(){let s="";const o=t.INSPECT_MAX_BYTES;return s=this.toString("hex",0,o).replace(/(.{2})/g,"$1 ").trim(),this.length>o&&(s+=" ... "),"<Buffer "+s+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(s,o,d,b,E){if(C(s,Uint8Array)&&(s=u.from(s,s.offset,s.byteLength)),!u.isBuffer(s))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof s);if(o===void 0&&(o=0),d===void 0&&(d=s?s.length:0),b===void 0&&(b=0),E===void 0&&(E=this.length),o<0||d>s.length||b<0||E>this.length)throw new RangeError("out of range index");if(b>=E&&o>=d)return 0;if(b>=E)return-1;if(o>=d)return 1;if(o>>>=0,d>>>=0,b>>>=0,E>>>=0,this===s)return 0;let A=E-b,W=d-o;const ie=Math.min(A,W),J=this.slice(b,E),se=s.slice(o,d);for(let V=0;V<ie;++V)if(J[V]!==se[V]){A=J[V],W=se[V];break}return A<W?-1:W<A?1:0};function oe(f,s,o,d,b){if(f.length===0)return-1;if(typeof o=="string"?(d=o,o=0):o>2147483647?o=2147483647:o<-2147483648&&(o=-2147483648),o=+o,$e(o)&&(o=b?0:f.length-1),o<0&&(o=f.length+o),o>=f.length){if(b)return-1;o=f.length-1}else if(o<0)if(b)o=0;else return-1;if(typeof s=="string"&&(s=u.from(s,d)),u.isBuffer(s))return s.length===0?-1:Ee(f,s,o,d,b);if(typeof s=="number")return s=s&255,typeof Uint8Array.prototype.indexOf=="function"?b?Uint8Array.prototype.indexOf.call(f,s,o):Uint8Array.prototype.lastIndexOf.call(f,s,o):Ee(f,[s],o,d,b);throw new TypeError("val must be string, number or Buffer")}function Ee(f,s,o,d,b){let E=1,A=f.length,W=s.length;if(d!==void 0&&(d=String(d).toLowerCase(),d==="ucs2"||d==="ucs-2"||d==="utf16le"||d==="utf-16le")){if(f.length<2||s.length<2)return-1;E=2,A/=2,W/=2,o/=2}function ie(se,V){return E===1?se[V]:se.readUInt16BE(V*E)}let J;if(b){let se=-1;for(J=o;J<A;J++)if(ie(f,J)===ie(s,se===-1?0:J-se)){if(se===-1&&(se=J),J-se+1===W)return se*E}else se!==-1&&(J-=J-se),se=-1}else for(o+W>A&&(o=A-W),J=o;J>=0;J--){let se=!0;for(let V=0;V<W;V++)if(ie(f,J+V)!==ie(s,V)){se=!1;break}if(se)return J}return-1}u.prototype.includes=function(s,o,d){return this.indexOf(s,o,d)!==-1},u.prototype.indexOf=function(s,o,d){return oe(this,s,o,d,!0)},u.prototype.lastIndexOf=function(s,o,d){return oe(this,s,o,d,!1)};function ee(f,s,o,d){o=Number(o)||0;const b=f.length-o;d?(d=Number(d),d>b&&(d=b)):d=b;const E=s.length;d>E/2&&(d=E/2);let A;for(A=0;A<d;++A){const W=parseInt(s.substr(A*2,2),16);if($e(W))return A;f[o+A]=W}return A}function ae(f,s,o,d){return Re(j(s,f.length-o),f,o,d)}function ye(f,s,o,d){return Re(Z(s),f,o,d)}function we(f,s,o,d){return Re(Y(s),f,o,d)}function H(f,s,o,d){return Re(te(s,f.length-o),f,o,d)}u.prototype.write=function(s,o,d,b){if(o===void 0)b="utf8",d=this.length,o=0;else if(d===void 0&&typeof o=="string")b=o,d=this.length,o=0;else if(isFinite(o))o=o>>>0,isFinite(d)?(d=d>>>0,b===void 0&&(b="utf8")):(b=d,d=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const E=this.length-o;if((d===void 0||d>E)&&(d=E),s.length>0&&(d<0||o<0)||o>this.length)throw new RangeError("Attempt to write outside buffer bounds");b||(b="utf8");let A=!1;for(;;)switch(b){case"hex":return ee(this,s,o,d);case"utf8":case"utf-8":return ae(this,s,o,d);case"ascii":case"latin1":case"binary":return ye(this,s,o,d);case"base64":return we(this,s,o,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,s,o,d);default:if(A)throw new TypeError("Unknown encoding: "+b);b=(""+b).toLowerCase(),A=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function P(f,s,o){return s===0&&o===f.length?e.fromByteArray(f):e.fromByteArray(f.slice(s,o))}function K(f,s,o){o=Math.min(f.length,o);const d=[];let b=s;for(;b<o;){const E=f[b];let A=null,W=E>239?4:E>223?3:E>191?2:1;if(b+W<=o){let ie,J,se,V;switch(W){case 1:E<128&&(A=E);break;case 2:ie=f[b+1],(ie&192)===128&&(V=(E&31)<<6|ie&63,V>127&&(A=V));break;case 3:ie=f[b+1],J=f[b+2],(ie&192)===128&&(J&192)===128&&(V=(E&15)<<12|(ie&63)<<6|J&63,V>2047&&(V<55296||V>57343)&&(A=V));break;case 4:ie=f[b+1],J=f[b+2],se=f[b+3],(ie&192)===128&&(J&192)===128&&(se&192)===128&&(V=(E&15)<<18|(ie&63)<<12|(J&63)<<6|se&63,V>65535&&V<1114112&&(A=V))}}A===null?(A=65533,W=1):A>65535&&(A-=65536,d.push(A>>>10&1023|55296),A=56320|A&1023),d.push(A),b+=W}return z(d)}const G=4096;function z(f){const s=f.length;if(s<=G)return String.fromCharCode.apply(String,f);let o="",d=0;for(;d<s;)o+=String.fromCharCode.apply(String,f.slice(d,d+=G));return o}function le(f,s,o){let d="";o=Math.min(f.length,o);for(let b=s;b<o;++b)d+=String.fromCharCode(f[b]&127);return d}function ue(f,s,o){let d="";o=Math.min(f.length,o);for(let b=s;b<o;++b)d+=String.fromCharCode(f[b]);return d}function re(f,s,o){const d=f.length;(!s||s<0)&&(s=0),(!o||o<0||o>d)&&(o=d);let b="";for(let E=s;E<o;++E)b+=Gt[f[E]];return b}function fe(f,s,o){const d=f.slice(s,o);let b="";for(let E=0;E<d.length-1;E+=2)b+=String.fromCharCode(d[E]+d[E+1]*256);return b}u.prototype.slice=function(s,o){const d=this.length;s=~~s,o=o===void 0?d:~~o,s<0?(s+=d,s<0&&(s=0)):s>d&&(s=d),o<0?(o+=d,o<0&&(o=0)):o>d&&(o=d),o<s&&(o=s);const b=this.subarray(s,o);return Object.setPrototypeOf(b,u.prototype),b};function D(f,s,o){if(f%1!==0||f<0)throw new RangeError("offset is not uint");if(f+s>o)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(s,o,d){s=s>>>0,o=o>>>0,d||D(s,o,this.length);let b=this[s],E=1,A=0;for(;++A<o&&(E*=256);)b+=this[s+A]*E;return b},u.prototype.readUintBE=u.prototype.readUIntBE=function(s,o,d){s=s>>>0,o=o>>>0,d||D(s,o,this.length);let b=this[s+--o],E=1;for(;o>0&&(E*=256);)b+=this[s+--o]*E;return b},u.prototype.readUint8=u.prototype.readUInt8=function(s,o){return s=s>>>0,o||D(s,1,this.length),this[s]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(s,o){return s=s>>>0,o||D(s,2,this.length),this[s]|this[s+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(s,o){return s=s>>>0,o||D(s,2,this.length),this[s]<<8|this[s+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(s,o){return s=s>>>0,o||D(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+this[s+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(s,o){return s=s>>>0,o||D(s,4,this.length),this[s]*16777216+(this[s+1]<<16|this[s+2]<<8|this[s+3])},u.prototype.readBigUInt64LE=We(function(s){s=s>>>0,y(s,"offset");const o=this[s],d=this[s+7];(o===void 0||d===void 0)&&x(s,this.length-8);const b=o+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24,E=this[++s]+this[++s]*2**8+this[++s]*2**16+d*2**24;return BigInt(b)+(BigInt(E)<<BigInt(32))}),u.prototype.readBigUInt64BE=We(function(s){s=s>>>0,y(s,"offset");const o=this[s],d=this[s+7];(o===void 0||d===void 0)&&x(s,this.length-8);const b=o*2**24+this[++s]*2**16+this[++s]*2**8+this[++s],E=this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+d;return(BigInt(b)<<BigInt(32))+BigInt(E)}),u.prototype.readIntLE=function(s,o,d){s=s>>>0,o=o>>>0,d||D(s,o,this.length);let b=this[s],E=1,A=0;for(;++A<o&&(E*=256);)b+=this[s+A]*E;return E*=128,b>=E&&(b-=Math.pow(2,8*o)),b},u.prototype.readIntBE=function(s,o,d){s=s>>>0,o=o>>>0,d||D(s,o,this.length);let b=o,E=1,A=this[s+--b];for(;b>0&&(E*=256);)A+=this[s+--b]*E;return E*=128,A>=E&&(A-=Math.pow(2,8*o)),A},u.prototype.readInt8=function(s,o){return s=s>>>0,o||D(s,1,this.length),this[s]&128?(255-this[s]+1)*-1:this[s]},u.prototype.readInt16LE=function(s,o){s=s>>>0,o||D(s,2,this.length);const d=this[s]|this[s+1]<<8;return d&32768?d|4294901760:d},u.prototype.readInt16BE=function(s,o){s=s>>>0,o||D(s,2,this.length);const d=this[s+1]|this[s]<<8;return d&32768?d|4294901760:d},u.prototype.readInt32LE=function(s,o){return s=s>>>0,o||D(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24},u.prototype.readInt32BE=function(s,o){return s=s>>>0,o||D(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]},u.prototype.readBigInt64LE=We(function(s){s=s>>>0,y(s,"offset");const o=this[s],d=this[s+7];(o===void 0||d===void 0)&&x(s,this.length-8);const b=this[s+4]+this[s+5]*2**8+this[s+6]*2**16+(d<<24);return(BigInt(b)<<BigInt(32))+BigInt(o+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24)}),u.prototype.readBigInt64BE=We(function(s){s=s>>>0,y(s,"offset");const o=this[s],d=this[s+7];(o===void 0||d===void 0)&&x(s,this.length-8);const b=(o<<24)+this[++s]*2**16+this[++s]*2**8+this[++s];return(BigInt(b)<<BigInt(32))+BigInt(this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+d)}),u.prototype.readFloatLE=function(s,o){return s=s>>>0,o||D(s,4,this.length),r.read(this,s,!0,23,4)},u.prototype.readFloatBE=function(s,o){return s=s>>>0,o||D(s,4,this.length),r.read(this,s,!1,23,4)},u.prototype.readDoubleLE=function(s,o){return s=s>>>0,o||D(s,8,this.length),r.read(this,s,!0,52,8)},u.prototype.readDoubleBE=function(s,o){return s=s>>>0,o||D(s,8,this.length),r.read(this,s,!1,52,8)};function ne(f,s,o,d,b,E){if(!u.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>b||s<E)throw new RangeError('"value" argument is out of bounds');if(o+d>f.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(s,o,d,b){if(s=+s,o=o>>>0,d=d>>>0,!b){const W=Math.pow(2,8*d)-1;ne(this,s,o,d,W,0)}let E=1,A=0;for(this[o]=s&255;++A<d&&(E*=256);)this[o+A]=s/E&255;return o+d},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(s,o,d,b){if(s=+s,o=o>>>0,d=d>>>0,!b){const W=Math.pow(2,8*d)-1;ne(this,s,o,d,W,0)}let E=d-1,A=1;for(this[o+E]=s&255;--E>=0&&(A*=256);)this[o+E]=s/A&255;return o+d},u.prototype.writeUint8=u.prototype.writeUInt8=function(s,o,d){return s=+s,o=o>>>0,d||ne(this,s,o,1,255,0),this[o]=s&255,o+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(s,o,d){return s=+s,o=o>>>0,d||ne(this,s,o,2,65535,0),this[o]=s&255,this[o+1]=s>>>8,o+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(s,o,d){return s=+s,o=o>>>0,d||ne(this,s,o,2,65535,0),this[o]=s>>>8,this[o+1]=s&255,o+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(s,o,d){return s=+s,o=o>>>0,d||ne(this,s,o,4,4294967295,0),this[o+3]=s>>>24,this[o+2]=s>>>16,this[o+1]=s>>>8,this[o]=s&255,o+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(s,o,d){return s=+s,o=o>>>0,d||ne(this,s,o,4,4294967295,0),this[o]=s>>>24,this[o+1]=s>>>16,this[o+2]=s>>>8,this[o+3]=s&255,o+4};function M(f,s,o,d,b){Xe(s,d,b,f,o,7);let E=Number(s&BigInt(4294967295));f[o++]=E,E=E>>8,f[o++]=E,E=E>>8,f[o++]=E,E=E>>8,f[o++]=E;let A=Number(s>>BigInt(32)&BigInt(4294967295));return f[o++]=A,A=A>>8,f[o++]=A,A=A>>8,f[o++]=A,A=A>>8,f[o++]=A,o}function de(f,s,o,d,b){Xe(s,d,b,f,o,7);let E=Number(s&BigInt(4294967295));f[o+7]=E,E=E>>8,f[o+6]=E,E=E>>8,f[o+5]=E,E=E>>8,f[o+4]=E;let A=Number(s>>BigInt(32)&BigInt(4294967295));return f[o+3]=A,A=A>>8,f[o+2]=A,A=A>>8,f[o+1]=A,A=A>>8,f[o]=A,o+8}u.prototype.writeBigUInt64LE=We(function(s,o=0){return M(this,s,o,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=We(function(s,o=0){return de(this,s,o,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(s,o,d,b){if(s=+s,o=o>>>0,!b){const ie=Math.pow(2,8*d-1);ne(this,s,o,d,ie-1,-ie)}let E=0,A=1,W=0;for(this[o]=s&255;++E<d&&(A*=256);)s<0&&W===0&&this[o+E-1]!==0&&(W=1),this[o+E]=(s/A>>0)-W&255;return o+d},u.prototype.writeIntBE=function(s,o,d,b){if(s=+s,o=o>>>0,!b){const ie=Math.pow(2,8*d-1);ne(this,s,o,d,ie-1,-ie)}let E=d-1,A=1,W=0;for(this[o+E]=s&255;--E>=0&&(A*=256);)s<0&&W===0&&this[o+E+1]!==0&&(W=1),this[o+E]=(s/A>>0)-W&255;return o+d},u.prototype.writeInt8=function(s,o,d){return s=+s,o=o>>>0,d||ne(this,s,o,1,127,-128),s<0&&(s=255+s+1),this[o]=s&255,o+1},u.prototype.writeInt16LE=function(s,o,d){return s=+s,o=o>>>0,d||ne(this,s,o,2,32767,-32768),this[o]=s&255,this[o+1]=s>>>8,o+2},u.prototype.writeInt16BE=function(s,o,d){return s=+s,o=o>>>0,d||ne(this,s,o,2,32767,-32768),this[o]=s>>>8,this[o+1]=s&255,o+2},u.prototype.writeInt32LE=function(s,o,d){return s=+s,o=o>>>0,d||ne(this,s,o,4,2147483647,-2147483648),this[o]=s&255,this[o+1]=s>>>8,this[o+2]=s>>>16,this[o+3]=s>>>24,o+4},u.prototype.writeInt32BE=function(s,o,d){return s=+s,o=o>>>0,d||ne(this,s,o,4,2147483647,-2147483648),s<0&&(s=4294967295+s+1),this[o]=s>>>24,this[o+1]=s>>>16,this[o+2]=s>>>8,this[o+3]=s&255,o+4},u.prototype.writeBigInt64LE=We(function(s,o=0){return M(this,s,o,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=We(function(s,o=0){return de(this,s,o,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ae(f,s,o,d,b,E){if(o+d>f.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("Index out of range")}function Ve(f,s,o,d,b){return s=+s,o=o>>>0,b||Ae(f,s,o,4),r.write(f,s,o,d,23,4),o+4}u.prototype.writeFloatLE=function(s,o,d){return Ve(this,s,o,!0,d)},u.prototype.writeFloatBE=function(s,o,d){return Ve(this,s,o,!1,d)};function Ke(f,s,o,d,b){return s=+s,o=o>>>0,b||Ae(f,s,o,8),r.write(f,s,o,d,52,8),o+8}u.prototype.writeDoubleLE=function(s,o,d){return Ke(this,s,o,!0,d)},u.prototype.writeDoubleBE=function(s,o,d){return Ke(this,s,o,!1,d)},u.prototype.copy=function(s,o,d,b){if(!u.isBuffer(s))throw new TypeError("argument should be a Buffer");if(d||(d=0),!b&&b!==0&&(b=this.length),o>=s.length&&(o=s.length),o||(o=0),b>0&&b<d&&(b=d),b===d||s.length===0||this.length===0)return 0;if(o<0)throw new RangeError("targetStart out of bounds");if(d<0||d>=this.length)throw new RangeError("Index out of range");if(b<0)throw new RangeError("sourceEnd out of bounds");b>this.length&&(b=this.length),s.length-o<b-d&&(b=s.length-o+d);const E=b-d;return this===s&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(o,d,b):Uint8Array.prototype.set.call(s,this.subarray(d,b),o),E},u.prototype.fill=function(s,o,d,b){if(typeof s=="string"){if(typeof o=="string"?(b=o,o=0,d=this.length):typeof d=="string"&&(b=d,d=this.length),b!==void 0&&typeof b!="string")throw new TypeError("encoding must be a string");if(typeof b=="string"&&!u.isEncoding(b))throw new TypeError("Unknown encoding: "+b);if(s.length===1){const A=s.charCodeAt(0);(b==="utf8"&&A<128||b==="latin1")&&(s=A)}}else typeof s=="number"?s=s&255:typeof s=="boolean"&&(s=Number(s));if(o<0||this.length<o||this.length<d)throw new RangeError("Out of range index");if(d<=o)return this;o=o>>>0,d=d===void 0?this.length:d>>>0,s||(s=0);let E;if(typeof s=="number")for(E=o;E<d;++E)this[E]=s;else{const A=u.isBuffer(s)?s:u.from(s,b),W=A.length;if(W===0)throw new TypeError('The value "'+s+'" is invalid for argument "value"');for(E=0;E<d-o;++E)this[E+o]=A[E%W]}return this};const Te={};function Ye(f,s,o){Te[f]=class extends o{constructor(){super(),Object.defineProperty(this,"message",{value:s.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${f}]`,this.stack,delete this.name}get code(){return f}set code(b){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:b,writable:!0})}toString(){return`${this.name} [${f}]: ${this.message}`}}}Ye("ERR_BUFFER_OUT_OF_BOUNDS",function(f){return f?`${f} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ye("ERR_INVALID_ARG_TYPE",function(f,s){return`The "${f}" argument must be of type number. Received type ${typeof s}`},TypeError),Ye("ERR_OUT_OF_RANGE",function(f,s,o){let d=`The value of "${f}" is out of range.`,b=o;return Number.isInteger(o)&&Math.abs(o)>2**32?b=Tt(String(o)):typeof o=="bigint"&&(b=String(o),(o>BigInt(2)**BigInt(32)||o<-(BigInt(2)**BigInt(32)))&&(b=Tt(b)),b+="n"),d+=` It must be ${s}. Received ${b}`,d},RangeError);function Tt(f){let s="",o=f.length;const d=f[0]==="-"?1:0;for(;o>=d+4;o-=3)s=`_${f.slice(o-3,o)}${s}`;return`${f.slice(0,o)}${s}`}function ht(f,s,o){y(s,"offset"),(f[s]===void 0||f[s+o]===void 0)&&x(s,f.length-(o+1))}function Xe(f,s,o,d,b,E){if(f>o||f<s){const A=typeof s=="bigint"?"n":"";let W;throw E>3?s===0||s===BigInt(0)?W=`>= 0${A} and < 2${A} ** ${(E+1)*8}${A}`:W=`>= -(2${A} ** ${(E+1)*8-1}${A}) and < 2 ** ${(E+1)*8-1}${A}`:W=`>= ${s}${A} and <= ${o}${A}`,new Te.ERR_OUT_OF_RANGE("value",W,f)}ht(d,b,E)}function y(f,s){if(typeof f!="number")throw new Te.ERR_INVALID_ARG_TYPE(s,"number",f)}function x(f,s,o){throw Math.floor(f)!==f?(y(f,o),new Te.ERR_OUT_OF_RANGE(o||"offset","an integer",f)):s<0?new Te.ERR_BUFFER_OUT_OF_BOUNDS:new Te.ERR_OUT_OF_RANGE(o||"offset",`>= ${o?1:0} and <= ${s}`,f)}const v=/[^+/0-9A-Za-z-_]/g;function F(f){if(f=f.split("=")[0],f=f.trim().replace(v,""),f.length<2)return"";for(;f.length%4!==0;)f=f+"=";return f}function j(f,s){s=s||1/0;let o;const d=f.length;let b=null;const E=[];for(let A=0;A<d;++A){if(o=f.charCodeAt(A),o>55295&&o<57344){if(!b){if(o>56319){(s-=3)>-1&&E.push(239,191,189);continue}else if(A+1===d){(s-=3)>-1&&E.push(239,191,189);continue}b=o;continue}if(o<56320){(s-=3)>-1&&E.push(239,191,189),b=o;continue}o=(b-55296<<10|o-56320)+65536}else b&&(s-=3)>-1&&E.push(239,191,189);if(b=null,o<128){if((s-=1)<0)break;E.push(o)}else if(o<2048){if((s-=2)<0)break;E.push(o>>6|192,o&63|128)}else if(o<65536){if((s-=3)<0)break;E.push(o>>12|224,o>>6&63|128,o&63|128)}else if(o<1114112){if((s-=4)<0)break;E.push(o>>18|240,o>>12&63|128,o>>6&63|128,o&63|128)}else throw new Error("Invalid code point")}return E}function Z(f){const s=[];for(let o=0;o<f.length;++o)s.push(f.charCodeAt(o)&255);return s}function te(f,s){let o,d,b;const E=[];for(let A=0;A<f.length&&!((s-=2)<0);++A)o=f.charCodeAt(A),d=o>>8,b=o%256,E.push(b),E.push(d);return E}function Y(f){return e.toByteArray(F(f))}function Re(f,s,o,d){let b;for(b=0;b<d&&!(b+o>=s.length||b>=f.length);++b)s[b+o]=f[b];return b}function C(f,s){return f instanceof s||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===s.name}function $e(f){return f!==f}const Gt=function(){const f="0123456789abcdef",s=new Array(256);for(let o=0;o<16;++o){const d=o*16;for(let b=0;b<16;++b)s[d+b]=f[o]+f[b]}return s}();function We(f){return typeof BigInt>"u"?Rn:f}function Rn(){throw new Error("BigInt not supported")}})(je);/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let Ln;var so=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:Ks):t=>(Ln||(Ln=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0));const oo=Ys(so),vt="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Nt="http://www.w3.org/2001/XMLSchema#",Ir="http://www.w3.org/2000/10/swap/",be={xsd:{decimal:`${Nt}decimal`,boolean:`${Nt}boolean`,double:`${Nt}double`,integer:`${Nt}integer`,string:`${Nt}string`},rdf:{type:`${vt}type`,nil:`${vt}nil`,first:`${vt}first`,rest:`${vt}rest`,langString:`${vt}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${Ir}reify#forSome`,forAll:`${Ir}reify#forAll`},log:{implies:`${Ir}log#implies`}},{xsd:Ht}=be,ao=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,jn={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},lo=/[\x00-\x20<>\\"\{\}\|\^\`]/,uo={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},fo=/$0^/;class co{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const r in this)!(r in uo)&&this[r]instanceof RegExp&&(this[r]=fo)}else this._n3Mode=e.n3!==!1;this.comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,r){let n=this._input,i=n.length;for(;;){let u,p;for(;u=this._newline.exec(n);)this.comments&&(p=this._comment.exec(u[0]))&&a("comment",p[1],"",this._line,u[0].length),n=n.substr(u[0].length,n.length),i=n.length,this._line++;if(!u&&(u=this._whitespace.exec(n))&&(n=n.substr(u[0].length,n.length)),this._endOfFile.test(n))return r&&(this.comments&&(p=this._comment.exec(n))&&a("comment",p[1],"",this._line,n.length),n=null,a("eof","","",this._line,0)),this._input=n;const _=this._line,g=n[0];let S="",m="",w="",I=null,R=0,N=!1;switch(g){case"^":if(n.length<3)break;if(n[1]==="^"){if(this._previousMarker="^^",n=n.substr(2),n[0]!=="<"){N=!0;break}}else{this._n3Mode&&(R=1,S="^");break}case"<":if(I=this._unescapedIri.exec(n))S="IRI",m=I[1];else if(I=this._iri.exec(n)){if(m=this._unescape(I[1]),m===null||lo.test(m))return l(this);S="IRI"}else n.length>1&&n[1]==="<"?(S="<<",R=2):this._n3Mode&&n.length>1&&n[1]==="="&&(S="inverse",R=2,m=">");break;case">":n.length>1&&n[1]===">"&&(S=">>",R=2);break;case"_":((I=this._blank.exec(n))||r&&(I=this._blank.exec(`${n} `)))&&(S="blank",w="_",m=I[1]);break;case'"':if(I=this._simpleQuotedString.exec(n))m=I[1];else if({value:m,matchLength:R}=this._parseLiteral(n),m===null)return l(this);(I!==null||R!==0)&&(S="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(I=this._simpleApostropheString.exec(n))m=I[1];else if({value:m,matchLength:R}=this._parseLiteral(n),m===null)return l(this);(I!==null||R!==0)&&(S="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(I=this._variable.exec(n))&&(S="var",m=I[0]);break;case"@":this._previousMarker==="literal"&&(I=this._langcode.exec(n))?(S="langcode",m=I[1]):(I=this._keyword.exec(n))&&(S=I[0]);break;case".":if(n.length===1?r:n[1]<"0"||n[1]>"9"){S=".",R=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(I=this._number.exec(n)||r&&(I=this._number.exec(`${n} `)))&&(S="literal",m=I[0],w=typeof I[1]=="string"?Ht.double:typeof I[2]=="string"?Ht.decimal:Ht.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(I=this._sparqlKeyword.exec(n))?S=I[0].toUpperCase():N=!0;break;case"f":case"t":(I=this._boolean.exec(n))?(S="literal",m=I[0],w=Ht.boolean):N=!0;break;case"a":(I=this._shortPredicates.exec(n))?(S="abbreviation",m="a"):N=!0;break;case"=":this._n3Mode&&n.length>1&&(S="abbreviation",n[1]!==">"?(R=1,m="="):(R=2,m=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(R=1,S=g);break;case"{":!this._lineMode&&n.length>=2&&(n[1]==="|"?(S="{|",R=2):(S=g,R=1));break;case"|":n.length>=2&&n[1]==="}"&&(S="|}",R=2);break;default:N=!0}if(N&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(I=this._prefix.exec(n))?(S="prefix",m=I[1]||""):((I=this._prefixed.exec(n))||r&&(I=this._prefixed.exec(`${n} `)))&&(S="prefixed",w=I[1]||"",m=this._unescape(I[2]))),this._previousMarker==="^^")switch(S){case"prefixed":S="type";break;case"IRI":S="typeIRI";break;default:S=""}if(!S)return r||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?l(this):this._input=n;const k=R||I[0].length,O=a(S,m,w,_,k);this.previousToken=O,this._previousMarker=S,n=n.substr(k,n.length)}function a(u,p,_,g,S){const m=n?i-n.length:i,w=m+S,I={type:u,value:p,prefix:_,line:g,start:m,end:w};return e(null,I),I}function l(u){e(u._syntaxError(/^\S*/.exec(n)[0]))}}_unescape(e){let r=!1;const n=e.replace(ao,(i,a,l,u)=>{if(typeof a=="string")return String.fromCharCode(Number.parseInt(a,16));if(typeof l=="string"){let p=Number.parseInt(l,16);return p<=65535?String.fromCharCode(Number.parseInt(l,16)):String.fromCharCode(55296+((p-=65536)>>10),56320+(p&1023))}return u in jn?jn[u]:(r=!0,"")});return r?null:n}_parseLiteral(e){if(e.length>=3){const r=e.match(/^(?:"""|"|'''|'|)/)[0],n=r.length;let i=Math.max(this._literalClosingPos,n);for(;(i=e.indexOf(r,i))>0;){let a=0;for(;e[i-a-1]==="\\";)a++;if(a%2===0){const l=e.substring(n,i),u=l.split(/\r\n|\r|\n/).length-1,p=i+n;if(n===1&&u!==0||n===3&&this._lineMode)break;return this._line+=u,{value:this._unescape(l),matchLength:p}}i++}this._literalClosingPos=e.length-n+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const r=new Error(`Unexpected "${e}" on line ${this._line}.`);return r.context={token:void 0,line:this._line,previousToken:this.previousToken},r}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,r){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof r=="function")oo(()=>this._tokenizeToEnd(r,!0));else{const n=[];let i;if(this._tokenizeToEnd((a,l)=>a?i=a:n.push(l),!0),i)throw i;return n}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",n=>{this._input!==null&&n.length!==0&&(this._pendingBuffer&&(n=je.Buffer.concat([this._pendingBuffer,n]),this._pendingBuffer=null),n[n.length-1]&128?this._pendingBuffer=n:(typeof this._input>"u"?this._input=this._readStartingBom(typeof n=="string"?n:n.toString()):this._input+=n,this._tokenizeToEnd(r,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(r,!0)}),e.on("error",r)}}const{rdf:ho,xsd:nt}=be;let Pt,po=0;const Ar={namedNode:wo,blankNode:mo,variable:Eo,literal:xo,defaultGraph:So,quad:Bn,triple:Bn},$t=Ar;class Fe{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof Fe?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class Tr extends Fe{get termType(){return"NamedNode"}}class gt extends Fe{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let r=e.lastIndexOf('"')+1;return r<e.length&&e[r++]==="@"?e.substr(r).toLowerCase():""}get datatype(){return new Tr(this.datatypeString)}get datatypeString(){const e=this.id,r=e.lastIndexOf('"')+1,n=r<e.length?e[r]:"";return n==="^"?e.substr(r+2):n!=="@"?nt.string:ho.langString}equals(e){return e instanceof gt?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class _o extends Fe{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class bo extends Fe{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}class go extends Fe{constructor(){return super(""),Pt||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}}Pt=new go;function Lt(t,e,r){if(e=e||Ar,!t)return e.defaultGraph();switch(t[0]){case"?":return e.variable(t.substr(1));case"_":return e.blankNode(t.substr(2));case'"':if(e===Ar)return new gt(t);if(t[t.length-1]==='"')return e.literal(t.substr(1,t.length-2));const n=t.lastIndexOf('"',t.length-1);return e.literal(t.substr(1,n-1),t[n+1]==="@"?t.substr(n+2):e.namedNode(t.substr(n+3)));case"[":t=JSON.parse(t);break;default:if(!r||!Array.isArray(t))return e.namedNode(t)}return e.quad(Lt(t[0],e,!0),Lt(t[1],e,!0),Lt(t[2],e,!0),t[3]&&Lt(t[3],e,!0))}function yt(t,e){if(typeof t=="string")return t;if(t instanceof Fe&&t.termType!=="Quad")return t.id;if(!t)return Pt.id;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return`"${t.value}"${t.language?`@${t.language}`:t.datatype&&t.datatype.value!==nt.string?`^^${t.datatype.value}`:""}`;case"Quad":const r=[yt(t.subject,!0),yt(t.predicate,!0),yt(t.object,!0)];return t.graph&&t.graph.termType!=="DefaultGraph"&&r.push(yt(t.graph,!0)),e?r:JSON.stringify(r);default:throw new Error(`Unexpected termType: ${t.termType}`)}}class yo extends Fe{constructor(e,r,n,i){super(""),this._subject=e,this._predicate=r,this._object=n,this._graph=i||Pt}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function wo(t){return new Tr(t)}function mo(t){return new _o(t||`n3-${po++}`)}function xo(t,e){if(typeof e=="string")return new gt(`"${t}"@${e.toLowerCase()}`);let r=e?e.value:"";return r===""&&(typeof t=="boolean"?r=nt.boolean:typeof t=="number"&&(Number.isFinite(t)?r=Number.isInteger(t)?nt.integer:nt.double:(r=nt.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),r===""||r===nt.string?new gt(`"${t}"`):new gt(`"${t}"^^${r}`)}function Eo(t){return new bo(t)}function So(){return Pt}function Bn(t,e,r,n){return new yo(t,e,r,n)}let Fn=0;class kn{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&Cn(this,e.factory);const r=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",n=/turtle/.test(r),i=/trig/.test(r),a=/triple/.test(r),l=/quad/.test(r),u=this._n3Mode=/n3/.test(r),p=a||l;(this._supportsNamedGraphs=!(n||u))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||i||a||u),this._supportsRDFStar=r===""||/star|\*$/.test(r),p&&(this._resolveRelativeIRI=_=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new co({lineMode:p,n3:u}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){Fn=0}_setBase(e){if(!e)this._base="",this._basePath="";else{const r=e.indexOf("#");r>=0&&(e=e.substr(0,r)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,r,n,i,a){const l=this._n3Mode;this._contextStack.push({type:e,subject:n,predicate:i,object:a,graph:r,inverse:l?this._inversePredicate:!1,blankPrefix:l?this._prefixes._:"",quantified:l?this._quantified:null}),l&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,r){const n=this._contextStack.pop();if(!n||n.type!==e)return this._error(`Unexpected ${r.type}`,r);this._subject=n.subject,this._predicate=n.predicate,this._object=n.object,this._graph=n.graph,this._n3Mode&&(this._inversePredicate=n.inverse,this._prefixes._=n.blankPrefix,this._quantified=n.quantified)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,r){let n;switch(e.type){case"IRI":case"typeIRI":const i=this._resolveIRI(e.value);if(i===null)return this._error("Invalid IRI",e);n=this._namedNode(i);break;case"type":case"prefixed":const a=this._prefixes[e.prefix];if(a===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);n=this._namedNode(a+e.value);break;case"blank":n=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":n=this._variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!r&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const r=e.type;switch(r){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${r}`,e):(this._subject=null,r==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return e.type==="]"?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const r=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:r?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let r=null,n=null,i=this._readListItem;const a=this._subject,l=this._contextStack,u=l[l.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,n=this._blankNode(),this.RDF_FIRST,this._subject=r=this._blankNode()),i=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),l.length!==0&&l[l.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(i=this._readPredicate,this._subject===this.RDF_NIL)return i}else if(i=this._getContextEndReader(),this._object===this.RDF_NIL)return i;n=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,i=this._readListItemDataTypeOrLang):(r=this._literal(e.value,this._namedNode(e.prefix)),i=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if((r=this._readEntity(e))===void 0)return}if(n===null&&(this._subject=n=this._blankNode()),a===null?u.predicate===null?u.subject=n:u.object=n:this._emit(a,this.RDF_REST,n,this._graph),r!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,n,this.RDF_FIRST,r),this._subject=r,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,r,this._graph)}return i}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let r=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const n=this._readEntity(e);if(n===void 0)return;r=this._literal(this._literalValue,n),e=null;break;case"langcode":r=this._literal(this._literalValue,e.value),e=null;break}return{token:e,literal:r}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,r){const n=this._completeLiteral(e);if(n)return this._object=n.literal,r&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),n.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(n.token))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let r,n=this._graph;const i=this._subject,a=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,r=this._contextStack.length?this._readSubject:this._readInTopContext,a&&(this._inversePredicate=!1);break;case";":r=this._readPredicate;break;case",":r=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);const l=this._predicate,u=this._object;this._subject=this._quad(i,l,u,this.DEFAULTGRAPH),r=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",e);this._subject=null,r=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(n=this._readEntity(e))!==void 0){r=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(i!==null){const l=this._predicate,u=this._object;a?this._emit(u,l,i,n):this._emit(i,l,u,n)}return r}_readBlankNodePunctuation(e){let r;switch(e.type){case";":r=this._readPredicate;break;case",":r=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),r}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const r=this._readEntity(e);return this._prefixes[this._prefix]=r.value,this._prefixCallback(this._prefix,r),this._readDeclarationPunctuation}_readBaseIRI(e){const r=e.type==="IRI"&&this._resolveIRI(e.value);return r?(this._setBase(r),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let r;switch(e.type){case"IRI":case"prefixed":if((r=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,r,this.QUANTIFIERS_GRAPH)):this._quantified[r.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const r=this._contextStack,n=r.length&&r[r.length-1];if(n&&n.type==="item"){const i=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,i,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let r,n;const i=this._blankNode();if((n=this._readEntity(e))!==void 0)return this._predicate===null?(r=this._subject,this._subject=i):(r=this._object,this._object=i),this._emit(r,n,i,this._graph),this._readPath}_readBackwardPath(e){const r=this._blankNode();let n,i;if((n=this._readEntity(e))!==void 0)return this._predicate===null?(i=this._subject,this._subject=r):(i=this._object,this._object=r),this._emit(r,n,i,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return e.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(e))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);const r=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),this._subject===null?(this._subject=r,this._readPredicate):(this._object=r,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,r,n,i){this._callback(null,this._quad(e,r,n,i||this.DEFAULTGRAPH))}_error(e,r){const n=new Error(`${e} on line ${r.line}.`);n.context={token:r,line:r.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=Qt}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const r=e.length;let n="",i=-1,a=-1,l=0,u="/";for(;i<r;){switch(u){case":":if(a<0&&e[++i]==="/"&&e[++i]==="/")for(;(a=i+1)<r&&e[a]!=="/";)i=a;break;case"?":case"#":i=r;break;case"/":if(e[i+1]===".")switch(u=e[++i+1],u){case"/":n+=e.substring(l,i-1),l=i+1;break;case void 0:case"?":case"#":return n+e.substring(l,i)+e.substr(i+1);case".":if(u=e[++i+1],u===void 0||u==="/"||u==="?"||u==="#"){if(n+=e.substring(l,i-2),(l=n.lastIndexOf("/"))>=a&&(n=n.substr(0,l)),u!=="/")return`${n}/${e.substr(i+1)}`;l=i+1}}}u=e[++i]}return n+e.substring(l)}parse(e,r,n){let i,a,l;if(r&&(r.onQuad||r.onPrefix||r.onComment)?(i=r.onQuad,a=r.onPrefix,l=r.onComment):(i=r,a=n),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${Fn++}_`,this._prefixCallback=a||Qt,this._inversePredicate=!1,this._quantified=Object.create(null),!i){const p=[];let _;if(this._callback=(g,S)=>{g?_=g:S&&p.push(S)},this._lexer.tokenize(e).every(g=>this._readCallback=this._readCallback(g)),_)throw _;return p}let u=(p,_)=>{p!==null?(this._callback(p),this._callback=Qt):this._readCallback&&(this._readCallback=this._readCallback(_))};l&&(this._lexer.comments=!0,u=(p,_)=>{p!==null?(this._callback(p),this._callback=Qt):this._readCallback&&(_.type==="comment"?l(_.value):this._readCallback=this._readCallback(_))}),this._callback=i,this._lexer.tokenize(e,u)}}function Qt(){}function Cn(t,e){const r=e.namedNode;t._namedNode=r,t._blankNode=e.blankNode,t._literal=e.literal,t._variable=e.variable,t._quad=e.quad,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=r(be.rdf.first),t.RDF_REST=r(be.rdf.rest),t.RDF_NIL=r(be.rdf.nil),t.N3_FORALL=r(be.r.forAll),t.N3_FORSOME=r(be.r.forSome),t.ABBREVIATIONS={a:r(be.rdf.type),"=":r(be.owl.sameAs),">":r(be.log.implies)},t.QUANTIFIERS_GRAPH=r("urn:n3:quantifiers")}Cn(kn.prototype,$t);function vr(t){return!!t&&t.termType==="DefaultGraph"}const jt=$t.defaultGraph(),{rdf:Ro,xsd:wt}=be,On=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,Mn=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,Io={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class Bt extends Fe{equals(e){return e===this}}class Dn{constructor(e,r){if(this._prefixRegex=/$0^/,e&&typeof e.write!="function"&&(r=e,e=null),r=r||{},this._lists=r.lists,e)this._outputStream=e,this._endStream=r.end===void 0?!0:!!r.end;else{let n="";this._outputStream={write(i,a,l){n+=i,l&&l()},end:i=>{i&&i(null,n)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(r.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=jt,this._prefixIRIs=Object.create(null),r.prefixes&&this.addPrefixes(r.prefixes),r.baseIRI&&(this._baseMatcher=new RegExp(`^${Wn(r.baseIRI)}${r.baseIRI.endsWith("/")?"":"[#?]"}`),this._baseLength=r.baseIRI.length))}get _inDefaultGraph(){return jt.equals(this._graph)}_write(e,r){this._outputStream.write(e,"utf8",r)}_writeQuad(e,r,n,i,a){try{i.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(jt.equals(i)?"":`${this._encodeIriOrBlank(i)} {
`)),this._graph=i,this._subject=null),e.equals(this._subject)?r.equals(this._predicate)?this._write(`, ${this._encodeObject(n)}`,a):this._write(`;
    ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,a):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,a)}catch(l){a&&a(l)}}_writeQuadLine(e,r,n,i,a){delete this._prefixMatch,this._write(this.quadToString(e,r,n,i),a)}quadToString(e,r,n,i){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(r)} ${this._encodeObject(n)}${i&&i.value?` ${this._encodeIriOrBlank(i)} .
`:` .
`}`}quadsToString(e){let r="";for(const n of e)r+=this.quadToString(n.subject,n.predicate,n.object,n.graph);return r}_encodeSubject(e){return e.termType==="Quad"?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if(e.termType!=="NamedNode")return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let r=e.value;this._baseMatcher&&this._baseMatcher.test(r)&&(r=r.substr(this._baseLength)),On.test(r)&&(r=r.replace(Mn,Un));const n=this._prefixRegex.exec(r);return n?n[1]?this._prefixIRIs[n[1]]+n[2]:r:`<${r}>`}_encodeLiteral(e){let r=e.value;if(On.test(r)&&(r=r.replace(Mn,Un)),e.language)return`"${r}"@${e.language}`;if(this._lineMode){if(e.datatype.value===wt.string)return`"${r}"`}else switch(e.datatype.value){case wt.string:return`"${r}"`;case wt.boolean:if(r==="true"||r==="false")return r;break;case wt.integer:if(/^[+-]?\d+$/.test(r))return r;break;case wt.decimal:if(/^[+-]?\d*\.\d+$/.test(r))return r;break;case wt.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(r))return r;break}return`"${r}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===Ro.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:r,object:n,graph:i}){return`<<${this._encodeSubject(e)} ${this._encodePredicate(r)} ${this._encodeObject(n)}${vr(i)?"":` ${this._encodeIriOrBlank(i)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,r,n,i,a){n===void 0?this._writeQuad(e.subject,e.predicate,e.object,e.graph,r):typeof i=="function"?this._writeQuad(e,r,n,jt,i):this._writeQuad(e,r,n,i||jt,a)}addQuads(e){for(let r=0;r<e.length;r++)this.addQuad(e[r])}addPrefix(e,r,n){const i={};i[e]=r,this.addPrefixes(i,n)}addPrefixes(e,r){if(!this._prefixIRIs)return r&&r();let n=!1;for(let i in e){let a=e[i];typeof a!="string"&&(a=a.value),n=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[a]=i+=":",this._write(`@prefix ${i} <${a}>.
`)}if(n){let i="",a="";for(const l in this._prefixIRIs)i+=i?`|${l}`:l,a+=(a?"|":"")+this._prefixIRIs[l];i=Wn(i),this._prefixRegex=new RegExp(`^(?:${a})[^/]*$|^(${i})([_a-zA-Z][\\-_a-zA-Z0-9]*)$`)}this._write(n?`
`:"",r)}blank(e,r){let n=e,i,a;switch(e===void 0?n=[]:e.termType?n=[{predicate:e,object:r}]:"length"in e||(n=[e]),a=n.length){case 0:return new Bt("[]");case 1:if(i=n[0],!(i.object instanceof Bt))return new Bt(`[ ${this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)} ]`);default:let l="[";for(let u=0;u<a;u++)i=n[u],i.predicate.equals(e)?l+=`, ${this._encodeObject(i.object)}`:(l+=`${(u?`;
  `:`
  `)+this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)}`,e=i.predicate);return new Bt(`${l}
]`)}}list(e){const r=e&&e.length||0,n=new Array(r);for(let i=0;i<r;i++)n[i]=this._encodeObject(e[i]);return new Bt(`(${n.join(" ")})`)}end(e){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let r=e&&((n,i)=>{r=null,e(n,i)});if(this._endStream)try{return this._outputStream.end(r)}catch{}r&&r()}}function Un(t){let e=Io[t];return e===void 0&&(t.length===1?(e=t.charCodeAt(0).toString(16),e="\\u0000".substr(0,6-e.length)+e):(e=((t.charCodeAt(0)-55296)*1024+t.charCodeAt(1)+9216).toString(16),e="\\U00000000".substr(0,10-e.length)+e)),e}function Wn(t){return t.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}var Gn={exports:{}},Nr={exports:{}},ce={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Boolean,Uint8Array},qn={exports:{}},Ft={exports:{}},zn;function kt(){if(zn)return Ft.exports;zn=1;const{AbortController:t,AbortSignal:e}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Ft.exports=t,Ft.exports.AbortSignal=e,Ft.exports.default=t,Ft.exports}var Pr={exports:{}},mt=typeof Reflect=="object"?Reflect:null,Hn=mt&&typeof mt.apply=="function"?mt.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},Vt;mt&&typeof mt.ownKeys=="function"?Vt=mt.ownKeys:Object.getOwnPropertySymbols?Vt=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Vt=function(e){return Object.getOwnPropertyNames(e)};function Ao(t){console&&console.warn&&console.warn(t)}var Qn=Number.isNaN||function(e){return e!==e};function X(){X.init.call(this)}Pr.exports=X,Pr.exports.once=Po,X.EventEmitter=X,X.prototype._events=void 0,X.prototype._eventsCount=0,X.prototype._maxListeners=void 0;var Vn=10;function Kt(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(X,"defaultMaxListeners",{enumerable:!0,get:function(){return Vn},set:function(t){if(typeof t!="number"||t<0||Qn(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Vn=t}}),X.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},X.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Qn(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Kn(t){return t._maxListeners===void 0?X.defaultMaxListeners:t._maxListeners}X.prototype.getMaxListeners=function(){return Kn(this)},X.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",a=this._events;if(a!==void 0)i=i&&a.error===void 0;else if(!i)return!1;if(i){var l;if(r.length>0&&(l=r[0]),l instanceof Error)throw l;var u=new Error("Unhandled error."+(l?" ("+l.message+")":""));throw u.context=l,u}var p=a[e];if(p===void 0)return!1;if(typeof p=="function")Hn(p,this,r);else for(var _=p.length,g=ei(p,_),n=0;n<_;++n)Hn(g[n],this,r);return!0};function Yn(t,e,r,n){var i,a,l;if(Kt(r),a=t._events,a===void 0?(a=t._events=Object.create(null),t._eventsCount=0):(a.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),a=t._events),l=a[e]),l===void 0)l=a[e]=r,++t._eventsCount;else if(typeof l=="function"?l=a[e]=n?[r,l]:[l,r]:n?l.unshift(r):l.push(r),i=Kn(t),i>0&&l.length>i&&!l.warned){l.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=l.length,Ao(u)}return t}X.prototype.addListener=function(e,r){return Yn(this,e,r,!1)},X.prototype.on=X.prototype.addListener,X.prototype.prependListener=function(e,r){return Yn(this,e,r,!0)};function To(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Xn(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=To.bind(n);return i.listener=r,n.wrapFn=i,i}X.prototype.once=function(e,r){return Kt(r),this.on(e,Xn(this,e,r)),this},X.prototype.prependOnceListener=function(e,r){return Kt(r),this.prependListener(e,Xn(this,e,r)),this},X.prototype.removeListener=function(e,r){var n,i,a,l,u;if(Kt(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(a=-1,l=n.length-1;l>=0;l--)if(n[l]===r||n[l].listener===r){u=n[l].listener,a=l;break}if(a<0)return this;a===0?n.shift():vo(n,a),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,u||r)}return this},X.prototype.off=X.prototype.removeListener,X.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var a=Object.keys(n),l;for(i=0;i<a.length;++i)l=a[i],l!=="removeListener"&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function Zn(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?No(i):ei(i,i.length)}X.prototype.listeners=function(e){return Zn(this,e,!0)},X.prototype.rawListeners=function(e){return Zn(this,e,!1)},X.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Jn.call(t,e)},X.prototype.listenerCount=Jn;function Jn(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}X.prototype.eventNames=function(){return this._eventsCount>0?Vt(this._events):[]};function ei(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function vo(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function No(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Po(t,e){return new Promise(function(r,n){function i(l){t.removeListener(e,a),n(l)}function a(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}ti(t,e,a,{once:!0}),e!=="error"&&$o(t,i,{once:!0})})}function $o(t,e,r){typeof t.on=="function"&&ti(t,"error",e,r)}function ti(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(a){n.once&&t.removeEventListener(e,i),r(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Yt=Pr.exports;(function(t){const e=je,{kResistStopPropagation:r,SymbolDispose:n}=ce,i=globalThis.AbortSignal||kt().AbortSignal,a=globalThis.AbortController||kt().AbortController,l=Object.getPrototypeOf(async function(){}).constructor,u=globalThis.Blob||e.Blob,p=typeof u<"u"?function(w){return w instanceof u}:function(w){return!1},_=(m,w)=>{if(m!==void 0&&(m===null||typeof m!="object"||!("aborted"in m)))throw new ERR_INVALID_ARG_TYPE(w,"AbortSignal",m)},g=(m,w)=>{if(typeof m!="function")throw new ERR_INVALID_ARG_TYPE(w,"Function",m)};class S extends Error{constructor(w){if(!Array.isArray(w))throw new TypeError(`Expected input to be an Array, got ${typeof w}`);let I="";for(let R=0;R<w.length;R++)I+=`    ${w[R].stack}
`;super(I),this.name="AggregateError",this.errors=w}}t.exports={AggregateError:S,kEmptyObject:Object.freeze({}),once(m){let w=!1;return function(...I){w||(w=!0,m.apply(this,I))}},createDeferredPromise:function(){let m,w;return{promise:new Promise((R,N)=>{m=R,w=N}),resolve:m,reject:w}},promisify(m){return new Promise((w,I)=>{m((R,...N)=>R?I(R):w(...N))})},debuglog(){return function(){}},format(m,...w){return m.replace(/%([sdifj])/g,function(...[I,R]){const N=w.shift();return R==="f"?N.toFixed(6):R==="j"?JSON.stringify(N):R==="s"&&typeof N=="object"?`${N.constructor!==Object?N.constructor.name:""} {}`.trim():N.toString()})},inspect(m){switch(typeof m){case"string":if(m.includes("'"))if(m.includes('"')){if(!m.includes("`")&&!m.includes("${"))return`\`${m}\``}else return`"${m}"`;return`'${m}'`;case"number":return isNaN(m)?"NaN":Object.is(m,-0)?String(m):m;case"bigint":return`${String(m)}n`;case"boolean":case"undefined":return String(m);case"object":return"{}"}},types:{isAsyncFunction(m){return m instanceof l},isArrayBufferView(m){return ArrayBuffer.isView(m)}},isBlob:p,deprecate(m,w){return m},addAbortListener:Yt.addAbortListener||function(w,I){if(w===void 0)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",w);_(w,"signal"),g(I,"listener");let R;return w.aborted?queueMicrotask(()=>I()):(w.addEventListener("abort",I,{__proto__:null,once:!0,[r]:!0}),R=()=>{w.removeEventListener("abort",I)}),{__proto__:null,[n](){var N;(N=R)===null||N===void 0||N()}}},AbortSignalAny:i.any||function(w){if(w.length===1)return w[0];const I=new a,R=()=>I.abort();return w.forEach(N=>{_(N,"signals"),N.addEventListener("abort",R,{once:!0})}),I.signal.addEventListener("abort",()=>{w.forEach(N=>N.removeEventListener("abort",R))},{once:!0}),I.signal}},t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(qn);var xe=qn.exports,$r={};const{format:Lo,inspect:Xt,AggregateError:jo}=xe,Bo=globalThis.AggregateError||jo,Fo=Symbol("kIsNodeError"),ko=["string","function","number","object","Function","Object","boolean","bigint","symbol"],Co=/^([A-Z][a-z0-9]*)+$/,Oo="__node_internal_",Zt={};function it(t,e){if(!t)throw new Zt.ERR_INTERNAL_ASSERTION(e)}function ri(t){let e="",r=t.length;const n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function Mo(t,e,r){if(typeof e=="function")return it(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);const n=(e.match(/%[dfijoOs]/g)||[]).length;return it(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:Lo(e,...r)}function _e(t,e,r){r||(r=Error);class n extends r{constructor(...a){super(Mo(t,e,a))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[Fo]=!0,Zt[t]=n}function ni(t){const e=Oo+t.name;return Object.defineProperty(t,"name",{value:e}),t}function Do(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;const r=new Bo([e,t],e.message);return r.code=e.code,r}return t||e}let Uo=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new Zt.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};_e("ERR_ASSERTION","%s",Error),_e("ERR_INVALID_ARG_TYPE",(t,e,r)=>{it(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";const i=[],a=[],l=[];for(const p of e)it(typeof p=="string","All expected entries have to be of type string"),ko.includes(p)?i.push(p.toLowerCase()):Co.test(p)?a.push(p):(it(p!=="object",'The value "object" should be written as "Object"'),l.push(p));if(a.length>0){const p=i.indexOf("object");p!==-1&&(i.splice(i,p,1),a.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{const p=i.pop();n+=`one of type ${i.join(", ")}, or ${p}`}}(a.length>0||l.length>0)&&(n+=" or ")}if(a.length>0){switch(a.length){case 1:n+=`an instance of ${a[0]}`;break;case 2:n+=`an instance of ${a[0]} or ${a[1]}`;break;default:{const p=a.pop();n+=`an instance of ${a.join(", ")}, or ${p}`}}l.length>0&&(n+=" or ")}switch(l.length){case 0:break;case 1:l[0].toLowerCase()!==l[0]&&(n+="an "),n+=`${l[0]}`;break;case 2:n+=`one of ${l[0]} or ${l[1]}`;break;default:{const p=l.pop();n+=`one of ${l.join(", ")}, or ${p}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var u;if((u=r.constructor)!==null&&u!==void 0&&u.name)n+=`. Received an instance of ${r.constructor.name}`;else{const p=Xt(r,{depth:-1});n+=`. Received ${p}`}}else{let p=Xt(r,{colors:!1});p.length>25&&(p=`${p.slice(0,25)}...`),n+=`. Received type ${typeof r} (${p})`}return n},TypeError),_e("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=Xt(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError),_e("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;const i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError),_e("ERR_MISSING_ARGS",(...t)=>{it(t.length>0,"At least one arg needs to be specified");let e;const r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{const n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError),_e("ERR_OUT_OF_RANGE",(t,e,r)=>{it(e,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=ri(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=ri(n)),n+="n"):n=Xt(r),`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError),_e("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),_e("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),_e("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),_e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),_e("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),_e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),_e("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),_e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),_e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),_e("ERR_STREAM_WRITE_AFTER_END","write after end",Error),_e("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var Se={AbortError:Uo,aggregateTwoErrors:ni(Do),hideStackFrames:ni,codes:Zt};const{ArrayIsArray:Lr,ArrayPrototypeIncludes:ii,ArrayPrototypeJoin:si,ArrayPrototypeMap:Wo,NumberIsInteger:jr,NumberIsNaN:Go,NumberMAX_SAFE_INTEGER:qo,NumberMIN_SAFE_INTEGER:zo,NumberParseInt:Ho,ObjectPrototypeHasOwnProperty:Qo,RegExpPrototypeExec:oi,String:Vo,StringPrototypeToUpperCase:Ko,StringPrototypeTrim:Yo}=ce,{hideStackFrames:Ne,codes:{ERR_SOCKET_BAD_PORT:Xo,ERR_INVALID_ARG_TYPE:ge,ERR_INVALID_ARG_VALUE:xt,ERR_OUT_OF_RANGE:st,ERR_UNKNOWN_SIGNAL:ai}}=Se,{normalizeEncoding:Zo}=xe,{isAsyncFunction:Jo,isArrayBufferView:ea}=xe.types,li={};function ta(t){return t===(t|0)}function ra(t){return t===t>>>0}const na=/^[0-7]+$/,ia="must be a 32-bit unsigned integer or an octal string";function sa(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(oi(na,t)===null)throw new xt(e,t,ia);t=Ho(t,8)}return ui(t,e),t}const oa=Ne((t,e,r=zo,n=qo)=>{if(typeof t!="number")throw new ge(e,"number",t);if(!jr(t))throw new st(e,"an integer",t);if(t<r||t>n)throw new st(e,`>= ${r} && <= ${n}`,t)}),aa=Ne((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new ge(e,"number",t);if(!jr(t))throw new st(e,"an integer",t);if(t<r||t>n)throw new st(e,`>= ${r} && <= ${n}`,t)}),ui=Ne((t,e,r=!1)=>{if(typeof t!="number")throw new ge(e,"number",t);if(!jr(t))throw new st(e,"an integer",t);const n=r?1:0,i=4294967295;if(t<n||t>i)throw new st(e,`>= ${n} && <= ${i}`,t)});function Br(t,e){if(typeof t!="string")throw new ge(e,"string",t)}function la(t,e,r=void 0,n){if(typeof t!="number")throw new ge(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&Go(t))throw new st(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}const ua=Ne((t,e,r)=>{if(!ii(r,t)){const i="must be one of: "+si(Wo(r,a=>typeof a=="string"?`'${a}'`:Vo(a)),", ");throw new xt(e,t,i)}});function fi(t,e){if(typeof t!="boolean")throw new ge(e,"boolean",t)}function Fr(t,e,r){return t==null||!Qo(t,e)?r:t[e]}const fa=Ne((t,e,r=null)=>{const n=Fr(r,"allowArray",!1),i=Fr(r,"allowFunction",!1);if(!Fr(r,"nullable",!1)&&t===null||!n&&Lr(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new ge(e,"Object",t)}),ca=Ne((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new ge(e,"a dictionary",t)}),Jt=Ne((t,e,r=0)=>{if(!Lr(t))throw new ge(e,"Array",t);if(t.length<r){const n=`must be longer than ${r}`;throw new xt(e,t,n)}});function da(t,e){Jt(t,e);for(let r=0;r<t.length;r++)Br(t[r],`${e}[${r}]`)}function ha(t,e){Jt(t,e);for(let r=0;r<t.length;r++)fi(t[r],`${e}[${r}]`)}function pa(t,e){Jt(t,e);for(let r=0;r<t.length;r++){const n=t[r],i=`${e}[${r}]`;if(n==null)throw new ge(i,"AbortSignal",n);ci(n,i)}}function _a(t,e="signal"){if(Br(t,e),li[t]===void 0)throw li[Ko(t)]!==void 0?new ai(t+" (signals must use all capital letters)"):new ai(t)}const ba=Ne((t,e="buffer")=>{if(!ea(t))throw new ge(e,["Buffer","TypedArray","DataView"],t)});function ga(t,e){const r=Zo(e),n=t.length;if(r==="hex"&&n%2!==0)throw new xt("encoding",e,`is invalid for data of length ${n}`)}function ya(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&Yo(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new Xo(e,t,r);return t|0}const ci=Ne((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new ge(e,"AbortSignal",t)}),wa=Ne((t,e)=>{if(typeof t!="function")throw new ge(e,"Function",t)}),ma=Ne((t,e)=>{if(typeof t!="function"||Jo(t))throw new ge(e,"Function",t)}),xa=Ne((t,e)=>{if(t!==void 0)throw new ge(e,"undefined",t)});function Ea(t,e,r){if(!ii(r,t))throw new ge(e,`('${si(r,"|")}')`,t)}const Sa=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function di(t,e){if(typeof t>"u"||!oi(Sa,t))throw new xt(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Ra(t){if(typeof t=="string")return di(t,"hints"),t;if(Lr(t)){const e=t.length;let r="";if(e===0)return r;for(let n=0;n<e;n++){const i=t[n];di(i,"hints"),r+=i,n!==e-1&&(r+=", ")}return r}throw new xt("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}var Ct={isInt32:ta,isUint32:ra,parseFileMode:sa,validateArray:Jt,validateStringArray:da,validateBooleanArray:ha,validateAbortSignalArray:pa,validateBoolean:fi,validateBuffer:ba,validateDictionary:ca,validateEncoding:ga,validateFunction:wa,validateInt32:aa,validateInteger:oa,validateNumber:la,validateObject:fa,validateOneOf:ua,validatePlainFunction:ma,validatePort:ya,validateSignalName:_a,validateString:Br,validateUint32:ui,validateUndefined:xa,validateUnion:Ea,validateAbortSignal:ci,validateLinkHeaderValue:Ra},kr={exports:{}},hi={exports:{}},he=hi.exports={},ke,Ce;function Cr(){throw new Error("setTimeout has not been defined")}function Or(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?ke=setTimeout:ke=Cr}catch{ke=Cr}try{typeof clearTimeout=="function"?Ce=clearTimeout:Ce=Or}catch{Ce=Or}})();function pi(t){if(ke===setTimeout)return setTimeout(t,0);if((ke===Cr||!ke)&&setTimeout)return ke=setTimeout,setTimeout(t,0);try{return ke(t,0)}catch{try{return ke.call(null,t,0)}catch{return ke.call(this,t,0)}}}function Ia(t){if(Ce===clearTimeout)return clearTimeout(t);if((Ce===Or||!Ce)&&clearTimeout)return Ce=clearTimeout,clearTimeout(t);try{return Ce(t)}catch{try{return Ce.call(null,t)}catch{return Ce.call(this,t)}}}var Ge=[],Et=!1,ot,er=-1;function Aa(){!Et||!ot||(Et=!1,ot.length?Ge=ot.concat(Ge):er=-1,Ge.length&&_i())}function _i(){if(!Et){var t=pi(Aa);Et=!0;for(var e=Ge.length;e;){for(ot=Ge,Ge=[];++er<e;)ot&&ot[er].run();er=-1,e=Ge.length}ot=null,Et=!1,Ia(t)}}he.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Ge.push(new bi(t,e)),Ge.length===1&&!Et&&pi(_i)};function bi(t,e){this.fun=t,this.array=e}bi.prototype.run=function(){this.fun.apply(null,this.array)},he.title="browser",he.browser=!0,he.env={},he.argv=[],he.version="",he.versions={};function qe(){}he.on=qe,he.addListener=qe,he.once=qe,he.off=qe,he.removeListener=qe,he.removeAllListeners=qe,he.emit=qe,he.prependListener=qe,he.prependOnceListener=qe,he.listeners=function(t){return[]},he.binding=function(t){throw new Error("process.binding is not supported")},he.cwd=function(){return"/"},he.chdir=function(t){throw new Error("process.chdir is not supported")},he.umask=function(){return 0};var at=hi.exports;const{SymbolAsyncIterator:gi,SymbolIterator:yi,SymbolFor:lt}=ce,wi=lt("nodejs.stream.destroyed"),mi=lt("nodejs.stream.errored"),Mr=lt("nodejs.stream.readable"),Dr=lt("nodejs.stream.writable"),xi=lt("nodejs.stream.disturbed"),Ta=lt("nodejs.webstream.isClosedPromise"),va=lt("nodejs.webstream.controllerErrorFunction");function tr(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function rr(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function Na(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function Oe(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function Ei(t){return!!(t&&!Oe(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function Si(t){return!!(t&&!Oe(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function Ri(t){return!!(t&&!Oe(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function Pa(t){return Ei(t)||Si(t)||Ri(t)}function $a(t,e){return t==null?!1:e===!0?typeof t[gi]=="function":e===!1?typeof t[yi]=="function":typeof t[gi]=="function"||typeof t[yi]=="function"}function nr(t){if(!Oe(t))return null;const e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[wi]||n!=null&&n.destroyed)}function Ii(t){if(!rr(t))return null;if(t.writableEnded===!0)return!0;const e=t._writableState;return e!=null&&e.errored?!1:typeof(e==null?void 0:e.ended)!="boolean"?null:e.ended}function La(t,e){if(!rr(t))return null;if(t.writableFinished===!0)return!0;const r=t._writableState;return r!=null&&r.errored?!1:typeof(r==null?void 0:r.finished)!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function ja(t){if(!tr(t))return null;if(t.readableEnded===!0)return!0;const e=t._readableState;return!e||e.errored?!1:typeof(e==null?void 0:e.ended)!="boolean"?null:e.ended}function Ai(t,e){if(!tr(t))return null;const r=t._readableState;return r!=null&&r.errored?!1:typeof(r==null?void 0:r.endEmitted)!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function Ti(t){return t&&t[Mr]!=null?t[Mr]:typeof(t==null?void 0:t.readable)!="boolean"?null:nr(t)?!1:tr(t)&&t.readable&&!Ai(t)}function vi(t){return t&&t[Dr]!=null?t[Dr]:typeof(t==null?void 0:t.writable)!="boolean"?null:nr(t)?!1:rr(t)&&t.writable&&!Ii(t)}function Ba(t,e){return Oe(t)?nr(t)?!0:!((e==null?void 0:e.readable)!==!1&&Ti(t)||(e==null?void 0:e.writable)!==!1&&vi(t)):null}function Fa(t){var e,r;return Oe(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function ka(t){var e,r;return Oe(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function Ca(t){if(!Oe(t))return null;if(typeof t.closed=="boolean")return t.closed;const e=t._writableState,r=t._readableState;return typeof(e==null?void 0:e.closed)=="boolean"||typeof(r==null?void 0:r.closed)=="boolean"?(e==null?void 0:e.closed)||(r==null?void 0:r.closed):typeof t._closed=="boolean"&&Ni(t)?t._closed:null}function Ni(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function Pi(t){return typeof t._sent100=="boolean"&&Ni(t)}function Oa(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function Ma(t){if(!Oe(t))return null;const e=t._writableState,r=t._readableState,n=e||r;return!n&&Pi(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function Da(t){var e;return!!(t&&((e=t[xi])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function Ua(t){var e,r,n,i,a,l,u,p,_,g;return!!(t&&((e=(r=(n=(i=(a=(l=t[mi])!==null&&l!==void 0?l:t.readableErrored)!==null&&a!==void 0?a:t.writableErrored)!==null&&i!==void 0?i:(u=t._readableState)===null||u===void 0?void 0:u.errorEmitted)!==null&&n!==void 0?n:(p=t._writableState)===null||p===void 0?void 0:p.errorEmitted)!==null&&r!==void 0?r:(_=t._readableState)===null||_===void 0?void 0:_.errored)!==null&&e!==void 0?e:!((g=t._writableState)===null||g===void 0)&&g.errored))}var ze={isDestroyed:nr,kIsDestroyed:wi,isDisturbed:Da,kIsDisturbed:xi,isErrored:Ua,kIsErrored:mi,isReadable:Ti,kIsReadable:Mr,kIsClosedPromise:Ta,kControllerErrorFunction:va,kIsWritable:Dr,isClosed:Ca,isDuplexNodeStream:Na,isFinished:Ba,isIterable:$a,isReadableNodeStream:tr,isReadableStream:Ei,isReadableEnded:ja,isReadableFinished:Ai,isReadableErrored:ka,isNodeStream:Oe,isWebStream:Pa,isWritable:vi,isWritableNodeStream:rr,isWritableStream:Si,isWritableEnded:Ii,isWritableFinished:La,isWritableErrored:Fa,isServerRequest:Oa,isServerResponse:Pi,willEmitClose:Ma,isTransformStream:Ri};const et=at,{AbortError:$i,codes:Wa}=Se,{ERR_INVALID_ARG_TYPE:Ga,ERR_STREAM_PREMATURE_CLOSE:Li}=Wa,{kEmptyObject:Ur,once:Wr}=xe,{validateAbortSignal:qa,validateFunction:za,validateObject:Ha,validateBoolean:Qa}=Ct,{Promise:Va,PromisePrototypeThen:Ka,SymbolDispose:ji}=ce,{isClosed:Ya,isReadable:Bi,isReadableNodeStream:Gr,isReadableStream:Xa,isReadableFinished:Fi,isReadableErrored:ki,isWritable:Ci,isWritableNodeStream:Oi,isWritableStream:Za,isWritableFinished:Mi,isWritableErrored:Di,isNodeStream:Ja,willEmitClose:el,kIsClosedPromise:tl}=ze;let St;function rl(t){return t.setHeader&&typeof t.abort=="function"}const qr=()=>{};function Ui(t,e,r){var n,i;if(arguments.length===2?(r=e,e=Ur):e==null?e=Ur:Ha(e,"options"),za(r,"callback"),qa(e.signal,"options.signal"),r=Wr(r),Xa(t)||Za(t))return nl(t,e,r);if(!Ja(t))throw new Ga("stream",["ReadableStream","WritableStream","Stream"],t);const a=(n=e.readable)!==null&&n!==void 0?n:Gr(t),l=(i=e.writable)!==null&&i!==void 0?i:Oi(t),u=t._writableState,p=t._readableState,_=()=>{t.writable||m()};let g=el(t)&&Gr(t)===a&&Oi(t)===l,S=Mi(t,!1);const m=()=>{S=!0,t.destroyed&&(g=!1),!(g&&(!t.readable||a))&&(!a||w)&&r.call(t)};let w=Fi(t,!1);const I=()=>{w=!0,t.destroyed&&(g=!1),!(g&&(!t.writable||l))&&(!l||S)&&r.call(t)},R=U=>{r.call(t,U)};let N=Ya(t);const k=()=>{N=!0;const U=Di(t)||ki(t);if(U&&typeof U!="boolean")return r.call(t,U);if(a&&!w&&Gr(t,!0)&&!Fi(t,!1))return r.call(t,new Li);if(l&&!S&&!Mi(t,!1))return r.call(t,new Li);r.call(t)},O=()=>{N=!0;const U=Di(t)||ki(t);if(U&&typeof U!="boolean")return r.call(t,U);r.call(t)},T=()=>{t.req.on("finish",m)};rl(t)?(t.on("complete",m),g||t.on("abort",k),t.req?T():t.on("request",T)):l&&!u&&(t.on("end",_),t.on("close",_)),!g&&typeof t.aborted=="boolean"&&t.on("aborted",k),t.on("end",I),t.on("finish",m),e.error!==!1&&t.on("error",R),t.on("close",k),N?et.nextTick(k):u!=null&&u.errorEmitted||p!=null&&p.errorEmitted?g||et.nextTick(O):(!a&&(!g||Bi(t))&&(S||Ci(t)===!1)||!l&&(!g||Ci(t))&&(w||Bi(t)===!1)||p&&t.req&&t.aborted)&&et.nextTick(O);const q=()=>{r=qr,t.removeListener("aborted",k),t.removeListener("complete",m),t.removeListener("abort",k),t.removeListener("request",T),t.req&&t.req.removeListener("finish",m),t.removeListener("end",_),t.removeListener("close",_),t.removeListener("finish",m),t.removeListener("end",I),t.removeListener("error",R),t.removeListener("close",k)};if(e.signal&&!N){const U=()=>{const oe=r;q(),oe.call(t,new $i(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)et.nextTick(U);else{St=St||xe.addAbortListener;const oe=St(e.signal,U),Ee=r;r=Wr((...ee)=>{oe[ji](),Ee.apply(t,ee)})}}return q}function nl(t,e,r){let n=!1,i=qr;if(e.signal)if(i=()=>{n=!0,r.call(t,new $i(void 0,{cause:e.signal.reason}))},e.signal.aborted)et.nextTick(i);else{St=St||xe.addAbortListener;const l=St(e.signal,i),u=r;r=Wr((...p)=>{l[ji](),u.apply(t,p)})}const a=(...l)=>{n||et.nextTick(()=>r.apply(t,l))};return Ka(t[tl].promise,a,a),qr}function il(t,e){var r;let n=!1;return e===null&&(e=Ur),(r=e)!==null&&r!==void 0&&r.cleanup&&(Qa(e.cleanup,"cleanup"),n=e.cleanup),new Va((i,a)=>{const l=Ui(t,e,u=>{n&&l(),u?a(u):i()})})}kr.exports=Ui,kr.exports.finished=il;var tt=kr.exports;const Me=at,{aggregateTwoErrors:sl,codes:{ERR_MULTIPLE_CALLBACK:ol},AbortError:al}=Se,{Symbol:Wi}=ce,{kIsDestroyed:ll,isDestroyed:ul,isFinished:fl,isServerRequest:cl}=ze,Gi=Wi("kDestroy"),zr=Wi("kConstruct");function qi(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function dl(t,e){const r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(qi(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?zi(this,t,e):this.once(Gi,function(a){zi(this,sl(a,t),e)}),this)}function zi(t,e,r){let n=!1;function i(a){if(n)return;n=!0;const l=t._readableState,u=t._writableState;qi(a,u,l),u&&(u.closed=!0),l&&(l.closed=!0),typeof r=="function"&&r(a),a?Me.nextTick(hl,t,a):Me.nextTick(Hi,t)}try{t._destroy(e||null,i)}catch(a){i(a)}}function hl(t,e){Hr(t,e),Hi(t)}function Hi(t){const e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function Hr(t,e){const r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function pl(){const t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function Qr(t,e,r){const n=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),n&&!n.errored&&(n.errored=e),r?Me.nextTick(Hr,t,e):Hr(t,e))}function _l(t,e){if(typeof t._construct!="function")return;const r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(zr,e),!(t.listenerCount(zr)>1)&&Me.nextTick(bl,t)}function bl(t){let e=!1;function r(n){if(e){Qr(t,n??new ol);return}e=!0;const i=t._readableState,a=t._writableState,l=a||i;i&&(i.constructed=!0),a&&(a.constructed=!0),l.destroyed?t.emit(Gi,n):n?Qr(t,n,!0):Me.nextTick(gl,t)}try{t._construct(n=>{Me.nextTick(r,n)})}catch(n){Me.nextTick(r,n)}}function gl(t){t.emit(zr)}function Qi(t){return(t==null?void 0:t.setHeader)&&typeof t.abort=="function"}function Vi(t){t.emit("close")}function yl(t,e){t.emit("error",e),Me.nextTick(Vi,t)}function wl(t,e){!t||ul(t)||(!e&&!fl(t)&&(e=new al),cl(t)?(t.socket=null,t.destroy(e)):Qi(t)?t.abort():Qi(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?Me.nextTick(yl,t,e):Me.nextTick(Vi,t),t.destroyed||(t[ll]=!0))}var Rt={construct:_l,destroyer:wl,destroy:dl,undestroy:pl,errorOrDestroy:Qr};const{ArrayIsArray:ml,ObjectSetPrototypeOf:Ki}=ce,{EventEmitter:ir}=Yt;function sr(t){ir.call(this,t)}Ki(sr.prototype,ir.prototype),Ki(sr,ir),sr.prototype.pipe=function(t,e){const r=this;function n(g){t.writable&&t.write(g)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",l),r.on("close",u));let a=!1;function l(){a||(a=!0,t.end())}function u(){a||(a=!0,typeof t.destroy=="function"&&t.destroy())}function p(g){_(),ir.listenerCount(this,"error")===0&&this.emit("error",g)}Vr(r,"error",p),Vr(t,"error",p);function _(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",l),r.removeListener("close",u),r.removeListener("error",p),t.removeListener("error",p),r.removeListener("end",_),r.removeListener("close",_),t.removeListener("close",_)}return r.on("end",_),r.on("close",_),t.on("close",_),t.emit("pipe",r),t};function Vr(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):ml(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}var Kr={Stream:sr,prependListener:Vr},Yi={exports:{}};(function(t){const{SymbolDispose:e}=ce,{AbortError:r,codes:n}=Se,{isNodeStream:i,isWebStream:a,kControllerErrorFunction:l}=ze,u=tt,{ERR_INVALID_ARG_TYPE:p}=n;let _;const g=(S,m)=>{if(typeof S!="object"||!("aborted"in S))throw new p(m,"AbortSignal",S)};t.exports.addAbortSignal=function(m,w){if(g(m,"signal"),!i(w)&&!a(w))throw new p("stream",["ReadableStream","WritableStream","Stream"],w);return t.exports.addAbortSignalNoValidate(m,w)},t.exports.addAbortSignalNoValidate=function(S,m){if(typeof S!="object"||!("aborted"in S))return m;const w=i(m)?()=>{m.destroy(new r(void 0,{cause:S.reason}))}:()=>{m[l](new r(void 0,{cause:S.reason}))};if(S.aborted)w();else{_=_||xe.addAbortListener;const I=_(S,w);u(m,I[e])}return m}})(Yi);var or=Yi.exports;const{StringPrototypeSlice:Xi,SymbolIterator:xl,TypedArrayPrototypeSet:ar,Uint8Array:El}=ce,{Buffer:Yr}=je,{inspect:Sl}=xe;var Rl=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){const r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;const e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return Yr.alloc(0);const r=Yr.allocUnsafe(e>>>0);let n=this.head,i=0;for(;n;)ar(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(e,r){const n=this.head.data;if(e<n.length){const i=n.slice(0,e);return this.head.data=n.slice(e),i}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[xl](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,i=0;do{const a=n.data;if(e>a.length)r+=a,e-=a.length;else{e===a.length?(r+=a,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=Xi(a,0,e),this.head=n,n.data=Xi(a,e));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(e){const r=Yr.allocUnsafe(e),n=e;let i=this.head,a=0;do{const l=i.data;if(e>l.length)ar(r,l,n-e),e-=l.length;else{e===l.length?(ar(r,l,n-e),++a,i.next?this.head=i.next:this.head=this.tail=null):(ar(r,new El(l.buffer,l.byteOffset,e),n-e),this.head=i,i.data=l.slice(e));break}++a}while((i=i.next)!==null);return this.length-=a,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return Sl(this,{...r,depth:0,customInspect:!1})}};const{MathFloor:Il,NumberIsInteger:Al}=ce,{validateInteger:Tl}=Ct,{ERR_INVALID_ARG_VALUE:vl}=Se.codes;let Zi=16*1024,Ji=16;function Nl(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function es(t){return t?Ji:Zi}function Pl(t,e){Tl(e,"value",0),t?Ji=e:Zi=e}function $l(t,e,r,n){const i=Nl(e,n,r);if(i!=null){if(!Al(i)||i<0){const a=n?`options.${r}`:"options.highWaterMark";throw new vl(a,i)}return Il(i)}return es(t.objectMode)}var lr={getHighWaterMark:$l,getDefaultHighWaterMark:es,setDefaultHighWaterMark:Pl},ts={},Xr={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=je,n=r.Buffer;function i(l,u){for(var p in l)u[p]=l[p]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=a);function a(l,u,p){return n(l,u,p)}a.prototype=Object.create(n.prototype),i(n,a),a.from=function(l,u,p){if(typeof l=="number")throw new TypeError("Argument must not be a number");return n(l,u,p)},a.alloc=function(l,u,p){if(typeof l!="number")throw new TypeError("Argument must be a number");var _=n(l);return u!==void 0?typeof p=="string"?_.fill(u,p):_.fill(u):_.fill(0),_},a.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return n(l)},a.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(l)}})(Xr,Xr.exports);var Ll=Xr.exports,Zr=Ll.Buffer,rs=Zr.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function jl(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function Bl(t){var e=jl(t);if(typeof e!="string"&&(Zr.isEncoding===rs||!rs(t)))throw new Error("Unknown encoding: "+t);return e||t}ts.StringDecoder=Ot;function Ot(t){this.encoding=Bl(t);var e;switch(this.encoding){case"utf16le":this.text=Dl,this.end=Ul,e=4;break;case"utf8":this.fillLast=Cl,e=4;break;case"base64":this.text=Wl,this.end=Gl,e=3;break;default:this.write=ql,this.end=zl;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Zr.allocUnsafe(e)}Ot.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},Ot.prototype.end=Ml,Ot.prototype.text=Ol,Ot.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function Jr(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function Fl(t,e,r){var n=e.length-1;if(n<r)return 0;var i=Jr(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=Jr(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=Jr(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function kl(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"�"}}function Cl(t){var e=this.lastTotal-this.lastNeed,r=kl(this,t);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function Ol(t,e){var r=Fl(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function Ml(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e}function Dl(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function Ul(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function Wl(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function Gl(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function ql(t){return t.toString(this.encoding)}function zl(t){return t&&t.length?this.write(t):""}const ns=at,{PromisePrototypeThen:Hl,SymbolAsyncIterator:is,SymbolIterator:ss}=ce,{Buffer:Ql}=je,{ERR_INVALID_ARG_TYPE:Vl,ERR_STREAM_NULL_VALUES:Kl}=Se.codes;function Yl(t,e,r){let n;if(typeof e=="string"||e instanceof Ql)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let i;if(e&&e[is])i=!0,n=e[is]();else if(e&&e[ss])i=!1,n=e[ss]();else throw new Vl("iterable",["Iterable"],e);const a=new t({objectMode:!0,highWaterMark:1,...r});let l=!1;a._read=function(){l||(l=!0,p())},a._destroy=function(_,g){Hl(u(_),()=>ns.nextTick(g,_),S=>ns.nextTick(g,S||_))};async function u(_){const g=_!=null,S=typeof n.throw=="function";if(g&&S){const{value:m,done:w}=await n.throw(_);if(await m,w)return}if(typeof n.return=="function"){const{value:m}=await n.return();await m}}async function p(){for(;;){try{const{value:_,done:g}=i?await n.next():n.next();if(g)a.push(null);else{const S=_&&typeof _.then=="function"?await _:_;if(S===null)throw l=!1,new Kl;if(a.push(S))continue;l=!1}}catch(_){a.destroy(_)}break}}return a}var os=Yl,en,as;function ur(){if(as)return en;as=1;const t=at,{ArrayPrototypeIndexOf:e,NumberIsInteger:r,NumberIsNaN:n,NumberParseInt:i,ObjectDefineProperties:a,ObjectKeys:l,ObjectSetPrototypeOf:u,Promise:p,SafeSet:_,SymbolAsyncDispose:g,SymbolAsyncIterator:S,Symbol:m}=ce;en=C,C.ReadableState=Re;const{EventEmitter:w}=Yt,{Stream:I,prependListener:R}=Kr,{Buffer:N}=je,{addAbortSignal:k}=or,O=tt;let T=xe.debuglog("stream",c=>{T=c});const q=Rl,U=Rt,{getHighWaterMark:oe,getDefaultHighWaterMark:Ee}=lr,{aggregateTwoErrors:ee,codes:{ERR_INVALID_ARG_TYPE:ae,ERR_METHOD_NOT_IMPLEMENTED:ye,ERR_OUT_OF_RANGE:we,ERR_STREAM_PUSH_AFTER_EOF:H,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:P},AbortError:K}=Se,{validateObject:G}=Ct,z=m("kPaused"),{StringDecoder:le}=ts,ue=os;u(C.prototype,I.prototype),u(C,I);const re=()=>{},{errorOrDestroy:fe}=U,D=1,ne=2,M=4,de=8,Ae=16,Ve=32,Ke=64,Te=128,Ye=256,Tt=512,ht=1024,Xe=2048,y=4096,x=8192,v=16384,F=32768,j=65536,Z=1<<17,te=1<<18;function Y(c){return{enumerable:!1,get(){return(this.state&c)!==0},set(h){h?this.state|=c:this.state&=~c}}}a(Re.prototype,{objectMode:Y(D),ended:Y(ne),endEmitted:Y(M),reading:Y(de),constructed:Y(Ae),sync:Y(Ve),needReadable:Y(Ke),emittedReadable:Y(Te),readableListening:Y(Ye),resumeScheduled:Y(Tt),errorEmitted:Y(ht),emitClose:Y(Xe),autoDestroy:Y(y),destroyed:Y(x),closed:Y(v),closeEmitted:Y(F),multiAwaitDrain:Y(j),readingMore:Y(Z),dataEmitted:Y(te)});function Re(c,h,$){typeof $!="boolean"&&($=h instanceof He()),this.state=Xe|y|Ae|Ve,c&&c.objectMode&&(this.state|=D),$&&c&&c.readableObjectMode&&(this.state|=D),this.highWaterMark=c?oe(this,c,"readableHighWaterMark",$):Ee(!1),this.buffer=new q,this.length=0,this.pipes=[],this.flowing=null,this[z]=null,c&&c.emitClose===!1&&(this.state&=~Xe),c&&c.autoDestroy===!1&&(this.state&=~y),this.errored=null,this.defaultEncoding=c&&c.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,c&&c.encoding&&(this.decoder=new le(c.encoding),this.encoding=c.encoding)}function C(c){if(!(this instanceof C))return new C(c);const h=this instanceof He();this._readableState=new Re(c,this,h),c&&(typeof c.read=="function"&&(this._read=c.read),typeof c.destroy=="function"&&(this._destroy=c.destroy),typeof c.construct=="function"&&(this._construct=c.construct),c.signal&&!h&&k(c.signal,this)),I.call(this,c),U.construct(this,()=>{this._readableState.needReadable&&b(this,this._readableState)})}C.prototype.destroy=U.destroy,C.prototype._undestroy=U.undestroy,C.prototype._destroy=function(c,h){h(c)},C.prototype[w.captureRejectionSymbol]=function(c){this.destroy(c)},C.prototype[g]=function(){let c;return this.destroyed||(c=this.readableEnded?null:new K,this.destroy(c)),new p((h,$)=>O(this,L=>L&&L!==c?$(L):h(null)))},C.prototype.push=function(c,h){return $e(this,c,h,!1)},C.prototype.unshift=function(c,h){return $e(this,c,h,!0)};function $e(c,h,$,L){T("readableAddChunk",h);const B=c._readableState;let me;if(B.state&D||(typeof h=="string"?($=$||B.defaultEncoding,B.encoding!==$&&(L&&B.encoding?h=N.from(h,$).toString(B.encoding):(h=N.from(h,$),$=""))):h instanceof N?$="":I._isUint8Array(h)?(h=I._uint8ArrayToBuffer(h),$=""):h!=null&&(me=new ae("chunk",["string","Buffer","Uint8Array"],h))),me)fe(c,me);else if(h===null)B.state&=~de,s(c,B);else if(B.state&D||h&&h.length>0)if(L)if(B.state&M)fe(c,new P);else{if(B.destroyed||B.errored)return!1;Gt(c,B,h,!0)}else if(B.ended)fe(c,new H);else{if(B.destroyed||B.errored)return!1;B.state&=~de,B.decoder&&!$?(h=B.decoder.write(h),B.objectMode||h.length!==0?Gt(c,B,h,!1):b(c,B)):Gt(c,B,h,!1)}else L||(B.state&=~de,b(c,B));return!B.ended&&(B.length<B.highWaterMark||B.length===0)}function Gt(c,h,$,L){h.flowing&&h.length===0&&!h.sync&&c.listenerCount("data")>0?(h.state&j?h.awaitDrainWriters.clear():h.awaitDrainWriters=null,h.dataEmitted=!0,c.emit("data",$)):(h.length+=h.objectMode?1:$.length,L?h.buffer.unshift($):h.buffer.push($),h.state&Ke&&o(c)),b(c,h)}C.prototype.isPaused=function(){const c=this._readableState;return c[z]===!0||c.flowing===!1},C.prototype.setEncoding=function(c){const h=new le(c);this._readableState.decoder=h,this._readableState.encoding=this._readableState.decoder.encoding;const $=this._readableState.buffer;let L="";for(const B of $)L+=h.write(B);return $.clear(),L!==""&&$.push(L),this._readableState.length=L.length,this};const We=1073741824;function Rn(c){if(c>We)throw new we("size","<= 1GiB",c);return c--,c|=c>>>1,c|=c>>>2,c|=c>>>4,c|=c>>>8,c|=c>>>16,c++,c}function f(c,h){return c<=0||h.length===0&&h.ended?0:h.state&D?1:n(c)?h.flowing&&h.length?h.buffer.first().length:h.length:c<=h.length?c:h.ended?h.length:0}C.prototype.read=function(c){T("read",c),c===void 0?c=NaN:r(c)||(c=i(c,10));const h=this._readableState,$=c;if(c>h.highWaterMark&&(h.highWaterMark=Rn(c)),c!==0&&(h.state&=~Te),c===0&&h.needReadable&&((h.highWaterMark!==0?h.length>=h.highWaterMark:h.length>0)||h.ended))return T("read: emitReadable",h.length,h.ended),h.length===0&&h.ended?In(this):o(this),null;if(c=f(c,h),c===0&&h.ended)return h.length===0&&In(this),null;let L=(h.state&Ke)!==0;if(T("need readable",L),(h.length===0||h.length-c<h.highWaterMark)&&(L=!0,T("length less than watermark",L)),h.ended||h.reading||h.destroyed||h.errored||!h.constructed)L=!1,T("reading, ended or constructing",L);else if(L){T("do read"),h.state|=de|Ve,h.length===0&&(h.state|=Ke);try{this._read(h.highWaterMark)}catch(me){fe(this,me)}h.state&=~Ve,h.reading||(c=f($,h))}let B;return c>0?B=Gs(c,h):B=null,B===null?(h.needReadable=h.length<=h.highWaterMark,c=0):(h.length-=c,h.multiAwaitDrain?h.awaitDrainWriters.clear():h.awaitDrainWriters=null),h.length===0&&(h.ended||(h.needReadable=!0),$!==c&&h.ended&&In(this)),B!==null&&!h.errorEmitted&&!h.closeEmitted&&(h.dataEmitted=!0,this.emit("data",B)),B};function s(c,h){if(T("onEofChunk"),!h.ended){if(h.decoder){const $=h.decoder.end();$&&$.length&&(h.buffer.push($),h.length+=h.objectMode?1:$.length)}h.ended=!0,h.sync?o(c):(h.needReadable=!1,h.emittedReadable=!0,d(c))}}function o(c){const h=c._readableState;T("emitReadable",h.needReadable,h.emittedReadable),h.needReadable=!1,h.emittedReadable||(T("emitReadable",h.flowing),h.emittedReadable=!0,t.nextTick(d,c))}function d(c){const h=c._readableState;T("emitReadable_",h.destroyed,h.length,h.ended),!h.destroyed&&!h.errored&&(h.length||h.ended)&&(c.emit("readable"),h.emittedReadable=!1),h.needReadable=!h.flowing&&!h.ended&&h.length<=h.highWaterMark,V(c)}function b(c,h){!h.readingMore&&h.constructed&&(h.readingMore=!0,t.nextTick(E,c,h))}function E(c,h){for(;!h.reading&&!h.ended&&(h.length<h.highWaterMark||h.flowing&&h.length===0);){const $=h.length;if(T("maybeReadMore read 0"),c.read(0),$===h.length)break}h.readingMore=!1}C.prototype._read=function(c){throw new ye("_read()")},C.prototype.pipe=function(c,h){const $=this,L=this._readableState;L.pipes.length===1&&(L.multiAwaitDrain||(L.multiAwaitDrain=!0,L.awaitDrainWriters=new _(L.awaitDrainWriters?[L.awaitDrainWriters]:[]))),L.pipes.push(c),T("pipe count=%d opts=%j",L.pipes.length,h);const me=(!h||h.end!==!1)&&c!==t.stdout&&c!==t.stderr?zs:qt;L.endEmitted?t.nextTick(me):$.once("end",me),c.on("unpipe",Le);function Le(_t,Ze){T("onunpipe"),_t===$&&Ze&&Ze.hasUnpiped===!1&&(Ze.hasUnpiped=!0,bf())}function zs(){T("onend"),c.end()}let pt,Hs=!1;function bf(){T("cleanup"),c.removeListener("close",vn),c.removeListener("finish",Nn),pt&&c.removeListener("drain",pt),c.removeListener("error",Tn),c.removeListener("unpipe",Le),$.removeListener("end",zs),$.removeListener("end",qt),$.removeListener("data",Vs),Hs=!0,pt&&L.awaitDrainWriters&&(!c._writableState||c._writableState.needDrain)&&pt()}function Qs(){Hs||(L.pipes.length===1&&L.pipes[0]===c?(T("false write response, pause",0),L.awaitDrainWriters=c,L.multiAwaitDrain=!1):L.pipes.length>1&&L.pipes.includes(c)&&(T("false write response, pause",L.awaitDrainWriters.size),L.awaitDrainWriters.add(c)),$.pause()),pt||(pt=A($,c),c.on("drain",pt))}$.on("data",Vs);function Vs(_t){T("ondata");const Ze=c.write(_t);T("dest.write",Ze),Ze===!1&&Qs()}function Tn(_t){if(T("onerror",_t),qt(),c.removeListener("error",Tn),c.listenerCount("error")===0){const Ze=c._writableState||c._readableState;Ze&&!Ze.errorEmitted?fe(c,_t):c.emit("error",_t)}}R(c,"error",Tn);function vn(){c.removeListener("finish",Nn),qt()}c.once("close",vn);function Nn(){T("onfinish"),c.removeListener("close",vn),qt()}c.once("finish",Nn);function qt(){T("unpipe"),$.unpipe(c)}return c.emit("pipe",$),c.writableNeedDrain===!0?Qs():L.flowing||(T("pipe resume"),$.resume()),c};function A(c,h){return function(){const L=c._readableState;L.awaitDrainWriters===h?(T("pipeOnDrain",1),L.awaitDrainWriters=null):L.multiAwaitDrain&&(T("pipeOnDrain",L.awaitDrainWriters.size),L.awaitDrainWriters.delete(h)),(!L.awaitDrainWriters||L.awaitDrainWriters.size===0)&&c.listenerCount("data")&&c.resume()}}C.prototype.unpipe=function(c){const h=this._readableState,$={hasUnpiped:!1};if(h.pipes.length===0)return this;if(!c){const B=h.pipes;h.pipes=[],this.pause();for(let me=0;me<B.length;me++)B[me].emit("unpipe",this,{hasUnpiped:!1});return this}const L=e(h.pipes,c);return L===-1?this:(h.pipes.splice(L,1),h.pipes.length===0&&this.pause(),c.emit("unpipe",this,$),this)},C.prototype.on=function(c,h){const $=I.prototype.on.call(this,c,h),L=this._readableState;return c==="data"?(L.readableListening=this.listenerCount("readable")>0,L.flowing!==!1&&this.resume()):c==="readable"&&!L.endEmitted&&!L.readableListening&&(L.readableListening=L.needReadable=!0,L.flowing=!1,L.emittedReadable=!1,T("on readable",L.length,L.reading),L.length?o(this):L.reading||t.nextTick(ie,this)),$},C.prototype.addListener=C.prototype.on,C.prototype.removeListener=function(c,h){const $=I.prototype.removeListener.call(this,c,h);return c==="readable"&&t.nextTick(W,this),$},C.prototype.off=C.prototype.removeListener,C.prototype.removeAllListeners=function(c){const h=I.prototype.removeAllListeners.apply(this,arguments);return(c==="readable"||c===void 0)&&t.nextTick(W,this),h};function W(c){const h=c._readableState;h.readableListening=c.listenerCount("readable")>0,h.resumeScheduled&&h[z]===!1?h.flowing=!0:c.listenerCount("data")>0?c.resume():h.readableListening||(h.flowing=null)}function ie(c){T("readable nexttick read 0"),c.read(0)}C.prototype.resume=function(){const c=this._readableState;return c.flowing||(T("resume"),c.flowing=!c.readableListening,J(this,c)),c[z]=!1,this};function J(c,h){h.resumeScheduled||(h.resumeScheduled=!0,t.nextTick(se,c,h))}function se(c,h){T("resume",h.reading),h.reading||c.read(0),h.resumeScheduled=!1,c.emit("resume"),V(c),h.flowing&&!h.reading&&c.read(0)}C.prototype.pause=function(){return T("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(T("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[z]=!0,this};function V(c){const h=c._readableState;for(T("flow",h.flowing);h.flowing&&c.read()!==null;);}C.prototype.wrap=function(c){let h=!1;c.on("data",L=>{!this.push(L)&&c.pause&&(h=!0,c.pause())}),c.on("end",()=>{this.push(null)}),c.on("error",L=>{fe(this,L)}),c.on("close",()=>{this.destroy()}),c.on("destroy",()=>{this.destroy()}),this._read=()=>{h&&c.resume&&(h=!1,c.resume())};const $=l(c);for(let L=1;L<$.length;L++){const B=$[L];this[B]===void 0&&typeof c[B]=="function"&&(this[B]=c[B].bind(c))}return this},C.prototype[S]=function(){return Ws(this)},C.prototype.iterator=function(c){return c!==void 0&&G(c,"options"),Ws(this,c)};function Ws(c,h){typeof c.read!="function"&&(c=C.wrap(c,{objectMode:!0}));const $=hf(c,h);return $.stream=c,$}async function*hf(c,h){let $=re;function L(Le){this===c?($(),$=re):$=Le}c.on("readable",L);let B;const me=O(c,{writable:!1},Le=>{B=Le?ee(B,Le):null,$(),$=re});try{for(;;){const Le=c.destroyed?null:c.read();if(Le!==null)yield Le;else{if(B)throw B;if(B===null)return;await new p(L)}}}catch(Le){throw B=ee(B,Le),B}finally{(B||(h==null?void 0:h.destroyOnReturn)!==!1)&&(B===void 0||c._readableState.autoDestroy)?U.destroyer(c,null):(c.off("readable",L),me())}}a(C.prototype,{readable:{__proto__:null,get(){const c=this._readableState;return!!c&&c.readable!==!1&&!c.destroyed&&!c.errorEmitted&&!c.endEmitted},set(c){this._readableState&&(this._readableState.readable=!!c)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(c){this._readableState&&(this._readableState.flowing=c)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(c){this._readableState&&(this._readableState.destroyed=c)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),a(Re.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[z]!==!1},set(c){this[z]=!!c}}}),C._fromList=Gs;function Gs(c,h){if(h.length===0)return null;let $;return h.objectMode?$=h.buffer.shift():!c||c>=h.length?(h.decoder?$=h.buffer.join(""):h.buffer.length===1?$=h.buffer.first():$=h.buffer.concat(h.length),h.buffer.clear()):$=h.buffer.consume(c,h.decoder),$}function In(c){const h=c._readableState;T("endReadable",h.endEmitted),h.endEmitted||(h.ended=!0,t.nextTick(pf,h,c))}function pf(c,h){if(T("endReadableNT",c.endEmitted,c.length),!c.errored&&!c.closeEmitted&&!c.endEmitted&&c.length===0){if(c.endEmitted=!0,h.emit("end"),h.writable&&h.allowHalfOpen===!1)t.nextTick(_f,h);else if(c.autoDestroy){const $=h._writableState;(!$||$.autoDestroy&&($.finished||$.writable===!1))&&h.destroy()}}}function _f(c){c.writable&&!c.writableEnded&&!c.destroyed&&c.end()}C.from=function(c,h){return ue(C,c,h)};let An;function qs(){return An===void 0&&(An={}),An}return C.fromWeb=function(c,h){return qs().newStreamReadableFromReadableStream(c,h)},C.toWeb=function(c,h){return qs().newReadableStreamFromStreamReadable(c,h)},C.wrap=function(c,h){var $,L;return new C({objectMode:($=(L=c.readableObjectMode)!==null&&L!==void 0?L:c.objectMode)!==null&&$!==void 0?$:!0,...h,destroy(B,me){U.destroyer(c,B),me(B)}}).wrap(c)},en}var tn,ls;function rn(){if(ls)return tn;ls=1;const t=at,{ArrayPrototypeSlice:e,Error:r,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:i,ObjectDefineProperties:a,ObjectSetPrototypeOf:l,StringPrototypeToLowerCase:u,Symbol:p,SymbolHasInstance:_}=ce;tn=G,G.WritableState=P;const{EventEmitter:g}=Yt,S=Kr.Stream,{Buffer:m}=je,w=Rt,{addAbortSignal:I}=or,{getHighWaterMark:R,getDefaultHighWaterMark:N}=lr,{ERR_INVALID_ARG_TYPE:k,ERR_METHOD_NOT_IMPLEMENTED:O,ERR_MULTIPLE_CALLBACK:T,ERR_STREAM_CANNOT_PIPE:q,ERR_STREAM_DESTROYED:U,ERR_STREAM_ALREADY_FINISHED:oe,ERR_STREAM_NULL_VALUES:Ee,ERR_STREAM_WRITE_AFTER_END:ee,ERR_UNKNOWN_ENCODING:ae}=Se.codes,{errorOrDestroy:ye}=w;l(G.prototype,S.prototype),l(G,S);function we(){}const H=p("kOnFinished");function P(y,x,v){typeof v!="boolean"&&(v=x instanceof He()),this.objectMode=!!(y&&y.objectMode),v&&(this.objectMode=this.objectMode||!!(y&&y.writableObjectMode)),this.highWaterMark=y?R(this,y,"writableHighWaterMark",v):N(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const F=!!(y&&y.decodeStrings===!1);this.decodeStrings=!F,this.defaultEncoding=y&&y.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=fe.bind(void 0,x),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,K(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!y||y.emitClose!==!1,this.autoDestroy=!y||y.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[H]=[]}function K(y){y.buffered=[],y.bufferedIndex=0,y.allBuffers=!0,y.allNoop=!0}P.prototype.getBuffer=function(){return e(this.buffered,this.bufferedIndex)},i(P.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function G(y){const x=this instanceof He();if(!x&&!n(G,this))return new G(y);this._writableState=new P(y,this,x),y&&(typeof y.write=="function"&&(this._write=y.write),typeof y.writev=="function"&&(this._writev=y.writev),typeof y.destroy=="function"&&(this._destroy=y.destroy),typeof y.final=="function"&&(this._final=y.final),typeof y.construct=="function"&&(this._construct=y.construct),y.signal&&I(y.signal,this)),S.call(this,y),w.construct(this,()=>{const v=this._writableState;v.writing||de(this,v),Te(this,v)})}i(G,_,{__proto__:null,value:function(y){return n(this,y)?!0:this!==G?!1:y&&y._writableState instanceof P}}),G.prototype.pipe=function(){ye(this,new q)};function z(y,x,v,F){const j=y._writableState;if(typeof v=="function")F=v,v=j.defaultEncoding;else{if(!v)v=j.defaultEncoding;else if(v!=="buffer"&&!m.isEncoding(v))throw new ae(v);typeof F!="function"&&(F=we)}if(x===null)throw new Ee;if(!j.objectMode)if(typeof x=="string")j.decodeStrings!==!1&&(x=m.from(x,v),v="buffer");else if(x instanceof m)v="buffer";else if(S._isUint8Array(x))x=S._uint8ArrayToBuffer(x),v="buffer";else throw new k("chunk",["string","Buffer","Uint8Array"],x);let Z;return j.ending?Z=new ee:j.destroyed&&(Z=new U("write")),Z?(t.nextTick(F,Z),ye(y,Z,!0),Z):(j.pendingcb++,le(y,j,x,v,F))}G.prototype.write=function(y,x,v){return z(this,y,x,v)===!0},G.prototype.cork=function(){this._writableState.corked++},G.prototype.uncork=function(){const y=this._writableState;y.corked&&(y.corked--,y.writing||de(this,y))},G.prototype.setDefaultEncoding=function(x){if(typeof x=="string"&&(x=u(x)),!m.isEncoding(x))throw new ae(x);return this._writableState.defaultEncoding=x,this};function le(y,x,v,F,j){const Z=x.objectMode?1:v.length;x.length+=Z;const te=x.length<x.highWaterMark;return te||(x.needDrain=!0),x.writing||x.corked||x.errored||!x.constructed?(x.buffered.push({chunk:v,encoding:F,callback:j}),x.allBuffers&&F!=="buffer"&&(x.allBuffers=!1),x.allNoop&&j!==we&&(x.allNoop=!1)):(x.writelen=Z,x.writecb=j,x.writing=!0,x.sync=!0,y._write(v,F,x.onwrite),x.sync=!1),te&&!x.errored&&!x.destroyed}function ue(y,x,v,F,j,Z,te){x.writelen=F,x.writecb=te,x.writing=!0,x.sync=!0,x.destroyed?x.onwrite(new U("write")):v?y._writev(j,x.onwrite):y._write(j,Z,x.onwrite),x.sync=!1}function re(y,x,v,F){--x.pendingcb,F(v),M(x),ye(y,v)}function fe(y,x){const v=y._writableState,F=v.sync,j=v.writecb;if(typeof j!="function"){ye(y,new T);return}v.writing=!1,v.writecb=null,v.length-=v.writelen,v.writelen=0,x?(x.stack,v.errored||(v.errored=x),y._readableState&&!y._readableState.errored&&(y._readableState.errored=x),F?t.nextTick(re,y,v,x,j):re(y,v,x,j)):(v.buffered.length>v.bufferedIndex&&de(y,v),F?v.afterWriteTickInfo!==null&&v.afterWriteTickInfo.cb===j?v.afterWriteTickInfo.count++:(v.afterWriteTickInfo={count:1,cb:j,stream:y,state:v},t.nextTick(D,v.afterWriteTickInfo)):ne(y,v,1,j))}function D({stream:y,state:x,count:v,cb:F}){return x.afterWriteTickInfo=null,ne(y,x,v,F)}function ne(y,x,v,F){for(!x.ending&&!y.destroyed&&x.length===0&&x.needDrain&&(x.needDrain=!1,y.emit("drain"));v-- >0;)x.pendingcb--,F();x.destroyed&&M(x),Te(y,x)}function M(y){if(y.writing)return;for(let j=y.bufferedIndex;j<y.buffered.length;++j){var x;const{chunk:Z,callback:te}=y.buffered[j],Y=y.objectMode?1:Z.length;y.length-=Y,te((x=y.errored)!==null&&x!==void 0?x:new U("write"))}const v=y[H].splice(0);for(let j=0;j<v.length;j++){var F;v[j]((F=y.errored)!==null&&F!==void 0?F:new U("end"))}K(y)}function de(y,x){if(x.corked||x.bufferProcessing||x.destroyed||!x.constructed)return;const{buffered:v,bufferedIndex:F,objectMode:j}=x,Z=v.length-F;if(!Z)return;let te=F;if(x.bufferProcessing=!0,Z>1&&y._writev){x.pendingcb-=Z-1;const Y=x.allNoop?we:C=>{for(let $e=te;$e<v.length;++$e)v[$e].callback(C)},Re=x.allNoop&&te===0?v:e(v,te);Re.allBuffers=x.allBuffers,ue(y,x,!0,x.length,Re,"",Y),K(x)}else{do{const{chunk:Y,encoding:Re,callback:C}=v[te];v[te++]=null;const $e=j?1:Y.length;ue(y,x,!1,$e,Y,Re,C)}while(te<v.length&&!x.writing);te===v.length?K(x):te>256?(v.splice(0,te),x.bufferedIndex=0):x.bufferedIndex=te}x.bufferProcessing=!1}G.prototype._write=function(y,x,v){if(this._writev)this._writev([{chunk:y,encoding:x}],v);else throw new O("_write()")},G.prototype._writev=null,G.prototype.end=function(y,x,v){const F=this._writableState;typeof y=="function"?(v=y,y=null,x=null):typeof x=="function"&&(v=x,x=null);let j;if(y!=null){const Z=z(this,y,x);Z instanceof r&&(j=Z)}return F.corked&&(F.corked=1,this.uncork()),j||(!F.errored&&!F.ending?(F.ending=!0,Te(this,F,!0),F.ended=!0):F.finished?j=new oe("end"):F.destroyed&&(j=new U("end"))),typeof v=="function"&&(j||F.finished?t.nextTick(v,j):F[H].push(v)),this};function Ae(y){return y.ending&&!y.destroyed&&y.constructed&&y.length===0&&!y.errored&&y.buffered.length===0&&!y.finished&&!y.writing&&!y.errorEmitted&&!y.closeEmitted}function Ve(y,x){let v=!1;function F(j){if(v){ye(y,j??T());return}if(v=!0,x.pendingcb--,j){const Z=x[H].splice(0);for(let te=0;te<Z.length;te++)Z[te](j);ye(y,j,x.sync)}else Ae(x)&&(x.prefinished=!0,y.emit("prefinish"),x.pendingcb++,t.nextTick(Ye,y,x))}x.sync=!0,x.pendingcb++;try{y._final(F)}catch(j){F(j)}x.sync=!1}function Ke(y,x){!x.prefinished&&!x.finalCalled&&(typeof y._final=="function"&&!x.destroyed?(x.finalCalled=!0,Ve(y,x)):(x.prefinished=!0,y.emit("prefinish")))}function Te(y,x,v){Ae(x)&&(Ke(y,x),x.pendingcb===0&&(v?(x.pendingcb++,t.nextTick((F,j)=>{Ae(j)?Ye(F,j):j.pendingcb--},y,x)):Ae(x)&&(x.pendingcb++,Ye(y,x))))}function Ye(y,x){x.pendingcb--,x.finished=!0;const v=x[H].splice(0);for(let F=0;F<v.length;F++)v[F]();if(y.emit("finish"),x.autoDestroy){const F=y._readableState;(!F||F.autoDestroy&&(F.endEmitted||F.readable===!1))&&y.destroy()}}a(G.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(y){this._writableState&&(this._writableState.destroyed=y)}},writable:{__proto__:null,get(){const y=this._writableState;return!!y&&y.writable!==!1&&!y.destroyed&&!y.errored&&!y.ending&&!y.ended},set(y){this._writableState&&(this._writableState.writable=!!y)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const y=this._writableState;return y?!y.destroyed&&!y.ending&&y.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Tt=w.destroy;G.prototype.destroy=function(y,x){const v=this._writableState;return!v.destroyed&&(v.bufferedIndex<v.buffered.length||v[H].length)&&t.nextTick(M,v),Tt.call(this,y,x),this},G.prototype._undestroy=w.undestroy,G.prototype._destroy=function(y,x){x(y)},G.prototype[g.captureRejectionSymbol]=function(y){this.destroy(y)};let ht;function Xe(){return ht===void 0&&(ht={}),ht}return G.fromWeb=function(y,x){return Xe().newStreamWritableFromWritableStream(y,x)},G.toWeb=function(y){return Xe().newWritableStreamFromStreamWritable(y)},tn}var nn,us;function Xl(){if(us)return nn;us=1;const t=at,e=je,{isReadable:r,isWritable:n,isIterable:i,isNodeStream:a,isReadableNodeStream:l,isWritableNodeStream:u,isDuplexNodeStream:p,isReadableStream:_,isWritableStream:g}=ze,S=tt,{AbortError:m,codes:{ERR_INVALID_ARG_TYPE:w,ERR_INVALID_RETURN_VALUE:I}}=Se,{destroyer:R}=Rt,N=He(),k=ur(),O=rn(),{createDeferredPromise:T}=xe,q=os,U=globalThis.Blob||e.Blob,oe=typeof U<"u"?function(P){return P instanceof U}:function(P){return!1},Ee=globalThis.AbortController||kt().AbortController,{FunctionPrototypeCall:ee}=ce;class ae extends N{constructor(P){super(P),(P==null?void 0:P.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(P==null?void 0:P.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}nn=function H(P,K){if(p(P))return P;if(l(P))return we({readable:P});if(u(P))return we({writable:P});if(a(P))return we({writable:!1,readable:!1});if(_(P))return we({readable:k.fromWeb(P)});if(g(P))return we({writable:O.fromWeb(P)});if(typeof P=="function"){const{value:z,write:le,final:ue,destroy:re}=ye(P);if(i(z))return q(ae,z,{objectMode:!0,write:le,final:ue,destroy:re});const fe=z==null?void 0:z.then;if(typeof fe=="function"){let D;const ne=ee(fe,z,M=>{if(M!=null)throw new I("nully","body",M)},M=>{R(D,M)});return D=new ae({objectMode:!0,readable:!1,write:le,final(M){ue(async()=>{try{await ne,t.nextTick(M,null)}catch(de){t.nextTick(M,de)}})},destroy:re})}throw new I("Iterable, AsyncIterable or AsyncFunction",K,z)}if(oe(P))return H(P.arrayBuffer());if(i(P))return q(ae,P,{objectMode:!0,writable:!1});if(_(P==null?void 0:P.readable)&&g(P==null?void 0:P.writable))return ae.fromWeb(P);if(typeof(P==null?void 0:P.writable)=="object"||typeof(P==null?void 0:P.readable)=="object"){const z=P!=null&&P.readable?l(P==null?void 0:P.readable)?P==null?void 0:P.readable:H(P.readable):void 0,le=P!=null&&P.writable?u(P==null?void 0:P.writable)?P==null?void 0:P.writable:H(P.writable):void 0;return we({readable:z,writable:le})}const G=P==null?void 0:P.then;if(typeof G=="function"){let z;return ee(G,P,le=>{le!=null&&z.push(le),z.push(null)},le=>{R(z,le)}),z=new ae({objectMode:!0,writable:!1,read(){}})}throw new w(K,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],P)};function ye(H){let{promise:P,resolve:K}=T();const G=new Ee,z=G.signal;return{value:H(async function*(){for(;;){const ue=P;P=null;const{chunk:re,done:fe,cb:D}=await ue;if(t.nextTick(D),fe)return;if(z.aborted)throw new m(void 0,{cause:z.reason});({promise:P,resolve:K}=T()),yield re}}(),{signal:z}),write(ue,re,fe){const D=K;K=null,D({chunk:ue,done:!1,cb:fe})},final(ue){const re=K;K=null,re({done:!0,cb:ue})},destroy(ue,re){G.abort(),re(ue)}}}function we(H){const P=H.readable&&typeof H.readable.read!="function"?k.wrap(H.readable):H.readable,K=H.writable;let G=!!r(P),z=!!n(K),le,ue,re,fe,D;function ne(M){const de=fe;fe=null,de?de(M):M&&D.destroy(M)}return D=new ae({readableObjectMode:!!(P!=null&&P.readableObjectMode),writableObjectMode:!!(K!=null&&K.writableObjectMode),readable:G,writable:z}),z&&(S(K,M=>{z=!1,M&&R(P,M),ne(M)}),D._write=function(M,de,Ae){K.write(M,de)?Ae():le=Ae},D._final=function(M){K.end(),ue=M},K.on("drain",function(){if(le){const M=le;le=null,M()}}),K.on("finish",function(){if(ue){const M=ue;ue=null,M()}})),G&&(S(P,M=>{G=!1,M&&R(P,M),ne(M)}),P.on("readable",function(){if(re){const M=re;re=null,M()}}),P.on("end",function(){D.push(null)}),D._read=function(){for(;;){const M=P.read();if(M===null){re=D._read;return}if(!D.push(M))return}}),D._destroy=function(M,de){!M&&fe!==null&&(M=new m),re=null,le=null,ue=null,fe===null?de(M):(fe=de,R(K,M),R(P,M))},D}return nn}var sn,fs;function He(){if(fs)return sn;fs=1;const{ObjectDefineProperties:t,ObjectGetOwnPropertyDescriptor:e,ObjectKeys:r,ObjectSetPrototypeOf:n}=ce;sn=l;const i=ur(),a=rn();n(l.prototype,i.prototype),n(l,i);{const g=r(a.prototype);for(let S=0;S<g.length;S++){const m=g[S];l.prototype[m]||(l.prototype[m]=a.prototype[m])}}function l(g){if(!(this instanceof l))return new l(g);i.call(this,g),a.call(this,g),g?(this.allowHalfOpen=g.allowHalfOpen!==!1,g.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),g.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}t(l.prototype,{writable:{__proto__:null,...e(a.prototype,"writable")},writableHighWaterMark:{__proto__:null,...e(a.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...e(a.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...e(a.prototype,"writableBuffer")},writableLength:{__proto__:null,...e(a.prototype,"writableLength")},writableFinished:{__proto__:null,...e(a.prototype,"writableFinished")},writableCorked:{__proto__:null,...e(a.prototype,"writableCorked")},writableEnded:{__proto__:null,...e(a.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...e(a.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(g){this._readableState&&this._writableState&&(this._readableState.destroyed=g,this._writableState.destroyed=g)}}});let u;function p(){return u===void 0&&(u={}),u}l.fromWeb=function(g,S){return p().newStreamDuplexFromReadableWritablePair(g,S)},l.toWeb=function(g){return p().newReadableWritablePairFromDuplex(g)};let _;return l.from=function(g){return _||(_=Xl()),_(g,"body")},sn}const{ObjectSetPrototypeOf:cs,Symbol:Zl}=ce;var ds=Qe;const{ERR_METHOD_NOT_IMPLEMENTED:Jl}=Se.codes,on=He(),{getHighWaterMark:eu}=lr;cs(Qe.prototype,on.prototype),cs(Qe,on);const Mt=Zl("kCallback");function Qe(t){if(!(this instanceof Qe))return new Qe(t);const e=t?eu(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),on.call(this,t),this._readableState.sync=!1,this[Mt]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",tu)}function an(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function tu(){this._final!==an&&an.call(this)}Qe.prototype._final=an,Qe.prototype._transform=function(t,e,r){throw new Jl("_transform()")},Qe.prototype._write=function(t,e,r){const n=this._readableState,i=this._writableState,a=n.length;this._transform(t,e,(l,u)=>{if(l){r(l);return}u!=null&&this.push(u),i.ended||a===n.length||n.length<n.highWaterMark?r():this[Mt]=r})},Qe.prototype._read=function(){if(this[Mt]){const t=this[Mt];this[Mt]=null,t()}};const{ObjectSetPrototypeOf:hs}=ce;var ps=It;const ln=ds;hs(It.prototype,ln.prototype),hs(It,ln);function It(t){if(!(this instanceof It))return new It(t);ln.call(this,t)}It.prototype._transform=function(t,e,r){r(null,t)};const Dt=at,{ArrayIsArray:ru,Promise:nu,SymbolAsyncIterator:iu,SymbolDispose:su}=ce,fr=tt,{once:ou}=xe,au=Rt,_s=He(),{aggregateTwoErrors:lu,codes:{ERR_INVALID_ARG_TYPE:un,ERR_INVALID_RETURN_VALUE:fn,ERR_MISSING_ARGS:uu,ERR_STREAM_DESTROYED:fu,ERR_STREAM_PREMATURE_CLOSE:cu},AbortError:du}=Se,{validateFunction:hu,validateAbortSignal:pu}=Ct,{isIterable:ut,isReadable:cn,isReadableNodeStream:cr,isNodeStream:bs,isTransformStream:At,isWebStream:_u,isReadableStream:dn,isReadableFinished:bu}=ze,gu=globalThis.AbortController||kt().AbortController;let hn,pn,_n;function gs(t,e,r){let n=!1;t.on("close",()=>{n=!0});const i=fr(t,{readable:e,writable:r},a=>{n=!a});return{destroy:a=>{n||(n=!0,au.destroyer(t,a||new fu("pipe")))},cleanup:i}}function yu(t){return hu(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function bn(t){if(ut(t))return t;if(cr(t))return wu(t);throw new un("val",["Readable","Iterable","AsyncIterable"],t)}async function*wu(t){pn||(pn=ur()),yield*pn.prototype[iu].call(t)}async function dr(t,e,r,{end:n}){let i,a=null;const l=_=>{if(_&&(i=_),a){const g=a;a=null,g()}},u=()=>new nu((_,g)=>{i?g(i):a=()=>{i?g(i):_()}});e.on("drain",l);const p=fr(e,{readable:!1},l);try{e.writableNeedDrain&&await u();for await(const _ of t)e.write(_)||await u();n&&(e.end(),await u()),r()}catch(_){r(i!==_?lu(i,_):_)}finally{p(),e.off("drain",l)}}async function gn(t,e,r,{end:n}){At(e)&&(e=e.writable);const i=e.getWriter();try{for await(const a of t)await i.ready,i.write(a).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(a){try{await i.abort(a),r(a)}catch(l){r(l)}}}function mu(...t){return ys(t,ou(yu(t)))}function ys(t,e,r){if(t.length===1&&ru(t[0])&&(t=t[0]),t.length<2)throw new uu("streams");const n=new gu,i=n.signal,a=r==null?void 0:r.signal,l=[];pu(a,"options.signal");function u(){I(new du)}_n=_n||xe.addAbortListener;let p;a&&(p=_n(a,u));let _,g;const S=[];let m=0;function w(O){I(O,--m===0)}function I(O,T){var q;if(O&&(!_||_.code==="ERR_STREAM_PREMATURE_CLOSE")&&(_=O),!(!_&&!T)){for(;S.length;)S.shift()(_);(q=p)===null||q===void 0||q[su](),n.abort(),T&&(_||l.forEach(U=>U()),Dt.nextTick(e,_,g))}}let R;for(let O=0;O<t.length;O++){const T=t[O],q=O<t.length-1,U=O>0,oe=q||(r==null?void 0:r.end)!==!1,Ee=O===t.length-1;if(bs(T)){let ee=function(ae){ae&&ae.name!=="AbortError"&&ae.code!=="ERR_STREAM_PREMATURE_CLOSE"&&w(ae)};if(oe){const{destroy:ae,cleanup:ye}=gs(T,q,U);S.push(ae),cn(T)&&Ee&&l.push(ye)}T.on("error",ee),cn(T)&&Ee&&l.push(()=>{T.removeListener("error",ee)})}if(O===0)if(typeof T=="function"){if(R=T({signal:i}),!ut(R))throw new fn("Iterable, AsyncIterable or Stream","source",R)}else ut(T)||cr(T)||At(T)?R=T:R=_s.from(T);else if(typeof T=="function"){if(At(R)){var N;R=bn((N=R)===null||N===void 0?void 0:N.readable)}else R=bn(R);if(R=T(R,{signal:i}),q){if(!ut(R,!0))throw new fn("AsyncIterable",`transform[${O-1}]`,R)}else{var k;hn||(hn=ps);const ee=new hn({objectMode:!0}),ae=(k=R)===null||k===void 0?void 0:k.then;if(typeof ae=="function")m++,ae.call(R,H=>{g=H,H!=null&&ee.write(H),oe&&ee.end(),Dt.nextTick(w)},H=>{ee.destroy(H),Dt.nextTick(w,H)});else if(ut(R,!0))m++,dr(R,ee,w,{end:oe});else if(dn(R)||At(R)){const H=R.readable||R;m++,dr(H,ee,w,{end:oe})}else throw new fn("AsyncIterable or Promise","destination",R);R=ee;const{destroy:ye,cleanup:we}=gs(R,!1,!0);S.push(ye),Ee&&l.push(we)}}else if(bs(T)){if(cr(R)){m+=2;const ee=xu(R,T,w,{end:oe});cn(T)&&Ee&&l.push(ee)}else if(At(R)||dn(R)){const ee=R.readable||R;m++,dr(ee,T,w,{end:oe})}else if(ut(R))m++,dr(R,T,w,{end:oe});else throw new un("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],R);R=T}else if(_u(T)){if(cr(R))m++,gn(bn(R),T,w,{end:oe});else if(dn(R)||ut(R))m++,gn(R,T,w,{end:oe});else if(At(R))m++,gn(R.readable,T,w,{end:oe});else throw new un("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],R);R=T}else R=_s.from(T)}return(i!=null&&i.aborted||a!=null&&a.aborted)&&Dt.nextTick(u),R}function xu(t,e,r,{end:n}){let i=!1;if(e.on("close",()=>{i||r(new cu)}),t.pipe(e,{end:!1}),n){let a=function(){i=!0,e.end()};bu(t)?Dt.nextTick(a):t.once("end",a)}else r();return fr(t,{readable:!0,writable:!1},a=>{const l=t._readableState;a&&a.code==="ERR_STREAM_PREMATURE_CLOSE"&&l&&l.ended&&!l.errored&&!l.errorEmitted?t.once("end",r).once("error",r):r(a)}),fr(e,{readable:!1,writable:!0},r)}var yn={pipelineImpl:ys,pipeline:mu};const{pipeline:Eu}=yn,hr=He(),{destroyer:Su}=Rt,{isNodeStream:pr,isReadable:ws,isWritable:ms,isWebStream:wn,isTransformStream:ft,isWritableStream:xs,isReadableStream:Es}=ze,{AbortError:Ru,codes:{ERR_INVALID_ARG_VALUE:Ss,ERR_MISSING_ARGS:Iu}}=Se,Au=tt;var Rs=function(...e){if(e.length===0)throw new Iu("streams");if(e.length===1)return hr.from(e[0]);const r=[...e];if(typeof e[0]=="function"&&(e[0]=hr.from(e[0])),typeof e[e.length-1]=="function"){const w=e.length-1;e[w]=hr.from(e[w])}for(let w=0;w<e.length;++w)if(!(!pr(e[w])&&!wn(e[w]))){if(w<e.length-1&&!(ws(e[w])||Es(e[w])||ft(e[w])))throw new Ss(`streams[${w}]`,r[w],"must be readable");if(w>0&&!(ms(e[w])||xs(e[w])||ft(e[w])))throw new Ss(`streams[${w}]`,r[w],"must be writable")}let n,i,a,l,u;function p(w){const I=l;l=null,I?I(w):w?u.destroy(w):!m&&!S&&u.destroy()}const _=e[0],g=Eu(e,p),S=!!(ms(_)||xs(_)||ft(_)),m=!!(ws(g)||Es(g)||ft(g));if(u=new hr({writableObjectMode:!!(_!=null&&_.writableObjectMode),readableObjectMode:!!(g!=null&&g.readableObjectMode),writable:S,readable:m}),S){if(pr(_))u._write=function(I,R,N){_.write(I,R)?N():n=N},u._final=function(I){_.end(),i=I},_.on("drain",function(){if(n){const I=n;n=null,I()}});else if(wn(_)){const R=(ft(_)?_.writable:_).getWriter();u._write=async function(N,k,O){try{await R.ready,R.write(N).catch(()=>{}),O()}catch(T){O(T)}},u._final=async function(N){try{await R.ready,R.close().catch(()=>{}),i=N}catch(k){N(k)}}}const w=ft(g)?g.readable:g;Au(w,()=>{if(i){const I=i;i=null,I()}})}if(m){if(pr(g))g.on("readable",function(){if(a){const w=a;a=null,w()}}),g.on("end",function(){u.push(null)}),u._read=function(){for(;;){const w=g.read();if(w===null){a=u._read;return}if(!u.push(w))return}};else if(wn(g)){const I=(ft(g)?g.readable:g).getReader();u._read=async function(){for(;;)try{const{value:R,done:N}=await I.read();if(!u.push(R))return;if(N){u.push(null);return}}catch{return}}}}return u._destroy=function(w,I){!w&&l!==null&&(w=new Ru),a=null,n=null,i=null,l===null?I(w):(l=I,pr(g)&&Su(g,w))},u};const Tu=globalThis.AbortController||kt().AbortController,{codes:{ERR_INVALID_ARG_VALUE:vu,ERR_INVALID_ARG_TYPE:Ut,ERR_MISSING_ARGS:Nu,ERR_OUT_OF_RANGE:Pu},AbortError:De}=Se,{validateAbortSignal:ct,validateInteger:Is,validateObject:dt}=Ct,$u=ce.Symbol("kWeak"),Lu=ce.Symbol("kResistStopPropagation"),{finished:ju}=tt,Bu=Rs,{addAbortSignalNoValidate:Fu}=or,{isWritable:ku,isNodeStream:Cu}=ze,{deprecate:Ou}=xe,{ArrayPrototypePush:Mu,Boolean:Du,MathFloor:As,Number:Uu,NumberIsNaN:Wu,Promise:Ts,PromiseReject:vs,PromiseResolve:Gu,PromisePrototypeThen:Ns,Symbol:Ps}=ce,_r=Ps("kEmpty"),$s=Ps("kEof");function qu(t,e){if(e!=null&&dt(e,"options"),(e==null?void 0:e.signal)!=null&&ct(e.signal,"options.signal"),Cu(t)&&!ku(t))throw new vu("stream",t,"must be writable");const r=Bu(this,t);return e!=null&&e.signal&&Fu(e.signal,r),r}function br(t,e){if(typeof t!="function")throw new Ut("fn",["Function","AsyncFunction"],t);e!=null&&dt(e,"options"),(e==null?void 0:e.signal)!=null&&ct(e.signal,"options.signal");let r=1;(e==null?void 0:e.concurrency)!=null&&(r=As(e.concurrency));let n=r-1;return(e==null?void 0:e.highWaterMark)!=null&&(n=As(e.highWaterMark)),Is(r,"options.concurrency",1),Is(n,"options.highWaterMark",0),n+=r,(async function*(){const a=xe.AbortSignalAny([e==null?void 0:e.signal].filter(Du)),l=this,u=[],p={signal:a};let _,g,S=!1,m=0;function w(){S=!0,I()}function I(){m-=1,R()}function R(){g&&!S&&m<r&&u.length<n&&(g(),g=null)}async function N(){try{for await(let k of l){if(S)return;if(a.aborted)throw new De;try{if(k=t(k,p),k===_r)continue;k=Gu(k)}catch(O){k=vs(O)}m+=1,Ns(k,I,w),u.push(k),_&&(_(),_=null),!S&&(u.length>=n||m>=r)&&await new Ts(O=>{g=O})}u.push($s)}catch(k){const O=vs(k);Ns(O,I,w),u.push(O)}finally{S=!0,_&&(_(),_=null)}}N();try{for(;;){for(;u.length>0;){const k=await u[0];if(k===$s)return;if(a.aborted)throw new De;k!==_r&&(yield k),u.shift(),R()}await new Ts(k=>{_=k})}}finally{S=!0,g&&(g(),g=null)}}).call(this)}function zu(t=void 0){return t!=null&&dt(t,"options"),(t==null?void 0:t.signal)!=null&&ct(t.signal,"options.signal"),(async function*(){let r=0;for await(const i of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new De({cause:t.signal.reason});yield[r++,i]}}).call(this)}async function Ls(t,e=void 0){for await(const r of mn.call(this,t,e))return!0;return!1}async function Hu(t,e=void 0){if(typeof t!="function")throw new Ut("fn",["Function","AsyncFunction"],t);return!await Ls.call(this,async(...r)=>!await t(...r),e)}async function Qu(t,e){for await(const r of mn.call(this,t,e))return r}async function Vu(t,e){if(typeof t!="function")throw new Ut("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i),_r}for await(const n of br.call(this,r,e));}function mn(t,e){if(typeof t!="function")throw new Ut("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i)?n:_r}return br.call(this,r,e)}class Ku extends Nu{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Yu(t,e,r){var n;if(typeof t!="function")throw new Ut("reducer",["Function","AsyncFunction"],t);r!=null&&dt(r,"options"),(r==null?void 0:r.signal)!=null&&ct(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){const _=new De(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await ju(this.destroy(_)),_}const a=new Tu,l=a.signal;if(r!=null&&r.signal){const _={once:!0,[$u]:this,[Lu]:!0};r.signal.addEventListener("abort",()=>a.abort(),_)}let u=!1;try{for await(const _ of this){var p;if(u=!0,r!=null&&(p=r.signal)!==null&&p!==void 0&&p.aborted)throw new De;i?e=await t(e,_,{signal:l}):(e=_,i=!0)}if(!u&&!i)throw new Ku}finally{a.abort()}return e}async function Xu(t){t!=null&&dt(t,"options"),(t==null?void 0:t.signal)!=null&&ct(t.signal,"options.signal");const e=[];for await(const n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new De(void 0,{cause:t.signal.reason});Mu(e,n)}return e}function Zu(t,e){const r=br.call(this,t,e);return(async function*(){for await(const i of r)yield*i}).call(this)}function js(t){if(t=Uu(t),Wu(t))return 0;if(t<0)throw new Pu("number",">= 0",t);return t}function Ju(t,e=void 0){return e!=null&&dt(e,"options"),(e==null?void 0:e.signal)!=null&&ct(e.signal,"options.signal"),t=js(t),(async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new De;for await(const a of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new De;t--<=0&&(yield a)}}).call(this)}function ef(t,e=void 0){return e!=null&&dt(e,"options"),(e==null?void 0:e.signal)!=null&&ct(e.signal,"options.signal"),t=js(t),(async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new De;for await(const a of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new De;if(t-- >0&&(yield a),t<=0)return}}).call(this)}$r.streamReturningOperators={asIndexedPairs:Ou(zu,"readable.asIndexedPairs will be removed in a future version."),drop:Ju,filter:mn,flatMap:Zu,map:br,take:ef,compose:qu},$r.promiseReturningOperators={every:Hu,forEach:Vu,reduce:Yu,toArray:Xu,some:Ls,find:Qu};var xn,Bs;function Fs(){if(Bs)return xn;Bs=1;const{ArrayPrototypePop:t,Promise:e}=ce,{isIterable:r,isNodeStream:n,isWebStream:i}=ze,{pipelineImpl:a}=yn,{finished:l}=tt;Cs();function u(...p){return new e((_,g)=>{let S,m;const w=p[p.length-1];if(w&&typeof w=="object"&&!n(w)&&!r(w)&&!i(w)){const I=t(p);S=I.signal,m=I.end}a(p,(I,R)=>{I?g(I):_(R)},{signal:S,end:m})})}return xn={finished:l,pipeline:u},xn}var ks;function Cs(){if(ks)return Nr.exports;ks=1;const{Buffer:t}=je,{ObjectDefineProperty:e,ObjectKeys:r,ReflectApply:n}=ce,{promisify:{custom:i}}=xe,{streamReturningOperators:a,promiseReturningOperators:l}=$r,{codes:{ERR_ILLEGAL_CONSTRUCTOR:u}}=Se,p=Rs,{setDefaultHighWaterMark:_,getDefaultHighWaterMark:g}=lr,{pipeline:S}=yn,{destroyer:m}=Rt,w=tt,I=Fs(),R=ze,N=Nr.exports=Kr.Stream;N.isDestroyed=R.isDestroyed,N.isDisturbed=R.isDisturbed,N.isErrored=R.isErrored,N.isReadable=R.isReadable,N.isWritable=R.isWritable,N.Readable=ur();for(const O of r(a)){let q=function(...U){if(new.target)throw u();return N.Readable.from(n(T,this,U))};const T=a[O];e(q,"name",{__proto__:null,value:T.name}),e(q,"length",{__proto__:null,value:T.length}),e(N.Readable.prototype,O,{__proto__:null,value:q,enumerable:!1,configurable:!0,writable:!0})}for(const O of r(l)){let q=function(...U){if(new.target)throw u();return n(T,this,U)};const T=l[O];e(q,"name",{__proto__:null,value:T.name}),e(q,"length",{__proto__:null,value:T.length}),e(N.Readable.prototype,O,{__proto__:null,value:q,enumerable:!1,configurable:!0,writable:!0})}N.Writable=rn(),N.Duplex=He(),N.Transform=ds,N.PassThrough=ps,N.pipeline=S;const{addAbortSignal:k}=or;return N.addAbortSignal=k,N.finished=w,N.destroy=m,N.compose=p,N.setDefaultHighWaterMark=_,N.getDefaultHighWaterMark=g,e(N,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return I}}),e(S,i,{__proto__:null,enumerable:!0,get(){return I.pipeline}}),e(w,i,{__proto__:null,enumerable:!0,get(){return I.finished}}),N.Stream=N,N._isUint8Array=function(T){return T instanceof Uint8Array},N._uint8ArrayToBuffer=function(T){return t.from(T.buffer,T.byteOffset,T.byteLength)},Nr.exports}(function(t){const e=Cs(),r=Fs(),n=e.Readable.destroy;t.exports=e.Readable,t.exports._uint8ArrayToBuffer=e._uint8ArrayToBuffer,t.exports._isUint8Array=e._isUint8Array,t.exports.isDisturbed=e.isDisturbed,t.exports.isErrored=e.isErrored,t.exports.isReadable=e.isReadable,t.exports.Readable=e.Readable,t.exports.Writable=e.Writable,t.exports.Duplex=e.Duplex,t.exports.Transform=e.Transform,t.exports.PassThrough=e.PassThrough,t.exports.addAbortSignal=e.addAbortSignal,t.exports.finished=e.finished,t.exports.destroy=e.destroy,t.exports.destroy=n,t.exports.pipeline=e.pipeline,t.exports.compose=e.compose,Object.defineProperty(e,"promises",{configurable:!0,enumerable:!0,get(){return r}}),t.exports.Stream=e.Stream,t.exports.default=t.exports})(Gn);var Os=Gn.exports;const En=Symbol("iter");function gr(t,e,r=4){if(r===0)return Object.assign(t,e);for(const n in e)t[n]=gr(t[n]||Object.create(null),e[n],r-1);return t}class tf{constructor(e={}){this._id=1,this._ids=Object.create(null),this._ids[""]=1,this._entities=Object.create(null),this._entities[1]="",this._blankNodeIndex=0,this._factory=e.factory||$t}_termFromId(e){if(e[0]==="."){const r=this._entities,n=e.split(".");return this._factory.quad(this._termFromId(r[n[1]]),this._termFromId(r[n[2]]),this._termFromId(r[n[3]]),n[4]&&this._termFromId(r[n[4]]))}return Lt(e,this._factory)}_termToNumericId(e){if(e.termType==="Quad"){const r=this._termToNumericId(e.subject),n=this._termToNumericId(e.predicate),i=this._termToNumericId(e.object);let a;return r&&n&&i&&(vr(e.graph)||(a=this._termToNumericId(e.graph)))&&this._ids[a?`.${r}.${n}.${i}.${a}`:`.${r}.${n}.${i}`]}return this._ids[yt(e)]}_termToNewNumericId(e){const r=e&&e.termType==="Quad"?`.${this._termToNewNumericId(e.subject)}.${this._termToNewNumericId(e.predicate)}.${this._termToNewNumericId(e.object)}${vr(e.graph)?"":`.${this._termToNewNumericId(e.graph)}`}`:yt(e);return this._ids[r]||(this._ids[this._entities[++this._id]=r]=this._id)}createBlankNode(e){let r,n;if(e)for(r=e=`_:${e}`,n=1;this._ids[r];)r=e+n++;else do r=`_:b${this._blankNodeIndex++}`;while(this._ids[r]);return this._ids[r]=++this._id,this._entities[this._id]=r,this._factory.blankNode(r.substr(2))}}class Ue{constructor(e,r){this._size=0,this._graphs=Object.create(null),!r&&e&&!e[0]&&(r=e,e=null),r=r||{},this._factory=r.factory||$t,this._entityIndex=r.entityIndex||new tf({factory:this._factory}),this._entities=this._entityIndex._entities,this._termFromId=this._entityIndex._termFromId.bind(this._entityIndex),this._termToNumericId=this._entityIndex._termToNumericId.bind(this._entityIndex),this._termToNewNumericId=this._entityIndex._termToNewNumericId.bind(this._entityIndex),e&&this.addQuads(e)}get size(){let e=this._size;if(e!==null)return e;e=0;const r=this._graphs;let n,i;for(const a in r)for(const l in n=r[a].subjects)for(const u in i=n[l])e+=Object.keys(i[u]).length;return this._size=e}_addToIndex(e,r,n,i){const a=e[r]||(e[r]={}),l=a[n]||(a[n]={}),u=i in l;return u||(l[i]=null),!u}_removeFromIndex(e,r,n,i){const a=e[r],l=a[n];delete l[i];for(const u in l)return;delete a[n];for(const u in a)return;delete e[r]}*_findInIndex(e,r,n,i,a,l,u,p){let _,g,S;const m=this._entities,w=this._termFromId(m[p]),I={subject:null,predicate:null,object:null};r&&((_=e,e={})[r]=_[r]);for(const R in e)if(g=e[R]){I[a]=this._termFromId(m[R]),n&&((_=g,g={})[n]=_[n]);for(const N in g)if(S=g[N]){I[l]=this._termFromId(m[N]);const k=i?i in S?[i]:[]:Object.keys(S);for(let O=0;O<k.length;O++)I[u]=this._termFromId(m[k[O]]),yield this._factory.quad(I.subject,I.predicate,I.object,w)}}}_loop(e,r){for(const n in e)r(n)}_loopByKey0(e,r,n){let i,a;if(i=e[r])for(a in i)n(a)}_loopByKey1(e,r,n){let i,a;for(i in e)a=e[i],a[r]&&n(i)}_loopBy2Keys(e,r,n,i){let a,l,u;if((a=e[r])&&(l=a[n]))for(u in l)i(u)}_countInIndex(e,r,n,i){let a=0,l,u,p;r&&((l=e,e={})[r]=l[r]);for(const _ in e)if(u=e[_]){n&&((l=u,u={})[n]=l[n]);for(const g in u)(p=u[g])&&(i?i in p&&a++:a+=Object.keys(p).length)}return a}_getGraphs(e){return e=e===""?1:e&&(this._termToNumericId(e)||-1),typeof e!="number"?this._graphs:{[e]:this._graphs[e]}}_uniqueEntities(e){const r=Object.create(null);return n=>{n in r||(r[n]=!0,e(this._termFromId(this._entities[n],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,r,n,i){r||(i=e.graph,n=e.object,r=e.predicate,e=e.subject),i=i?this._termToNewNumericId(i):1;let a=this._graphs[i];return a||(a=this._graphs[i]={subjects:{},predicates:{},objects:{}},Object.freeze(a)),e=this._termToNewNumericId(e),r=this._termToNewNumericId(r),n=this._termToNewNumericId(n),this._addToIndex(a.subjects,e,r,n)?(this._addToIndex(a.predicates,r,n,e),this._addToIndex(a.objects,n,e,r),this._size=null,!0):!1}addQuads(e){for(let r=0;r<e.length;r++)this.addQuad(e[r])}delete(e){return this.removeQuad(e),this}has(e,r,n,i){return e&&e.subject&&({subject:e,predicate:r,object:n,graph:i}=e),!this.readQuads(e,r,n,i).next().done}import(e){return e.on("data",r=>{this.addQuad(r)}),e}removeQuad(e,r,n,i){r||({subject:e,predicate:r,object:n,graph:i}=e),i=i?this._termToNumericId(i):1;const a=this._graphs;let l,u,p;if(!(e=e&&this._termToNumericId(e))||!(r=r&&this._termToNumericId(r))||!(n=n&&this._termToNumericId(n))||!(l=a[i])||!(u=l.subjects[e])||!(p=u[r])||!(n in p))return!1;this._removeFromIndex(l.subjects,e,r,n),this._removeFromIndex(l.predicates,r,n,e),this._removeFromIndex(l.objects,n,e,r),this._size!==null&&this._size--;for(e in l.subjects)return!0;return delete a[i],!0}removeQuads(e){for(let r=0;r<e.length;r++)this.removeQuad(e[r])}remove(e){return e.on("data",r=>{this.removeQuad(r)}),e}removeMatches(e,r,n,i){const a=new Os.Readable({objectMode:!0}),l=this.readQuads(e,r,n,i);return a._read=u=>{for(;u-- >0;){const{done:p,value:_}=l.next();if(p){a.push(null);return}a.push(_)}},this.remove(a)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,r,n,i){return[...this.readQuads(e,r,n,i)]}*readQuads(e,r,n,i){const a=this._getGraphs(i);let l,u,p,_;if(!(e&&!(u=this._termToNumericId(e))||r&&!(p=this._termToNumericId(r))||n&&!(_=this._termToNumericId(n))))for(const g in a)(l=a[g])&&(u?_?yield*this._findInIndex(l.objects,_,u,p,"object","subject","predicate",g):yield*this._findInIndex(l.subjects,u,p,null,"subject","predicate","object",g):p?yield*this._findInIndex(l.predicates,p,_,null,"predicate","object","subject",g):_?yield*this._findInIndex(l.objects,_,null,null,"object","subject","predicate",g):yield*this._findInIndex(l.subjects,null,null,null,"subject","predicate","object",g))}match(e,r,n,i){return new Sn(this,e,r,n,i,{entityIndex:this._entityIndex})}countQuads(e,r,n,i){const a=this._getGraphs(i);let l=0,u,p,_,g;if(e&&!(p=this._termToNumericId(e))||r&&!(_=this._termToNumericId(r))||n&&!(g=this._termToNumericId(n)))return 0;for(const S in a)(u=a[S])&&(e?n?l+=this._countInIndex(u.objects,g,p,_):l+=this._countInIndex(u.subjects,p,_,g):r?l+=this._countInIndex(u.predicates,_,g,p):l+=this._countInIndex(u.objects,g,p,_));return l}forEach(e,r,n,i,a){this.some(l=>(e(l,this),!1),r,n,i,a)}every(e,r,n,i,a){return!this.some(l=>!e(l,this),r,n,i,a)}some(e,r,n,i,a){for(const l of this.readQuads(r,n,i,a))if(e(l))return!0;return!1}getSubjects(e,r,n){const i=[];return this.forSubjects(a=>{i.push(a)},e,r,n),i}forSubjects(e,r,n,i){const a=this._getGraphs(i);let l,u,p;if(e=this._uniqueEntities(e),!(r&&!(u=this._termToNumericId(r))||n&&!(p=this._termToNumericId(n))))for(i in a)(l=a[i])&&(u?p?this._loopBy2Keys(l.predicates,u,p,e):this._loopByKey1(l.subjects,u,e):p?this._loopByKey0(l.objects,p,e):this._loop(l.subjects,e))}getPredicates(e,r,n){const i=[];return this.forPredicates(a=>{i.push(a)},e,r,n),i}forPredicates(e,r,n,i){const a=this._getGraphs(i);let l,u,p;if(e=this._uniqueEntities(e),!(r&&!(u=this._termToNumericId(r))||n&&!(p=this._termToNumericId(n))))for(i in a)(l=a[i])&&(u?p?this._loopBy2Keys(l.objects,p,u,e):this._loopByKey0(l.subjects,u,e):p?this._loopByKey1(l.predicates,p,e):this._loop(l.predicates,e))}getObjects(e,r,n){const i=[];return this.forObjects(a=>{i.push(a)},e,r,n),i}forObjects(e,r,n,i){const a=this._getGraphs(i);let l,u,p;if(e=this._uniqueEntities(e),!(r&&!(u=this._termToNumericId(r))||n&&!(p=this._termToNumericId(n))))for(i in a)(l=a[i])&&(u?p?this._loopBy2Keys(l.subjects,u,p,e):this._loopByKey1(l.objects,u,e):p?this._loopByKey0(l.predicates,p,e):this._loop(l.objects,e))}getGraphs(e,r,n){const i=[];return this.forGraphs(a=>{i.push(a)},e,r,n),i}forGraphs(e,r,n,i){for(const a in this._graphs)this.some(l=>(e(l.graph),!0),r,n,i,this._termFromId(this._entities[a]))}createBlankNode(e){return this._entityIndex.createBlankNode(e)}extractLists({remove:e=!1,ignoreErrors:r=!1}={}){const n={},i=r?()=>!0:(u,p)=>{throw new Error(`${u.value} ${p}`)},a=this.getQuads(null,be.rdf.rest,be.rdf.nil,null),l=e?[...a]:[];return a.forEach(u=>{const p=[];let _=!1,g,S;const m=u.graph;let w=u.subject;for(;w&&!_;){const I=this.getQuads(null,null,w,null),R=this.getQuads(w,null,null,null);let N,k=null,O=null,T=null;for(let q=0;q<R.length&&!_;q++)N=R[q],N.graph.equals(m)?g?_=i(w,"has non-list arcs out"):N.predicate.value===be.rdf.first?k?_=i(w,"has multiple rdf:first arcs"):l.push(k=N):N.predicate.value===be.rdf.rest?O?_=i(w,"has multiple rdf:rest arcs"):l.push(O=N):I.length?_=i(w,"can't be subject and object"):(g=N,S="subject"):_=i(w,"not confined to single graph");for(let q=0;q<I.length&&!_;++q)N=I[q],g?_=i(w,"can't have coreferences"):N.predicate.value===be.rdf.rest?T?_=i(w,"has incoming rdf:rest arcs"):T=N:(g=N,S="object");k?p.unshift(k.object):_=i(w,"has no list head"),w=T&&T.subject}_?e=!1:g&&(n[g[S].value]=p)}),e&&this.removeQuads(l),n}addAll(e){if(Array.isArray(e))this.addQuads(e);else if(e instanceof Ue&&e._entityIndex===this._entityIndex)e._size!==0&&(this._graphs=gr(this._graphs,e._graphs),this._size=null);else for(const r of e)this.add(r);return this}contains(e){if(e===this)return!0;if(!(e instanceof Ue)||this._entityIndex!==e._entityIndex)return e.every(_=>this.has(_));const r=this._graphs,n=e._graphs;let i,a,l,u,p;for(const _ in n){if(!(i=r[_]))return!1;i=i.subjects;for(const g in a=n[_].subjects){if(!(l=i[g]))return!1;for(const S in u=a[g]){if(!(p=l[S]))return!1;for(const m in u[S])if(!(m in p))return!1}}}return!0}deleteMatches(e,r,n,i){for(const a of this.match(e,r,n,i))this.removeQuad(a);return this}difference(e){return e===this?new Ue({entityIndex:this._entityIndex}):this.filter(r=>!e.has(r))}equals(e){return e===this||this.size===e.size&&this.contains(e)}filter(e){const r=new Ue({entityIndex:this._entityIndex});for(const n of this)e(n,this)&&r.add(n);return r}intersection(e){if(e===this){const r=new Ue({entityIndex:this._entityIndex});r._graphs=gr(Object.create(null),this._graphs),r._size=this._size}return this.filter(r=>e.has(r))}map(e){const r=new Ue({entityIndex:this._entityIndex});for(const n of this)r.add(e(n,this));return r}reduce(e,r){const n=this.readQuads();let i=r===void 0?n.next().value:r;for(const a of n)i=e(i,a,this);return i}toArray(){return this.getQuads()}toCanonical(){throw new Error("not implemented")}toStream(){return this.match()}toString(){return new Dn().quadsToString(this)}union(e){const r=new Ue({entityIndex:this._entityIndex});return r._graphs=gr(Object.create(null),this._graphs),r._size=this._size,r.addAll(e),r}*[Symbol.iterator](){yield*this.readQuads()}}class Sn extends Os.Readable{constructor(e,r,n,i,a,l){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:r,predicate:n,object:i,graph:a,options:l})}get filtered(){if(!this._filtered){const{n3Store:e,graph:r,object:n,predicate:i,subject:a}=this,l=this._filtered=new Ue({factory:e._factory,entityIndex:this.options.entityIndex});for(const u of e.readQuads(a,i,n,r))l.addQuad(u)}return this._filtered}get size(){return this.filtered.size}_read(e){e>0&&!this[En]&&(this[En]=this[Symbol.iterator]());const r=this[En];for(;e-- >0;){const{done:n,value:i}=r.next();if(n){this.push(null);return}this.push(i)}}addAll(e){return this.filtered.addAll(e)}contains(e){return this.filtered.contains(e)}deleteMatches(e,r,n,i){return this.filtered.deleteMatches(e,r,n,i)}difference(e){return this.filtered.difference(e)}equals(e){return this.filtered.equals(e)}every(e,r,n,i,a){return this.filtered.every(e,r,n,i,a)}filter(e){return this.filtered.filter(e)}forEach(e,r,n,i,a){return this.filtered.forEach(e,r,n,i,a)}import(e){return this.filtered.import(e)}intersection(e){return this.filtered.intersection(e)}map(e){return this.filtered.map(e)}some(e,r,n,i,a){return this.filtered.some(e,r,n,i,a)}toCanonical(){return this.filtered.toCanonical()}toStream(){return this._filtered?this._filtered.toStream():this.n3Store.match(this.subject,this.predicate,this.object,this.graph)}union(e){return this._filtered?this._filtered.union(e):this.n3Store.match(this.subject,this.predicate,this.object,this.graph).addAll(e)}toArray(){return this._filtered?this._filtered.toArray():this.n3Store.getQuads(this.subject,this.predicate,this.object,this.graph)}reduce(e,r){return this.filtered.reduce(e,r)}toString(){return new Dn().quadsToString(this)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,r,n,i){return new Sn(this.filtered,e,r,n,i,this.options)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}const yr={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#"},pe={namespace:"https://prez.dev/",label:"https://prez.dev/label",description:"https://prez.dev/description",provenance:"https://prez.dev/provenance",focusNode:"https://prez.dev/FocusNode",link:"https://prez.dev/link",members:"https://prez.dev/members",identifier:"https://prez.dev/identifier",count:"https://prez.dev/count",searchResult:"https://prez.dev/SearchResult",searchResultWeight:"https://prez.dev/searchResultWeight",searchResultPredicate:"https://prez.dev/searchResultPredicate",searchResultURI:"https://prez.dev/searchResultURI",searchResultMatch:"https://prez.dev/searchResultMatch",hasChildren:"https://prez.dev/hasChildren"},Pe={skosConceptScheme:"http://www.w3.org/2004/02/skos/core#ConceptScheme",skosConcept:"http://www.w3.org/2004/02/skos/core#Concept",a:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type",rdfLangString:"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",xmlString:"http://www.w3.org/2001/XMLSchema#string",w3Html:"http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML",shaclAllPredicates:"http://example.com/shacl-extension#allPredicateValues",shaclProperty:"http://www.w3.org/ns/shacl#property",shaclPath:"http://www.w3.org/ns/shacl#path",shaclUnion:"http://www.w3.org/ns/shacl#union"},rf={label:["https://prez.dev/label"],description:["https://prez.dev/description"],provenance:["https://prez.dev/provenance"]};function Ms(t,e=yr){if(t==="a")return e.rdf+"type";{const[r,n]=t.split(":");return r?[r]+n:t}}function Ds(t,e=yr){let r="";return Object.entries(e).forEach(([n,i])=>{t.startsWith(i)&&(r=n+":"+t.split(i)[1])}),r}const Us=t=>{const e=new URL(t);return`${e.protocol}//${e.hostname}`},nf=t=>new URL(t).pathname,sf=(t,e)=>{var n,i;const r=(i=(n=e.identifiers)==null?void 0:n.find(a=>a.value))==null?void 0:i.value;return r?t+`/concept-hierarchy/${r}/narrowers`:""},of=(t,e)=>{var l;const r=e?Us(e):"",n=(l=t.identifiers)==null?void 0:l.find(u=>u.value),i=n?n.value:"";return i?r+`/concept-hierarchy/${i}/top-concepts`:""},wr=t=>t.flatMap(e=>{var r;if(e["@id"])return e["@id"];if(e["@list"]&&e["@list"].length>0){const n=e["@list"][0];return(n==null?void 0:n["@id"])===Pe.shaclUnion?wr(((r=e["@list"][1])==null?void 0:r["@list"])||[]).filter(Boolean):wr(e["@list"]).flat()}return[]}).filter(e=>!!e),af=t=>t.reduce((e,r)=>{if(Pe.shaclProperty in r)for(const n of r[Pe.shaclProperty]){const i=t.find(a=>a["@id"]===n["@id"]);i&&Pe.shaclPath in i&&(e[r["@id"]]=wr(i[Pe.shaclPath]).filter(a=>a!==Pe.shaclAllPredicates))}return e},{}),{namedNode:Wt}=$t;class mr{constructor(){rt(this,"store");rt(this,"parser");rt(this,"prefixes");rt(this,"basePath");rt(this,"baseUrl");rt(this,"linkedLists");rt(this,"childNodes");this.store=new Ue,this.baseUrl="",this.basePath="",this.parser=new kn,this.prefixes=yr,this.linkedLists={},this.childNodes={}}load(e){e=`PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
`+e;const r=this.parser.parse(e,null,(n,i)=>{this.prefixes[n]=i.value});this.store.addQuads(r),this.linkedLists=this.store.extractLists()}setBaseUrl(e){this.baseUrl=e,this.basePath=new URL(e).pathname}toIri(e){return Ms(e,this.prefixes)}fromIri(e){return Ds(e,this.prefixes)}getObjectLiteral(e,r){return this.getObjects(e,r).map(n=>this.toPrezTerm(n))[0]||void 0}getProperties(e,r){const n={};return this.store.forEach(i=>{var a;r!=null&&r.excludePrefix&&i.predicate.value.startsWith(r.excludePrefix)||r!=null&&r.includePrefix&&!i.predicate.value.startsWith(r.includePrefix)||(n[a=i.predicate.value]??(n[a]={predicate:this.toPrezTerm(i.predicate),objects:[]}),n[i.predicate.value].objects.push(this.toPrezTerm(i.object)))},e,null,null,null),e.termType,n}getParents(e){e.startsWith(this.basePath)&&(e=e.substring(this.basePath.length));const r=e.split("/"),n=[];let i="";for(const a of r){if(a=="")continue;i+="/"+a;const l={url:i,segment:a};if(a.includes(":")){const u=a.split(":"),p=this.prefixes[u[0]];if(p){const _=this.getObjects(p+u[1],pe.label);_.length>0&&(l.label=Er(_[0].value))}}n.push(l)}return n}toPrezTerm(e){switch(e.termType){case"NamedNode":const r=Je(e.value);r.label=this.getObjectLiteral(e.value,pe.label),r.description=this.getObjectLiteral(e.value,pe.description),r.provenance=this.getObjectLiteral(e.value,pe.provenance);const n=this.getObjects(e.value,pe.identifier);n.length>0&&(r.identifiers=n.map(_=>this.toPrezTerm(_)));const i=this.getObjects(e.value,pe.link);i.length>0&&(r.links=i.map(_=>({value:_.value,parents:this.getParents(_.value)})));const a=this.getObjects(e.value,pe.members);a.length>0&&(r.members={value:a[0].value,parents:this.getParents(a[0].value)});const l=this.getObjects(e.value,Pe.a);return l.length>0&&(r.rdfTypes=l.map(_=>this.toPrezTerm(_))),r;case"Literal":const u=Er(e.value);return e.datatype&&(u.datatype=this.toPrezTerm(e.datatype)),e.language&&(u.language=e.language),u;case"BlankNode":const p=Pn(e.value);if(p.properties=this.getProperties(e),e.value in this.linkedLists){const _=this.linkedLists[e.value];if(_!=null&&_.find(g=>g.termType=="NamedNode"&&g.value==Pe.shaclUnion)){p.list=[];for(const g of _)if(g.termType=="BlankNode"){const S=g.value;if(S in this.linkedLists){for(const m of this.linkedLists[S])if(m.termType=="NamedNode"){const w=this.toPrezTerm(new Tr(m.value));p.list.push(w)}}}}}return p;default:throw"Invalid n3 Term object"}}toPrezFocusNode(e){var n,i,a,l,u;const r=this.toPrezTerm(e);return r.properties=this.getProperties(e,{excludePrefix:pe.namespace}),r.systemProperties=this.getProperties(e,{includePrefix:pe.namespace}),(n=r.rdfTypes)!=null&&n.map(p=>p.value).includes(Pe.skosConcept)&&(r.hasChildren=((u=(l=(a=(i=r.systemProperties)==null?void 0:i[pe.hasChildren])==null?void 0:a.objects)==null?void 0:l[0])==null?void 0:u.value)=="true"),r}getSubjects(e,r){return this.store.getSubjects(e,r,null)}getObjects(e,r){if(typeof r=="string")return this.store.getObjects(Wt(e),Wt(r),null);{const n=[];return r.forEach(i=>{n.push(...this.store.getObjects(Wt(e),Wt(i),null))}),n}}getMembers(e){this.getObjects(e,this.toIri("prez:members")).forEach(n=>({value:n.value,parents:[]}))}getConcepts(e){const r=this.getSubjects(this.toIri("skos:inScheme"),e.value);function n(_){return r.map(g=>g.value).includes(_.value)}const i=this.getObjects(e.value,this.toIri("skos:hasTopConcept")),a=this.getObjects(e.value,this.toIri("skos:topConceptOf")),l={},u=[...i,...a].filter(_=>n(_));r.forEach(_=>{l[_.value]=[]}),r.forEach(_=>{this.getObjects(_.value,this.toIri("skos:broader")).forEach(m=>{n(m)&&l[m.value].push(_)}),this.getObjects(_.value,this.toIri("skos:narrower")).forEach(m=>{n(m)&&l[_.value].push(m)})});const p=[];return u.forEach(_=>{p.push(this.createHierarchy(_,l))}),p}createHierarchy(e,r){const n=r[e.value].map(i=>this.createHierarchy(i,r));return{...this.toPrezTerm(e),hasChildren:n.length>0,narrowers:n}}getByPrezId(e){const r=[];return this.store.forEach(n=>{r.push(n)},null,null,Wt("https://prez.dev/FocusNode"),null),e?r.find(n=>n.object.value===e).subject:r.map(n=>n.subject)}getCount(){const e=this.store.getObjects(null,pe.count,null);return e.length>0?Number(e[0].value.replace(">","")):0}getMaxReached(){const e=this.store.getObjects(null,pe.count,null);return e.length>0?e[0].value.includes(">"):!1}getList(){const e=[];return this.getByPrezId().forEach(n=>{e.push(this.toPrezFocusNode(n))}),e}getItem(){var n;const e=this.getByPrezId();if(e.length==0)throw new Error("Unable to find item");const r=this.toPrezFocusNode(e[0]);if((n=r.rdfTypes)!=null&&n.map(i=>i.value).includes(Pe.skosConcept)){const i=this.getConcepts(e[0]);return{...r,topConcepts:{narrowers:i,hasChildren:i.length>0}}}return r}search(){return this.getSubjects(Pe.a,pe.searchResult).map(n=>({hash:n.value.split("urn:hash:").slice(-1)[0],weight:Number(this.getObjects(n.value,pe.searchResultWeight)[0].value),predicate:this.toPrezTerm(this.getObjects(n.value,pe.searchResultPredicate)[0]),match:this.toPrezTerm(this.getObjects(n.value,pe.searchResultMatch)[0]),resource:this.toPrezFocusNode(this.getObjects(n.value,pe.searchResultURI)[0])}))}}class lf extends Error{constructor(e){super(e),this.name="NetworkError"}}function uf(t){let e={};const r=t.split(",").map(i=>{const[,a,l]=i.trim().match(/<(.+)>; (.+)/),u={uri:a};return l.split("; ").forEach(p=>{const[,_,g]=p.match(/(.+)=[\"<](.+)[\">]/);u[_]=g}),u});r.filter(i=>i.rel==="type").forEach(i=>{e[i.anchor]={default:!1,current:!1,token:i.token,mediatypes:[],title:i.title,description:"",uri:i.anchor}});const n=r.find(i=>i.rel==="self");return n.format in e&&(e[n.format].current=!0),r.filter(i=>i.rel==="alternate"&&i.format).forEach(i=>{e[i.format].mediatypes.map(a=>a.mediatype).includes(i.type)||e[i.format].mediatypes.push({title:"",mediatype:i.type,default:!1})}),Object.values(e)}async function xr(t){const e=await fetch(t,{method:"GET",headers:{Accept:"text/anot+turtle"}});if(!e.ok)throw new lf(`Network error - status code ${e.status}: ${e.statusText}`);const r=e.headers.get("link")||e.headers.get("Link"),n=r?uf(r):[];return{data:await e.text(),profiles:n}}async function ff(t,e){const r=t+e,n=new URL(r).pathname,{data:i,profiles:a}=await xr(r),l=new mr;return l.setBaseUrl(t),l.load(i),{type:"list",data:l.getList(),profiles:a,maxReached:l.getMaxReached(),count:l.getCount(),parents:l.getParents(n)}}async function cf(t,e){const r=t+e,n=new URL(r).pathname,{data:i,profiles:a}=await xr(r),l=new mr;return l.setBaseUrl(t),l.load(i),{type:"item",data:l.getItem(),profiles:a,parents:l.getParents(n)}}async function df(t,e){const r=t+e,n=new URL(r).pathname,{data:i,profiles:a}=await xr(r),l=new mr;return l.setBaseUrl(t),l.load(i),{type:"search",data:l.search(),profiles:a,maxReached:l.getMaxReached(),count:l.getCount(),parents:l.getParents(n)}}Q.ANNOTATION_PREDICATES=rf,Q.DEFAULT_PREFIXES=yr,Q.PREZ_PREDICATES=pe,Q.RDFStore=mr,Q.SYSTEM_PREDICATES=Pe,Q.apiGet=xr,Q.bnode=Pn,Q.buildProfiles=af,Q.defaultFromIri=Ds,Q.defaultToIri=Ms,Q.getBaseUrl=Us,Q.getItem=cf,Q.getList=ff,Q.getNarrowersUrl=sf,Q.getTopConceptsUrl=of,Q.getUrlPath=nf,Q.isTypePrezTerm=Ie,Q.literal=Er,Q.node=Je,Q.processShaclPath=wr,Q.search=df,Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})});
