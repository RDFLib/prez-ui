(function(Q,Ie){typeof exports=="object"&&typeof module<"u"?Ie(exports):typeof define=="function"&&define.amd?define(["exports"],Ie):(Q=typeof globalThis<"u"?globalThis:Q||self,Ie(Q.PrezUILib={}))})(this,function(Q){"use strict";var _f=Object.defineProperty;var bf=(Q,Ie,Ze)=>Ie in Q?_f(Q,Ie,{enumerable:!0,configurable:!0,writable:!0,value:Ze}):Q[Ie]=Ze;var mr=(Q,Ie,Ze)=>(bf(Q,typeof Ie!="symbol"?Ie+"":Ie,Ze),Ze);function Ie(t){return t.value!==void 0}function Ze(t){const e={value:typeof t=="string"?t:t.value,termType:"NamedNode",equals:r=>!!r&&e.termType===r.termType&&e.value===r.value};return typeof t!="string"&&Object.assign(e,t),e}function Er(t){const e={value:typeof t=="string"?t:t.value,termType:"Literal",equals:r=>r&&e.termType===r.termType&&e.value===r.value?e.language!==r.language?!1:e.datatype===r.datatype:!1};return typeof t!="string"&&Object.assign(e,t),e}function Pn(t){const e={value:typeof t=="string"?t:t.value,properties:{},termType:"BlankNode",equals:r=>!!r&&e.termType===r.termType&&e.value===r.value&&e.properties===r.properties};return typeof t!="string"&&Object.assign(e,t),e}var Ys=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var je={},Gt={};Gt.byteLength=eo,Gt.toByteArray=ro,Gt.fromByteArray=so;for(var Le=[],Te=[],Zs=typeof Uint8Array<"u"?Uint8Array:Array,xr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pt=0,Js=xr.length;pt<Js;++pt)Le[pt]=xr[pt],Te[xr.charCodeAt(pt)]=pt;Te["-".charCodeAt(0)]=62,Te["_".charCodeAt(0)]=63;function $n(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function eo(t){var e=$n(t),r=e[0],n=e[1];return(r+n)*3/4-n}function to(t,e,r){return(e+r)*3/4-r}function ro(t){var e,r=$n(t),n=r[0],i=r[1],a=new Zs(to(t,n,i)),u=0,l=i>0?n-4:n,p;for(p=0;p<l;p+=4)e=Te[t.charCodeAt(p)]<<18|Te[t.charCodeAt(p+1)]<<12|Te[t.charCodeAt(p+2)]<<6|Te[t.charCodeAt(p+3)],a[u++]=e>>16&255,a[u++]=e>>8&255,a[u++]=e&255;return i===2&&(e=Te[t.charCodeAt(p)]<<2|Te[t.charCodeAt(p+1)]>>4,a[u++]=e&255),i===1&&(e=Te[t.charCodeAt(p)]<<10|Te[t.charCodeAt(p+1)]<<4|Te[t.charCodeAt(p+2)]>>2,a[u++]=e>>8&255,a[u++]=e&255),a}function no(t){return Le[t>>18&63]+Le[t>>12&63]+Le[t>>6&63]+Le[t&63]}function io(t,e,r){for(var n,i=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),i.push(no(n));return i.join("")}function so(t){for(var e,r=t.length,n=r%3,i=[],a=16383,u=0,l=r-n;u<l;u+=a)i.push(io(t,u,u+a>l?l:u+a));return n===1?(e=t[r-1],i.push(Le[e>>2]+Le[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Le[e>>10]+Le[e>>4&63]+Le[e<<2&63]+"=")),i.join("")}var Sr={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Sr.read=function(t,e,r,n,i){var a,u,l=i*8-n-1,p=(1<<l)-1,_=p>>1,m=-7,S=r?i-1:0,E=r?-1:1,y=t[e+S];for(S+=E,a=y&(1<<-m)-1,y>>=-m,m+=l;m>0;a=a*256+t[e+S],S+=E,m-=8);for(u=a&(1<<-m)-1,a>>=-m,m+=n;m>0;u=u*256+t[e+S],S+=E,m-=8);if(a===0)a=1-_;else{if(a===p)return u?NaN:(y?-1:1)*(1/0);u=u+Math.pow(2,n),a=a-_}return(y?-1:1)*u*Math.pow(2,a-n)},Sr.write=function(t,e,r,n,i,a){var u,l,p,_=a*8-i-1,m=(1<<_)-1,S=m>>1,E=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=n?0:a-1,R=n?1:-1,I=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,u=m):(u=Math.floor(Math.log(e)/Math.LN2),e*(p=Math.pow(2,-u))<1&&(u--,p*=2),u+S>=1?e+=E/p:e+=E*Math.pow(2,1-S),e*p>=2&&(u++,p/=2),u+S>=m?(l=0,u=m):u+S>=1?(l=(e*p-1)*Math.pow(2,i),u=u+S):(l=e*Math.pow(2,S-1)*Math.pow(2,i),u=0));i>=8;t[r+y]=l&255,y+=R,l/=256,i-=8);for(u=u<<i|l,_+=i;_>0;t[r+y]=u&255,y+=R,u/=256,_-=8);t[r+y-R]|=I*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=Gt,r=Sr,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=O,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,l.TYPED_ARRAY_SUPPORT=a(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const f=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(f,s),f.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function u(f){if(f>i)throw new RangeError('The value "'+f+'" is invalid for option "size"');const s=new Uint8Array(f);return Object.setPrototypeOf(s,l.prototype),s}function l(f,s,o){if(typeof f=="number"){if(typeof s=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return S(f)}return p(f,s,o)}l.poolSize=8192;function p(f,s,o){if(typeof f=="string")return E(f,s);if(ArrayBuffer.isView(f))return R(f);if(f==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(k(f,ArrayBuffer)||f&&k(f.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(k(f,SharedArrayBuffer)||f&&k(f.buffer,SharedArrayBuffer)))return I(f,s,o);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const d=f.valueOf&&f.valueOf();if(d!=null&&d!==f)return l.from(d,s,o);const b=N(f);if(b)return b;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return l.from(f[Symbol.toPrimitive]("string"),s,o);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}l.from=function(f,s,o){return p(f,s,o)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function _(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(f<0)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function m(f,s,o){return _(f),f<=0?u(f):s!==void 0?typeof o=="string"?u(f).fill(s,o):u(f).fill(s):u(f)}l.alloc=function(f,s,o){return m(f,s,o)};function S(f){return _(f),u(f<0?0:C(f)|0)}l.allocUnsafe=function(f){return S(f)},l.allocUnsafeSlow=function(f){return S(f)};function E(f,s){if((typeof s!="string"||s==="")&&(s="utf8"),!l.isEncoding(s))throw new TypeError("Unknown encoding: "+s);const o=T(f,s)|0;let d=u(o);const b=d.write(f,s);return b!==o&&(d=d.slice(0,b)),d}function y(f){const s=f.length<0?0:C(f.length)|0,o=u(s);for(let d=0;d<s;d+=1)o[d]=f[d]&255;return o}function R(f){if(k(f,Uint8Array)){const s=new Uint8Array(f);return I(s.buffer,s.byteOffset,s.byteLength)}return y(f)}function I(f,s,o){if(s<0||f.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<s+(o||0))throw new RangeError('"length" is outside of buffer bounds');let d;return s===void 0&&o===void 0?d=new Uint8Array(f):o===void 0?d=new Uint8Array(f,s):d=new Uint8Array(f,s,o),Object.setPrototypeOf(d,l.prototype),d}function N(f){if(l.isBuffer(f)){const s=C(f.length)|0,o=u(s);return o.length===0||f.copy(o,0,0,s),o}if(f.length!==void 0)return typeof f.length!="number"||Ne(f.length)?u(0):y(f);if(f.type==="Buffer"&&Array.isArray(f.data))return y(f.data)}function C(f){if(f>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return f|0}function O(f){return+f!=f&&(f=0),l.alloc(+f)}l.isBuffer=function(s){return s!=null&&s._isBuffer===!0&&s!==l.prototype},l.compare=function(s,o){if(k(s,Uint8Array)&&(s=l.from(s,s.offset,s.byteLength)),k(o,Uint8Array)&&(o=l.from(o,o.offset,o.byteLength)),!l.isBuffer(s)||!l.isBuffer(o))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(s===o)return 0;let d=s.length,b=o.length;for(let x=0,A=Math.min(d,b);x<A;++x)if(s[x]!==o[x]){d=s[x],b=o[x];break}return d<b?-1:b<d?1:0},l.isEncoding=function(s){switch(String(s).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(s,o){if(!Array.isArray(s))throw new TypeError('"list" argument must be an Array of Buffers');if(s.length===0)return l.alloc(0);let d;if(o===void 0)for(o=0,d=0;d<s.length;++d)o+=s[d].length;const b=l.allocUnsafe(o);let x=0;for(d=0;d<s.length;++d){let A=s[d];if(k(A,Uint8Array))x+A.length>b.length?(l.isBuffer(A)||(A=l.from(A)),A.copy(b,x)):Uint8Array.prototype.set.call(b,A,x);else if(l.isBuffer(A))A.copy(b,x);else throw new TypeError('"list" argument must be an Array of Buffers');x+=A.length}return b};function T(f,s){if(l.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||k(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);const o=f.length,d=arguments.length>2&&arguments[2]===!0;if(!d&&o===0)return 0;let b=!1;for(;;)switch(s){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":return L(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o*2;case"hex":return o>>>1;case"base64":return Y(f).length;default:if(b)return d?-1:L(f).length;s=(""+s).toLowerCase(),b=!0}}l.byteLength=T;function q(f,s,o){let d=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((o===void 0||o>this.length)&&(o=this.length),o<=0)||(o>>>=0,s>>>=0,o<=s))return"";for(f||(f="utf8");;)switch(f){case"hex":return re(this,s,o);case"utf8":case"utf-8":return K(this,s,o);case"ascii":return le(this,s,o);case"latin1":case"binary":return ue(this,s,o);case"base64":return P(this,s,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe(this,s,o);default:if(d)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),d=!0}}l.prototype._isBuffer=!0;function U(f,s,o){const d=f[s];f[s]=f[o],f[o]=d}l.prototype.swap16=function(){const s=this.length;if(s%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let o=0;o<s;o+=2)U(this,o,o+1);return this},l.prototype.swap32=function(){const s=this.length;if(s%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let o=0;o<s;o+=4)U(this,o,o+3),U(this,o+1,o+2);return this},l.prototype.swap64=function(){const s=this.length;if(s%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let o=0;o<s;o+=8)U(this,o,o+7),U(this,o+1,o+6),U(this,o+2,o+5),U(this,o+3,o+4);return this},l.prototype.toString=function(){const s=this.length;return s===0?"":arguments.length===0?K(this,0,s):q.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(s){if(!l.isBuffer(s))throw new TypeError("Argument must be a Buffer");return this===s?!0:l.compare(this,s)===0},l.prototype.inspect=function(){let s="";const o=t.INSPECT_MAX_BYTES;return s=this.toString("hex",0,o).replace(/(.{2})/g,"$1 ").trim(),this.length>o&&(s+=" ... "),"<Buffer "+s+">"},n&&(l.prototype[n]=l.prototype.inspect),l.prototype.compare=function(s,o,d,b,x){if(k(s,Uint8Array)&&(s=l.from(s,s.offset,s.byteLength)),!l.isBuffer(s))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof s);if(o===void 0&&(o=0),d===void 0&&(d=s?s.length:0),b===void 0&&(b=0),x===void 0&&(x=this.length),o<0||d>s.length||b<0||x>this.length)throw new RangeError("out of range index");if(b>=x&&o>=d)return 0;if(b>=x)return-1;if(o>=d)return 1;if(o>>>=0,d>>>=0,b>>>=0,x>>>=0,this===s)return 0;let A=x-b,W=d-o;const ie=Math.min(A,W),J=this.slice(b,x),se=s.slice(o,d);for(let V=0;V<ie;++V)if(J[V]!==se[V]){A=J[V],W=se[V];break}return A<W?-1:W<A?1:0};function oe(f,s,o,d,b){if(f.length===0)return-1;if(typeof o=="string"?(d=o,o=0):o>2147483647?o=2147483647:o<-2147483648&&(o=-2147483648),o=+o,Ne(o)&&(o=b?0:f.length-1),o<0&&(o=f.length+o),o>=f.length){if(b)return-1;o=f.length-1}else if(o<0)if(b)o=0;else return-1;if(typeof s=="string"&&(s=l.from(s,d)),l.isBuffer(s))return s.length===0?-1:Ee(f,s,o,d,b);if(typeof s=="number")return s=s&255,typeof Uint8Array.prototype.indexOf=="function"?b?Uint8Array.prototype.indexOf.call(f,s,o):Uint8Array.prototype.lastIndexOf.call(f,s,o):Ee(f,[s],o,d,b);throw new TypeError("val must be string, number or Buffer")}function Ee(f,s,o,d,b){let x=1,A=f.length,W=s.length;if(d!==void 0&&(d=String(d).toLowerCase(),d==="ucs2"||d==="ucs-2"||d==="utf16le"||d==="utf-16le")){if(f.length<2||s.length<2)return-1;x=2,A/=2,W/=2,o/=2}function ie(se,V){return x===1?se[V]:se.readUInt16BE(V*x)}let J;if(b){let se=-1;for(J=o;J<A;J++)if(ie(f,J)===ie(s,se===-1?0:J-se)){if(se===-1&&(se=J),J-se+1===W)return se*x}else se!==-1&&(J-=J-se),se=-1}else for(o+W>A&&(o=A-W),J=o;J>=0;J--){let se=!0;for(let V=0;V<W;V++)if(ie(f,J+V)!==ie(s,V)){se=!1;break}if(se)return J}return-1}l.prototype.includes=function(s,o,d){return this.indexOf(s,o,d)!==-1},l.prototype.indexOf=function(s,o,d){return oe(this,s,o,d,!0)},l.prototype.lastIndexOf=function(s,o,d){return oe(this,s,o,d,!1)};function ee(f,s,o,d){o=Number(o)||0;const b=f.length-o;d?(d=Number(d),d>b&&(d=b)):d=b;const x=s.length;d>x/2&&(d=x/2);let A;for(A=0;A<d;++A){const W=parseInt(s.substr(A*2,2),16);if(Ne(W))return A;f[o+A]=W}return A}function ae(f,s,o,d){return Se(L(s,f.length-o),f,o,d)}function ge(f,s,o,d){return Se(Z(s),f,o,d)}function ye(f,s,o,d){return Se(Y(s),f,o,d)}function H(f,s,o,d){return Se(te(s,f.length-o),f,o,d)}l.prototype.write=function(s,o,d,b){if(o===void 0)b="utf8",d=this.length,o=0;else if(d===void 0&&typeof o=="string")b=o,d=this.length,o=0;else if(isFinite(o))o=o>>>0,isFinite(d)?(d=d>>>0,b===void 0&&(b="utf8")):(b=d,d=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const x=this.length-o;if((d===void 0||d>x)&&(d=x),s.length>0&&(d<0||o<0)||o>this.length)throw new RangeError("Attempt to write outside buffer bounds");b||(b="utf8");let A=!1;for(;;)switch(b){case"hex":return ee(this,s,o,d);case"utf8":case"utf-8":return ae(this,s,o,d);case"ascii":case"latin1":case"binary":return ge(this,s,o,d);case"base64":return ye(this,s,o,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,s,o,d);default:if(A)throw new TypeError("Unknown encoding: "+b);b=(""+b).toLowerCase(),A=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function P(f,s,o){return s===0&&o===f.length?e.fromByteArray(f):e.fromByteArray(f.slice(s,o))}function K(f,s,o){o=Math.min(f.length,o);const d=[];let b=s;for(;b<o;){const x=f[b];let A=null,W=x>239?4:x>223?3:x>191?2:1;if(b+W<=o){let ie,J,se,V;switch(W){case 1:x<128&&(A=x);break;case 2:ie=f[b+1],(ie&192)===128&&(V=(x&31)<<6|ie&63,V>127&&(A=V));break;case 3:ie=f[b+1],J=f[b+2],(ie&192)===128&&(J&192)===128&&(V=(x&15)<<12|(ie&63)<<6|J&63,V>2047&&(V<55296||V>57343)&&(A=V));break;case 4:ie=f[b+1],J=f[b+2],se=f[b+3],(ie&192)===128&&(J&192)===128&&(se&192)===128&&(V=(x&15)<<18|(ie&63)<<12|(J&63)<<6|se&63,V>65535&&V<1114112&&(A=V))}}A===null?(A=65533,W=1):A>65535&&(A-=65536,d.push(A>>>10&1023|55296),A=56320|A&1023),d.push(A),b+=W}return z(d)}const G=4096;function z(f){const s=f.length;if(s<=G)return String.fromCharCode.apply(String,f);let o="",d=0;for(;d<s;)o+=String.fromCharCode.apply(String,f.slice(d,d+=G));return o}function le(f,s,o){let d="";o=Math.min(f.length,o);for(let b=s;b<o;++b)d+=String.fromCharCode(f[b]&127);return d}function ue(f,s,o){let d="";o=Math.min(f.length,o);for(let b=s;b<o;++b)d+=String.fromCharCode(f[b]);return d}function re(f,s,o){const d=f.length;(!s||s<0)&&(s=0),(!o||o<0||o>d)&&(o=d);let b="";for(let x=s;x<o;++x)b+=Ut[f[x]];return b}function fe(f,s,o){const d=f.slice(s,o);let b="";for(let x=0;x<d.length-1;x+=2)b+=String.fromCharCode(d[x]+d[x+1]*256);return b}l.prototype.slice=function(s,o){const d=this.length;s=~~s,o=o===void 0?d:~~o,s<0?(s+=d,s<0&&(s=0)):s>d&&(s=d),o<0?(o+=d,o<0&&(o=0)):o>d&&(o=d),o<s&&(o=s);const b=this.subarray(s,o);return Object.setPrototypeOf(b,l.prototype),b};function M(f,s,o){if(f%1!==0||f<0)throw new RangeError("offset is not uint");if(f+s>o)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(s,o,d){s=s>>>0,o=o>>>0,d||M(s,o,this.length);let b=this[s],x=1,A=0;for(;++A<o&&(x*=256);)b+=this[s+A]*x;return b},l.prototype.readUintBE=l.prototype.readUIntBE=function(s,o,d){s=s>>>0,o=o>>>0,d||M(s,o,this.length);let b=this[s+--o],x=1;for(;o>0&&(x*=256);)b+=this[s+--o]*x;return b},l.prototype.readUint8=l.prototype.readUInt8=function(s,o){return s=s>>>0,o||M(s,1,this.length),this[s]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(s,o){return s=s>>>0,o||M(s,2,this.length),this[s]|this[s+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(s,o){return s=s>>>0,o||M(s,2,this.length),this[s]<<8|this[s+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(s,o){return s=s>>>0,o||M(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+this[s+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(s,o){return s=s>>>0,o||M(s,4,this.length),this[s]*16777216+(this[s+1]<<16|this[s+2]<<8|this[s+3])},l.prototype.readBigUInt64LE=Ue(function(s){s=s>>>0,g(s,"offset");const o=this[s],d=this[s+7];(o===void 0||d===void 0)&&w(s,this.length-8);const b=o+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24,x=this[++s]+this[++s]*2**8+this[++s]*2**16+d*2**24;return BigInt(b)+(BigInt(x)<<BigInt(32))}),l.prototype.readBigUInt64BE=Ue(function(s){s=s>>>0,g(s,"offset");const o=this[s],d=this[s+7];(o===void 0||d===void 0)&&w(s,this.length-8);const b=o*2**24+this[++s]*2**16+this[++s]*2**8+this[++s],x=this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+d;return(BigInt(b)<<BigInt(32))+BigInt(x)}),l.prototype.readIntLE=function(s,o,d){s=s>>>0,o=o>>>0,d||M(s,o,this.length);let b=this[s],x=1,A=0;for(;++A<o&&(x*=256);)b+=this[s+A]*x;return x*=128,b>=x&&(b-=Math.pow(2,8*o)),b},l.prototype.readIntBE=function(s,o,d){s=s>>>0,o=o>>>0,d||M(s,o,this.length);let b=o,x=1,A=this[s+--b];for(;b>0&&(x*=256);)A+=this[s+--b]*x;return x*=128,A>=x&&(A-=Math.pow(2,8*o)),A},l.prototype.readInt8=function(s,o){return s=s>>>0,o||M(s,1,this.length),this[s]&128?(255-this[s]+1)*-1:this[s]},l.prototype.readInt16LE=function(s,o){s=s>>>0,o||M(s,2,this.length);const d=this[s]|this[s+1]<<8;return d&32768?d|4294901760:d},l.prototype.readInt16BE=function(s,o){s=s>>>0,o||M(s,2,this.length);const d=this[s+1]|this[s]<<8;return d&32768?d|4294901760:d},l.prototype.readInt32LE=function(s,o){return s=s>>>0,o||M(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24},l.prototype.readInt32BE=function(s,o){return s=s>>>0,o||M(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]},l.prototype.readBigInt64LE=Ue(function(s){s=s>>>0,g(s,"offset");const o=this[s],d=this[s+7];(o===void 0||d===void 0)&&w(s,this.length-8);const b=this[s+4]+this[s+5]*2**8+this[s+6]*2**16+(d<<24);return(BigInt(b)<<BigInt(32))+BigInt(o+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24)}),l.prototype.readBigInt64BE=Ue(function(s){s=s>>>0,g(s,"offset");const o=this[s],d=this[s+7];(o===void 0||d===void 0)&&w(s,this.length-8);const b=(o<<24)+this[++s]*2**16+this[++s]*2**8+this[++s];return(BigInt(b)<<BigInt(32))+BigInt(this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+d)}),l.prototype.readFloatLE=function(s,o){return s=s>>>0,o||M(s,4,this.length),r.read(this,s,!0,23,4)},l.prototype.readFloatBE=function(s,o){return s=s>>>0,o||M(s,4,this.length),r.read(this,s,!1,23,4)},l.prototype.readDoubleLE=function(s,o){return s=s>>>0,o||M(s,8,this.length),r.read(this,s,!0,52,8)},l.prototype.readDoubleBE=function(s,o){return s=s>>>0,o||M(s,8,this.length),r.read(this,s,!1,52,8)};function ne(f,s,o,d,b,x){if(!l.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>b||s<x)throw new RangeError('"value" argument is out of bounds');if(o+d>f.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(s,o,d,b){if(s=+s,o=o>>>0,d=d>>>0,!b){const W=Math.pow(2,8*d)-1;ne(this,s,o,d,W,0)}let x=1,A=0;for(this[o]=s&255;++A<d&&(x*=256);)this[o+A]=s/x&255;return o+d},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(s,o,d,b){if(s=+s,o=o>>>0,d=d>>>0,!b){const W=Math.pow(2,8*d)-1;ne(this,s,o,d,W,0)}let x=d-1,A=1;for(this[o+x]=s&255;--x>=0&&(A*=256);)this[o+x]=s/A&255;return o+d},l.prototype.writeUint8=l.prototype.writeUInt8=function(s,o,d){return s=+s,o=o>>>0,d||ne(this,s,o,1,255,0),this[o]=s&255,o+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(s,o,d){return s=+s,o=o>>>0,d||ne(this,s,o,2,65535,0),this[o]=s&255,this[o+1]=s>>>8,o+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(s,o,d){return s=+s,o=o>>>0,d||ne(this,s,o,2,65535,0),this[o]=s>>>8,this[o+1]=s&255,o+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(s,o,d){return s=+s,o=o>>>0,d||ne(this,s,o,4,4294967295,0),this[o+3]=s>>>24,this[o+2]=s>>>16,this[o+1]=s>>>8,this[o]=s&255,o+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(s,o,d){return s=+s,o=o>>>0,d||ne(this,s,o,4,4294967295,0),this[o]=s>>>24,this[o+1]=s>>>16,this[o+2]=s>>>8,this[o+3]=s&255,o+4};function D(f,s,o,d,b){Ye(s,d,b,f,o,7);let x=Number(s&BigInt(4294967295));f[o++]=x,x=x>>8,f[o++]=x,x=x>>8,f[o++]=x,x=x>>8,f[o++]=x;let A=Number(s>>BigInt(32)&BigInt(4294967295));return f[o++]=A,A=A>>8,f[o++]=A,A=A>>8,f[o++]=A,A=A>>8,f[o++]=A,o}function de(f,s,o,d,b){Ye(s,d,b,f,o,7);let x=Number(s&BigInt(4294967295));f[o+7]=x,x=x>>8,f[o+6]=x,x=x>>8,f[o+5]=x,x=x>>8,f[o+4]=x;let A=Number(s>>BigInt(32)&BigInt(4294967295));return f[o+3]=A,A=A>>8,f[o+2]=A,A=A>>8,f[o+1]=A,A=A>>8,f[o]=A,o+8}l.prototype.writeBigUInt64LE=Ue(function(s,o=0){return D(this,s,o,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Ue(function(s,o=0){return de(this,s,o,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(s,o,d,b){if(s=+s,o=o>>>0,!b){const ie=Math.pow(2,8*d-1);ne(this,s,o,d,ie-1,-ie)}let x=0,A=1,W=0;for(this[o]=s&255;++x<d&&(A*=256);)s<0&&W===0&&this[o+x-1]!==0&&(W=1),this[o+x]=(s/A>>0)-W&255;return o+d},l.prototype.writeIntBE=function(s,o,d,b){if(s=+s,o=o>>>0,!b){const ie=Math.pow(2,8*d-1);ne(this,s,o,d,ie-1,-ie)}let x=d-1,A=1,W=0;for(this[o+x]=s&255;--x>=0&&(A*=256);)s<0&&W===0&&this[o+x+1]!==0&&(W=1),this[o+x]=(s/A>>0)-W&255;return o+d},l.prototype.writeInt8=function(s,o,d){return s=+s,o=o>>>0,d||ne(this,s,o,1,127,-128),s<0&&(s=255+s+1),this[o]=s&255,o+1},l.prototype.writeInt16LE=function(s,o,d){return s=+s,o=o>>>0,d||ne(this,s,o,2,32767,-32768),this[o]=s&255,this[o+1]=s>>>8,o+2},l.prototype.writeInt16BE=function(s,o,d){return s=+s,o=o>>>0,d||ne(this,s,o,2,32767,-32768),this[o]=s>>>8,this[o+1]=s&255,o+2},l.prototype.writeInt32LE=function(s,o,d){return s=+s,o=o>>>0,d||ne(this,s,o,4,2147483647,-2147483648),this[o]=s&255,this[o+1]=s>>>8,this[o+2]=s>>>16,this[o+3]=s>>>24,o+4},l.prototype.writeInt32BE=function(s,o,d){return s=+s,o=o>>>0,d||ne(this,s,o,4,2147483647,-2147483648),s<0&&(s=4294967295+s+1),this[o]=s>>>24,this[o+1]=s>>>16,this[o+2]=s>>>8,this[o+3]=s&255,o+4},l.prototype.writeBigInt64LE=Ue(function(s,o=0){return D(this,s,o,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Ue(function(s,o=0){return de(this,s,o,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Re(f,s,o,d,b,x){if(o+d>f.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("Index out of range")}function Qe(f,s,o,d,b){return s=+s,o=o>>>0,b||Re(f,s,o,4),r.write(f,s,o,d,23,4),o+4}l.prototype.writeFloatLE=function(s,o,d){return Qe(this,s,o,!0,d)},l.prototype.writeFloatBE=function(s,o,d){return Qe(this,s,o,!1,d)};function Ve(f,s,o,d,b){return s=+s,o=o>>>0,b||Re(f,s,o,8),r.write(f,s,o,d,52,8),o+8}l.prototype.writeDoubleLE=function(s,o,d){return Ve(this,s,o,!0,d)},l.prototype.writeDoubleBE=function(s,o,d){return Ve(this,s,o,!1,d)},l.prototype.copy=function(s,o,d,b){if(!l.isBuffer(s))throw new TypeError("argument should be a Buffer");if(d||(d=0),!b&&b!==0&&(b=this.length),o>=s.length&&(o=s.length),o||(o=0),b>0&&b<d&&(b=d),b===d||s.length===0||this.length===0)return 0;if(o<0)throw new RangeError("targetStart out of bounds");if(d<0||d>=this.length)throw new RangeError("Index out of range");if(b<0)throw new RangeError("sourceEnd out of bounds");b>this.length&&(b=this.length),s.length-o<b-d&&(b=s.length-o+d);const x=b-d;return this===s&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(o,d,b):Uint8Array.prototype.set.call(s,this.subarray(d,b),o),x},l.prototype.fill=function(s,o,d,b){if(typeof s=="string"){if(typeof o=="string"?(b=o,o=0,d=this.length):typeof d=="string"&&(b=d,d=this.length),b!==void 0&&typeof b!="string")throw new TypeError("encoding must be a string");if(typeof b=="string"&&!l.isEncoding(b))throw new TypeError("Unknown encoding: "+b);if(s.length===1){const A=s.charCodeAt(0);(b==="utf8"&&A<128||b==="latin1")&&(s=A)}}else typeof s=="number"?s=s&255:typeof s=="boolean"&&(s=Number(s));if(o<0||this.length<o||this.length<d)throw new RangeError("Out of range index");if(d<=o)return this;o=o>>>0,d=d===void 0?this.length:d>>>0,s||(s=0);let x;if(typeof s=="number")for(x=o;x<d;++x)this[x]=s;else{const A=l.isBuffer(s)?s:l.from(s,b),W=A.length;if(W===0)throw new TypeError('The value "'+s+'" is invalid for argument "value"');for(x=0;x<d-o;++x)this[x+o]=A[x%W]}return this};const Ae={};function Ke(f,s,o){Ae[f]=class extends o{constructor(){super(),Object.defineProperty(this,"message",{value:s.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${f}]`,this.stack,delete this.name}get code(){return f}set code(b){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:b,writable:!0})}toString(){return`${this.name} [${f}]: ${this.message}`}}}Ke("ERR_BUFFER_OUT_OF_BOUNDS",function(f){return f?`${f} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ke("ERR_INVALID_ARG_TYPE",function(f,s){return`The "${f}" argument must be of type number. Received type ${typeof s}`},TypeError),Ke("ERR_OUT_OF_RANGE",function(f,s,o){let d=`The value of "${f}" is out of range.`,b=o;return Number.isInteger(o)&&Math.abs(o)>2**32?b=Rt(String(o)):typeof o=="bigint"&&(b=String(o),(o>BigInt(2)**BigInt(32)||o<-(BigInt(2)**BigInt(32)))&&(b=Rt(b)),b+="n"),d+=` It must be ${s}. Received ${b}`,d},RangeError);function Rt(f){let s="",o=f.length;const d=f[0]==="-"?1:0;for(;o>=d+4;o-=3)s=`_${f.slice(o-3,o)}${s}`;return`${f.slice(0,o)}${s}`}function ct(f,s,o){g(s,"offset"),(f[s]===void 0||f[s+o]===void 0)&&w(s,f.length-(o+1))}function Ye(f,s,o,d,b,x){if(f>o||f<s){const A=typeof s=="bigint"?"n":"";let W;throw x>3?s===0||s===BigInt(0)?W=`>= 0${A} and < 2${A} ** ${(x+1)*8}${A}`:W=`>= -(2${A} ** ${(x+1)*8-1}${A}) and < 2 ** ${(x+1)*8-1}${A}`:W=`>= ${s}${A} and <= ${o}${A}`,new Ae.ERR_OUT_OF_RANGE("value",W,f)}ct(d,b,x)}function g(f,s){if(typeof f!="number")throw new Ae.ERR_INVALID_ARG_TYPE(s,"number",f)}function w(f,s,o){throw Math.floor(f)!==f?(g(f,o),new Ae.ERR_OUT_OF_RANGE(o||"offset","an integer",f)):s<0?new Ae.ERR_BUFFER_OUT_OF_BOUNDS:new Ae.ERR_OUT_OF_RANGE(o||"offset",`>= ${o?1:0} and <= ${s}`,f)}const v=/[^+/0-9A-Za-z-_]/g;function B(f){if(f=f.split("=")[0],f=f.trim().replace(v,""),f.length<2)return"";for(;f.length%4!==0;)f=f+"=";return f}function L(f,s){s=s||1/0;let o;const d=f.length;let b=null;const x=[];for(let A=0;A<d;++A){if(o=f.charCodeAt(A),o>55295&&o<57344){if(!b){if(o>56319){(s-=3)>-1&&x.push(239,191,189);continue}else if(A+1===d){(s-=3)>-1&&x.push(239,191,189);continue}b=o;continue}if(o<56320){(s-=3)>-1&&x.push(239,191,189),b=o;continue}o=(b-55296<<10|o-56320)+65536}else b&&(s-=3)>-1&&x.push(239,191,189);if(b=null,o<128){if((s-=1)<0)break;x.push(o)}else if(o<2048){if((s-=2)<0)break;x.push(o>>6|192,o&63|128)}else if(o<65536){if((s-=3)<0)break;x.push(o>>12|224,o>>6&63|128,o&63|128)}else if(o<1114112){if((s-=4)<0)break;x.push(o>>18|240,o>>12&63|128,o>>6&63|128,o&63|128)}else throw new Error("Invalid code point")}return x}function Z(f){const s=[];for(let o=0;o<f.length;++o)s.push(f.charCodeAt(o)&255);return s}function te(f,s){let o,d,b;const x=[];for(let A=0;A<f.length&&!((s-=2)<0);++A)o=f.charCodeAt(A),d=o>>8,b=o%256,x.push(b),x.push(d);return x}function Y(f){return e.toByteArray(B(f))}function Se(f,s,o,d){let b;for(b=0;b<d&&!(b+o>=s.length||b>=f.length);++b)s[b+o]=f[b];return b}function k(f,s){return f instanceof s||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===s.name}function Ne(f){return f!==f}const Ut=function(){const f="0123456789abcdef",s=new Array(256);for(let o=0;o<16;++o){const d=o*16;for(let b=0;b<16;++b)s[d+b]=f[o]+f[b]}return s}();function Ue(f){return typeof BigInt>"u"?In:f}function In(){throw new Error("BigInt not supported")}})(je);/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let jn;var oo=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:Ys):t=>(jn||(jn=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0));const ao=Xs(oo),At="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Tt="http://www.w3.org/2001/XMLSchema#",Ir="http://www.w3.org/2000/10/swap/",_e={xsd:{decimal:`${Tt}decimal`,boolean:`${Tt}boolean`,double:`${Tt}double`,integer:`${Tt}integer`,string:`${Tt}string`},rdf:{type:`${At}type`,nil:`${At}nil`,first:`${At}first`,rest:`${At}rest`,langString:`${At}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${Ir}reify#forSome`,forAll:`${Ir}reify#forAll`},log:{implies:`${Ir}log#implies`}},{xsd:qt}=_e,lo=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,Ln={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},uo=/[\x00-\x20<>\\"\{\}\|\^\`]/,fo={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},co=/$0^/;class ho{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const r in this)!(r in fo)&&this[r]instanceof RegExp&&(this[r]=co)}else this._n3Mode=e.n3!==!1;this._comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,r){let n=this._input,i=n.length;for(;;){let l,p;for(;l=this._newline.exec(n);)this._comments&&(p=this._comment.exec(l[0]))&&a("comment",p[1],"",this._line,l[0].length),n=n.substr(l[0].length,n.length),i=n.length,this._line++;if(!l&&(l=this._whitespace.exec(n))&&(n=n.substr(l[0].length,n.length)),this._endOfFile.test(n))return r&&(this._comments&&(p=this._comment.exec(n))&&a("comment",p[1],"",this._line,n.length),n=null,a("eof","","",this._line,0)),this._input=n;const _=this._line,m=n[0];let S="",E="",y="",R=null,I=0,N=!1;switch(m){case"^":if(n.length<3)break;if(n[1]==="^"){if(this._previousMarker="^^",n=n.substr(2),n[0]!=="<"){N=!0;break}}else{this._n3Mode&&(I=1,S="^");break}case"<":if(R=this._unescapedIri.exec(n))S="IRI",E=R[1];else if(R=this._iri.exec(n)){if(E=this._unescape(R[1]),E===null||uo.test(E))return u(this);S="IRI"}else n.length>1&&n[1]==="<"?(S="<<",I=2):this._n3Mode&&n.length>1&&n[1]==="="&&(S="inverse",I=2,E=">");break;case">":n.length>1&&n[1]===">"&&(S=">>",I=2);break;case"_":((R=this._blank.exec(n))||r&&(R=this._blank.exec(`${n} `)))&&(S="blank",y="_",E=R[1]);break;case'"':if(R=this._simpleQuotedString.exec(n))E=R[1];else if({value:E,matchLength:I}=this._parseLiteral(n),E===null)return u(this);(R!==null||I!==0)&&(S="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(R=this._simpleApostropheString.exec(n))E=R[1];else if({value:E,matchLength:I}=this._parseLiteral(n),E===null)return u(this);(R!==null||I!==0)&&(S="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(R=this._variable.exec(n))&&(S="var",E=R[0]);break;case"@":this._previousMarker==="literal"&&(R=this._langcode.exec(n))?(S="langcode",E=R[1]):(R=this._keyword.exec(n))&&(S=R[0]);break;case".":if(n.length===1?r:n[1]<"0"||n[1]>"9"){S=".",I=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(R=this._number.exec(n)||r&&(R=this._number.exec(`${n} `)))&&(S="literal",E=R[0],y=typeof R[1]=="string"?qt.double:typeof R[2]=="string"?qt.decimal:qt.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(R=this._sparqlKeyword.exec(n))?S=R[0].toUpperCase():N=!0;break;case"f":case"t":(R=this._boolean.exec(n))?(S="literal",E=R[0],y=qt.boolean):N=!0;break;case"a":(R=this._shortPredicates.exec(n))?(S="abbreviation",E="a"):N=!0;break;case"=":this._n3Mode&&n.length>1&&(S="abbreviation",n[1]!==">"?(I=1,E="="):(I=2,E=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(I=1,S=m);break;case"{":!this._lineMode&&n.length>=2&&(n[1]==="|"?(S="{|",I=2):(S=m,I=1));break;case"|":n.length>=2&&n[1]==="}"&&(S="|}",I=2);break;default:N=!0}if(N&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(R=this._prefix.exec(n))?(S="prefix",E=R[1]||""):((R=this._prefixed.exec(n))||r&&(R=this._prefixed.exec(`${n} `)))&&(S="prefixed",y=R[1]||"",E=this._unescape(R[2]))),this._previousMarker==="^^")switch(S){case"prefixed":S="type";break;case"IRI":S="typeIRI";break;default:S=""}if(!S)return r||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?u(this):this._input=n;const C=I||R[0].length,O=a(S,E,y,_,C);this.previousToken=O,this._previousMarker=S,n=n.substr(C,n.length)}function a(l,p,_,m,S){const E=n?i-n.length:i,y=E+S,R={type:l,value:p,prefix:_,line:m,start:E,end:y};return e(null,R),R}function u(l){e(l._syntaxError(/^\S*/.exec(n)[0]))}}_unescape(e){let r=!1;const n=e.replace(lo,(i,a,u,l)=>{if(typeof a=="string")return String.fromCharCode(Number.parseInt(a,16));if(typeof u=="string"){let p=Number.parseInt(u,16);return p<=65535?String.fromCharCode(Number.parseInt(u,16)):String.fromCharCode(55296+((p-=65536)>>10),56320+(p&1023))}return l in Ln?Ln[l]:(r=!0,"")});return r?null:n}_parseLiteral(e){if(e.length>=3){const r=e.match(/^(?:"""|"|'''|'|)/)[0],n=r.length;let i=Math.max(this._literalClosingPos,n);for(;(i=e.indexOf(r,i))>0;){let a=0;for(;e[i-a-1]==="\\";)a++;if(a%2===0){const u=e.substring(n,i),l=u.split(/\r\n|\r|\n/).length-1,p=i+n;if(n===1&&l!==0||n===3&&this._lineMode)break;return this._line+=l,{value:this._unescape(u),matchLength:p}}i++}this._literalClosingPos=e.length-n+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const r=new Error(`Unexpected "${e}" on line ${this._line}.`);return r.context={token:void 0,line:this._line,previousToken:this.previousToken},r}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,r){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof r=="function")ao(()=>this._tokenizeToEnd(r,!0));else{const n=[];let i;if(this._tokenizeToEnd((a,u)=>a?i=a:n.push(u),!0),i)throw i;return n}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",n=>{this._input!==null&&n.length!==0&&(this._pendingBuffer&&(n=je.Buffer.concat([this._pendingBuffer,n]),this._pendingBuffer=null),n[n.length-1]&128?this._pendingBuffer=n:(typeof this._input>"u"?this._input=this._readStartingBom(typeof n=="string"?n:n.toString()):this._input+=n,this._tokenizeToEnd(r,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(r,!0)}),e.on("error",r)}}const{rdf:po,xsd:tt}=_e;let vt,_o=0;const Rr={namedNode:mo,blankNode:Eo,variable:So,literal:xo,defaultGraph:Io,quad:Bn,triple:Bn},Nt=Rr;class Fe{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof Fe?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class Fn extends Fe{get termType(){return"NamedNode"}}class _t extends Fe{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let r=e.lastIndexOf('"')+1;return r<e.length&&e[r++]==="@"?e.substr(r).toLowerCase():""}get datatype(){return new Fn(this.datatypeString)}get datatypeString(){const e=this.id,r=e.lastIndexOf('"')+1,n=r<e.length?e[r]:"";return n==="^"?e.substr(r+2):n!=="@"?tt.string:po.langString}equals(e){return e instanceof _t?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class bo extends Fe{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class go extends Fe{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}class yo extends Fe{constructor(){return super(""),vt||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}}vt=new yo;function Pt(t,e,r){if(e=e||Rr,!t)return e.defaultGraph();switch(t[0]){case"?":return e.variable(t.substr(1));case"_":return e.blankNode(t.substr(2));case'"':if(e===Rr)return new _t(t);if(t[t.length-1]==='"')return e.literal(t.substr(1,t.length-2));const n=t.lastIndexOf('"',t.length-1);return e.literal(t.substr(1,n-1),t[n+1]==="@"?t.substr(n+2):e.namedNode(t.substr(n+3)));case"[":t=JSON.parse(t);break;default:if(!r||!Array.isArray(t))return e.namedNode(t)}return e.quad(Pt(t[0],e,!0),Pt(t[1],e,!0),Pt(t[2],e,!0),t[3]&&Pt(t[3],e,!0))}function bt(t,e){if(typeof t=="string")return t;if(t instanceof Fe&&t.termType!=="Quad")return t.id;if(!t)return vt.id;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return`"${t.value}"${t.language?`@${t.language}`:t.datatype&&t.datatype.value!==tt.string?`^^${t.datatype.value}`:""}`;case"Quad":const r=[bt(t.subject,!0),bt(t.predicate,!0),bt(t.object,!0)];return t.graph&&t.graph.termType!=="DefaultGraph"&&r.push(bt(t.graph,!0)),e?r:JSON.stringify(r);default:throw new Error(`Unexpected termType: ${t.termType}`)}}class wo extends Fe{constructor(e,r,n,i){super(""),this._subject=e,this._predicate=r,this._object=n,this._graph=i||vt}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function mo(t){return new Fn(t)}function Eo(t){return new bo(t||`n3-${_o++}`)}function xo(t,e){if(typeof e=="string")return new _t(`"${t}"@${e.toLowerCase()}`);let r=e?e.value:"";return r===""&&(typeof t=="boolean"?r=tt.boolean:typeof t=="number"&&(Number.isFinite(t)?r=Number.isInteger(t)?tt.integer:tt.double:(r=tt.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),r===""||r===tt.string?new _t(`"${t}"`):new _t(`"${t}"^^${r}`)}function So(t){return new go(t)}function Io(){return vt}function Bn(t,e,r,n){return new wo(t,e,r,n)}let Cn=0;class kn{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&On(this,e.factory);const r=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",n=/turtle/.test(r),i=/trig/.test(r),a=/triple/.test(r),u=/quad/.test(r),l=this._n3Mode=/n3/.test(r),p=a||u;(this._supportsNamedGraphs=!(n||l))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||i||a||l),this._supportsRDFStar=r===""||/star|\*$/.test(r),p&&(this._resolveRelativeIRI=_=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new ho({lineMode:p,n3:l}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){Cn=0}_setBase(e){if(!e)this._base="",this._basePath="";else{const r=e.indexOf("#");r>=0&&(e=e.substr(0,r)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,r,n,i,a){const u=this._n3Mode;this._contextStack.push({type:e,subject:n,predicate:i,object:a,graph:r,inverse:u?this._inversePredicate:!1,blankPrefix:u?this._prefixes._:"",quantified:u?this._quantified:null}),u&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,r){const n=this._contextStack.pop();if(!n||n.type!==e)return this._error(`Unexpected ${r.type}`,r);this._subject=n.subject,this._predicate=n.predicate,this._object=n.object,this._graph=n.graph,this._n3Mode&&(this._inversePredicate=n.inverse,this._prefixes._=n.blankPrefix,this._quantified=n.quantified)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,r){let n;switch(e.type){case"IRI":case"typeIRI":const i=this._resolveIRI(e.value);if(i===null)return this._error("Invalid IRI",e);n=this._namedNode(i);break;case"type":case"prefixed":const a=this._prefixes[e.prefix];if(a===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);n=this._namedNode(a+e.value);break;case"blank":n=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":n=this._variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!r&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const r=e.type;switch(r){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${r}`,e):(this._subject=null,r==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return e.type==="]"?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const r=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:r?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let r=null,n=null,i=this._readListItem;const a=this._subject,u=this._contextStack,l=u[u.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,n=this._blankNode(),this.RDF_FIRST,this._subject=r=this._blankNode()),i=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),u.length!==0&&u[u.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(i=this._readPredicate,this._subject===this.RDF_NIL)return i}else if(i=this._getContextEndReader(),this._object===this.RDF_NIL)return i;n=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,i=this._readListItemDataTypeOrLang):(r=this._literal(e.value,this._namedNode(e.prefix)),i=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if((r=this._readEntity(e))===void 0)return}if(n===null&&(this._subject=n=this._blankNode()),a===null?l.predicate===null?l.subject=n:l.object=n:this._emit(a,this.RDF_REST,n,this._graph),r!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,n,this.RDF_FIRST,r),this._subject=r,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,r,this._graph)}return i}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let r=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const n=this._readEntity(e);if(n===void 0)return;r=this._literal(this._literalValue,n),e=null;break;case"langcode":r=this._literal(this._literalValue,e.value),e=null;break}return{token:e,literal:r}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,r){const n=this._completeLiteral(e);if(n)return this._object=n.literal,r&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),n.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(n.token))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let r,n=this._graph;const i=this._subject,a=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,r=this._contextStack.length?this._readSubject:this._readInTopContext,a&&(this._inversePredicate=!1);break;case";":r=this._readPredicate;break;case",":r=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);const u=this._predicate,l=this._object;this._subject=this._quad(i,u,l,this.DEFAULTGRAPH),r=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",e);this._subject=null,r=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(n=this._readEntity(e))!==void 0){r=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(i!==null){const u=this._predicate,l=this._object;a?this._emit(l,u,i,n):this._emit(i,u,l,n)}return r}_readBlankNodePunctuation(e){let r;switch(e.type){case";":r=this._readPredicate;break;case",":r=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),r}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const r=this._readEntity(e);return this._prefixes[this._prefix]=r.value,this._prefixCallback(this._prefix,r),this._readDeclarationPunctuation}_readBaseIRI(e){const r=e.type==="IRI"&&this._resolveIRI(e.value);return r?(this._setBase(r),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let r;switch(e.type){case"IRI":case"prefixed":if((r=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,r,this.QUANTIFIERS_GRAPH)):this._quantified[r.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const r=this._contextStack,n=r.length&&r[r.length-1];if(n&&n.type==="item"){const i=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,i,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let r,n;const i=this._blankNode();if((n=this._readEntity(e))!==void 0)return this._predicate===null?(r=this._subject,this._subject=i):(r=this._object,this._object=i),this._emit(r,n,i,this._graph),this._readPath}_readBackwardPath(e){const r=this._blankNode();let n,i;if((n=this._readEntity(e))!==void 0)return this._predicate===null?(i=this._subject,this._subject=r):(i=this._object,this._object=r),this._emit(r,n,i,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return e.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(e))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);const r=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),this._subject===null?(this._subject=r,this._readPredicate):(this._object=r,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,r,n,i){this._callback(null,this._quad(e,r,n,i||this.DEFAULTGRAPH))}_error(e,r){const n=new Error(`${e} on line ${r.line}.`);n.context={token:r,line:r.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=Ar}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const r=e.length;let n="",i=-1,a=-1,u=0,l="/";for(;i<r;){switch(l){case":":if(a<0&&e[++i]==="/"&&e[++i]==="/")for(;(a=i+1)<r&&e[a]!=="/";)i=a;break;case"?":case"#":i=r;break;case"/":if(e[i+1]===".")switch(l=e[++i+1],l){case"/":n+=e.substring(u,i-1),u=i+1;break;case void 0:case"?":case"#":return n+e.substring(u,i)+e.substr(i+1);case".":if(l=e[++i+1],l===void 0||l==="/"||l==="?"||l==="#"){if(n+=e.substring(u,i-2),(u=n.lastIndexOf("/"))>=a&&(n=n.substr(0,u)),l!=="/")return`${n}/${e.substr(i+1)}`;u=i+1}}}l=e[++i]}return n+e.substring(u)}parse(e,r,n){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${Cn++}_`,this._prefixCallback=n||Ar,this._inversePredicate=!1,this._quantified=Object.create(null),!r){const i=[];let a;if(this._callback=(u,l)=>{u?a=u:l&&i.push(l)},this._lexer.tokenize(e).every(u=>this._readCallback=this._readCallback(u)),a)throw a;return i}this._callback=r,this._lexer.tokenize(e,(i,a)=>{i!==null?(this._callback(i),this._callback=Ar):this._readCallback&&(this._readCallback=this._readCallback(a))})}}function Ar(){}function On(t,e){const r=e.namedNode;t._namedNode=r,t._blankNode=e.blankNode,t._literal=e.literal,t._variable=e.variable,t._quad=e.quad,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=r(_e.rdf.first),t.RDF_REST=r(_e.rdf.rest),t.RDF_NIL=r(_e.rdf.nil),t.N3_FORALL=r(_e.r.forAll),t.N3_FORSOME=r(_e.r.forSome),t.ABBREVIATIONS={a:r(_e.rdf.type),"=":r(_e.owl.sameAs),">":r(_e.log.implies)},t.QUANTIFIERS_GRAPH=r("urn:n3:quantifiers")}On(kn.prototype,Nt);function Tr(t){return!!t&&t.termType==="DefaultGraph"}const $t=Nt.defaultGraph(),{rdf:Ro,xsd:gt}=_e,Dn=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,Mn=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,Ao={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class jt extends Fe{equals(e){return e===this}}class Un{constructor(e,r){if(this._prefixRegex=/$0^/,e&&typeof e.write!="function"&&(r=e,e=null),r=r||{},this._lists=r.lists,e)this._outputStream=e,this._endStream=r.end===void 0?!0:!!r.end;else{let n="";this._outputStream={write(i,a,u){n+=i,u&&u()},end:i=>{i&&i(null,n)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(r.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=$t,this._prefixIRIs=Object.create(null),r.prefixes&&this.addPrefixes(r.prefixes),r.baseIRI&&(this._baseMatcher=new RegExp(`^${Gn(r.baseIRI)}${r.baseIRI.endsWith("/")?"":"[#?]"}`),this._baseLength=r.baseIRI.length))}get _inDefaultGraph(){return $t.equals(this._graph)}_write(e,r){this._outputStream.write(e,"utf8",r)}_writeQuad(e,r,n,i,a){try{i.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+($t.equals(i)?"":`${this._encodeIriOrBlank(i)} {
`)),this._graph=i,this._subject=null),e.equals(this._subject)?r.equals(this._predicate)?this._write(`, ${this._encodeObject(n)}`,a):this._write(`;
    ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,a):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,a)}catch(u){a&&a(u)}}_writeQuadLine(e,r,n,i,a){delete this._prefixMatch,this._write(this.quadToString(e,r,n,i),a)}quadToString(e,r,n,i){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(r)} ${this._encodeObject(n)}${i&&i.value?` ${this._encodeIriOrBlank(i)} .
`:` .
`}`}quadsToString(e){let r="";for(const n of e)r+=this.quadToString(n.subject,n.predicate,n.object,n.graph);return r}_encodeSubject(e){return e.termType==="Quad"?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if(e.termType!=="NamedNode")return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let r=e.value;this._baseMatcher&&this._baseMatcher.test(r)&&(r=r.substr(this._baseLength)),Dn.test(r)&&(r=r.replace(Mn,Wn));const n=this._prefixRegex.exec(r);return n?n[1]?this._prefixIRIs[n[1]]+n[2]:r:`<${r}>`}_encodeLiteral(e){let r=e.value;if(Dn.test(r)&&(r=r.replace(Mn,Wn)),e.language)return`"${r}"@${e.language}`;if(this._lineMode){if(e.datatype.value===gt.string)return`"${r}"`}else switch(e.datatype.value){case gt.string:return`"${r}"`;case gt.boolean:if(r==="true"||r==="false")return r;break;case gt.integer:if(/^[+-]?\d+$/.test(r))return r;break;case gt.decimal:if(/^[+-]?\d*\.\d+$/.test(r))return r;break;case gt.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(r))return r;break}return`"${r}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===Ro.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:r,object:n,graph:i}){return`<<${this._encodeSubject(e)} ${this._encodePredicate(r)} ${this._encodeObject(n)}${Tr(i)?"":` ${this._encodeIriOrBlank(i)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,r,n,i,a){n===void 0?this._writeQuad(e.subject,e.predicate,e.object,e.graph,r):typeof i=="function"?this._writeQuad(e,r,n,$t,i):this._writeQuad(e,r,n,i||$t,a)}addQuads(e){for(let r=0;r<e.length;r++)this.addQuad(e[r])}addPrefix(e,r,n){const i={};i[e]=r,this.addPrefixes(i,n)}addPrefixes(e,r){if(!this._prefixIRIs)return r&&r();let n=!1;for(let i in e){let a=e[i];typeof a!="string"&&(a=a.value),n=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[a]=i+=":",this._write(`@prefix ${i} <${a}>.
`)}if(n){let i="",a="";for(const u in this._prefixIRIs)i+=i?`|${u}`:u,a+=(a?"|":"")+this._prefixIRIs[u];i=Gn(i),this._prefixRegex=new RegExp(`^(?:${a})[^/]*$|^(${i})([_a-zA-Z][\\-_a-zA-Z0-9]*)$`)}this._write(n?`
`:"",r)}blank(e,r){let n=e,i,a;switch(e===void 0?n=[]:e.termType?n=[{predicate:e,object:r}]:"length"in e||(n=[e]),a=n.length){case 0:return new jt("[]");case 1:if(i=n[0],!(i.object instanceof jt))return new jt(`[ ${this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)} ]`);default:let u="[";for(let l=0;l<a;l++)i=n[l],i.predicate.equals(e)?u+=`, ${this._encodeObject(i.object)}`:(u+=`${(l?`;
  `:`
  `)+this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)}`,e=i.predicate);return new jt(`${u}
]`)}}list(e){const r=e&&e.length||0,n=new Array(r);for(let i=0;i<r;i++)n[i]=this._encodeObject(e[i]);return new jt(`(${n.join(" ")})`)}end(e){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let r=e&&((n,i)=>{r=null,e(n,i)});if(this._endStream)try{return this._outputStream.end(r)}catch{}r&&r()}}function Wn(t){let e=Ao[t];return e===void 0&&(t.length===1?(e=t.charCodeAt(0).toString(16),e="\\u0000".substr(0,6-e.length)+e):(e=((t.charCodeAt(0)-55296)*1024+t.charCodeAt(1)+9216).toString(16),e="\\U00000000".substr(0,10-e.length)+e)),e}function Gn(t){return t.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}var qn={exports:{}},vr={exports:{}},ce={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Boolean,Uint8Array},zn={exports:{}},Lt={exports:{}},Hn;function Ft(){if(Hn)return Lt.exports;Hn=1;const{AbortController:t,AbortSignal:e}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Lt.exports=t,Lt.exports.AbortSignal=e,Lt.exports.default=t,Lt.exports}var Nr={exports:{}},yt=typeof Reflect=="object"?Reflect:null,Qn=yt&&typeof yt.apply=="function"?yt.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},zt;yt&&typeof yt.ownKeys=="function"?zt=yt.ownKeys:Object.getOwnPropertySymbols?zt=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:zt=function(e){return Object.getOwnPropertyNames(e)};function To(t){console&&console.warn&&console.warn(t)}var Vn=Number.isNaN||function(e){return e!==e};function X(){X.init.call(this)}Nr.exports=X,Nr.exports.once=$o,X.EventEmitter=X,X.prototype._events=void 0,X.prototype._eventsCount=0,X.prototype._maxListeners=void 0;var Kn=10;function Ht(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(X,"defaultMaxListeners",{enumerable:!0,get:function(){return Kn},set:function(t){if(typeof t!="number"||t<0||Vn(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Kn=t}}),X.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},X.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Vn(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Yn(t){return t._maxListeners===void 0?X.defaultMaxListeners:t._maxListeners}X.prototype.getMaxListeners=function(){return Yn(this)},X.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",a=this._events;if(a!==void 0)i=i&&a.error===void 0;else if(!i)return!1;if(i){var u;if(r.length>0&&(u=r[0]),u instanceof Error)throw u;var l=new Error("Unhandled error."+(u?" ("+u.message+")":""));throw l.context=u,l}var p=a[e];if(p===void 0)return!1;if(typeof p=="function")Qn(p,this,r);else for(var _=p.length,m=ti(p,_),n=0;n<_;++n)Qn(m[n],this,r);return!0};function Xn(t,e,r,n){var i,a,u;if(Ht(r),a=t._events,a===void 0?(a=t._events=Object.create(null),t._eventsCount=0):(a.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),a=t._events),u=a[e]),u===void 0)u=a[e]=r,++t._eventsCount;else if(typeof u=="function"?u=a[e]=n?[r,u]:[u,r]:n?u.unshift(r):u.push(r),i=Yn(t),i>0&&u.length>i&&!u.warned){u.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=u.length,To(l)}return t}X.prototype.addListener=function(e,r){return Xn(this,e,r,!1)},X.prototype.on=X.prototype.addListener,X.prototype.prependListener=function(e,r){return Xn(this,e,r,!0)};function vo(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Zn(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=vo.bind(n);return i.listener=r,n.wrapFn=i,i}X.prototype.once=function(e,r){return Ht(r),this.on(e,Zn(this,e,r)),this},X.prototype.prependOnceListener=function(e,r){return Ht(r),this.prependListener(e,Zn(this,e,r)),this},X.prototype.removeListener=function(e,r){var n,i,a,u,l;if(Ht(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(a=-1,u=n.length-1;u>=0;u--)if(n[u]===r||n[u].listener===r){l=n[u].listener,a=u;break}if(a<0)return this;a===0?n.shift():No(n,a),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,l||r)}return this},X.prototype.off=X.prototype.removeListener,X.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var a=Object.keys(n),u;for(i=0;i<a.length;++i)u=a[i],u!=="removeListener"&&this.removeAllListeners(u);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function Jn(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?Po(i):ti(i,i.length)}X.prototype.listeners=function(e){return Jn(this,e,!0)},X.prototype.rawListeners=function(e){return Jn(this,e,!1)},X.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):ei.call(t,e)},X.prototype.listenerCount=ei;function ei(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}X.prototype.eventNames=function(){return this._eventsCount>0?zt(this._events):[]};function ti(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function No(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Po(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function $o(t,e){return new Promise(function(r,n){function i(u){t.removeListener(e,a),n(u)}function a(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}ri(t,e,a,{once:!0}),e!=="error"&&jo(t,i,{once:!0})})}function jo(t,e,r){typeof t.on=="function"&&ri(t,"error",e,r)}function ri(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(a){n.once&&t.removeEventListener(e,i),r(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Qt=Nr.exports;(function(t){const e=je,{kResistStopPropagation:r,SymbolDispose:n}=ce,i=globalThis.AbortSignal||Ft().AbortSignal,a=globalThis.AbortController||Ft().AbortController,u=Object.getPrototypeOf(async function(){}).constructor,l=globalThis.Blob||e.Blob,p=typeof l<"u"?function(y){return y instanceof l}:function(y){return!1},_=(E,y)=>{if(E!==void 0&&(E===null||typeof E!="object"||!("aborted"in E)))throw new ERR_INVALID_ARG_TYPE(y,"AbortSignal",E)},m=(E,y)=>{if(typeof E!="function")throw new ERR_INVALID_ARG_TYPE(y,"Function",E)};class S extends Error{constructor(y){if(!Array.isArray(y))throw new TypeError(`Expected input to be an Array, got ${typeof y}`);let R="";for(let I=0;I<y.length;I++)R+=`    ${y[I].stack}
`;super(R),this.name="AggregateError",this.errors=y}}t.exports={AggregateError:S,kEmptyObject:Object.freeze({}),once(E){let y=!1;return function(...R){y||(y=!0,E.apply(this,R))}},createDeferredPromise:function(){let E,y;return{promise:new Promise((I,N)=>{E=I,y=N}),resolve:E,reject:y}},promisify(E){return new Promise((y,R)=>{E((I,...N)=>I?R(I):y(...N))})},debuglog(){return function(){}},format(E,...y){return E.replace(/%([sdifj])/g,function(...[R,I]){const N=y.shift();return I==="f"?N.toFixed(6):I==="j"?JSON.stringify(N):I==="s"&&typeof N=="object"?`${N.constructor!==Object?N.constructor.name:""} {}`.trim():N.toString()})},inspect(E){switch(typeof E){case"string":if(E.includes("'"))if(E.includes('"')){if(!E.includes("`")&&!E.includes("${"))return`\`${E}\``}else return`"${E}"`;return`'${E}'`;case"number":return isNaN(E)?"NaN":Object.is(E,-0)?String(E):E;case"bigint":return`${String(E)}n`;case"boolean":case"undefined":return String(E);case"object":return"{}"}},types:{isAsyncFunction(E){return E instanceof u},isArrayBufferView(E){return ArrayBuffer.isView(E)}},isBlob:p,deprecate(E,y){return E},addAbortListener:Qt.addAbortListener||function(y,R){if(y===void 0)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",y);_(y,"signal"),m(R,"listener");let I;return y.aborted?queueMicrotask(()=>R()):(y.addEventListener("abort",R,{__proto__:null,once:!0,[r]:!0}),I=()=>{y.removeEventListener("abort",R)}),{__proto__:null,[n](){var N;(N=I)===null||N===void 0||N()}}},AbortSignalAny:i.any||function(y){if(y.length===1)return y[0];const R=new a,I=()=>R.abort();return y.forEach(N=>{_(N,"signals"),N.addEventListener("abort",I,{once:!0})}),R.signal.addEventListener("abort",()=>{y.forEach(N=>N.removeEventListener("abort",I))},{once:!0}),R.signal}},t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(zn);var me=zn.exports,Pr={};const{format:Lo,inspect:Vt,AggregateError:Fo}=me,Bo=globalThis.AggregateError||Fo,Co=Symbol("kIsNodeError"),ko=["string","function","number","object","Function","Object","boolean","bigint","symbol"],Oo=/^([A-Z][a-z0-9]*)+$/,Do="__node_internal_",Kt={};function rt(t,e){if(!t)throw new Kt.ERR_INTERNAL_ASSERTION(e)}function ni(t){let e="",r=t.length;const n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function Mo(t,e,r){if(typeof e=="function")return rt(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);const n=(e.match(/%[dfijoOs]/g)||[]).length;return rt(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:Lo(e,...r)}function pe(t,e,r){r||(r=Error);class n extends r{constructor(...a){super(Mo(t,e,a))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[Co]=!0,Kt[t]=n}function ii(t){const e=Do+t.name;return Object.defineProperty(t,"name",{value:e}),t}function Uo(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;const r=new Bo([e,t],e.message);return r.code=e.code,r}return t||e}let Wo=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new Kt.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};pe("ERR_ASSERTION","%s",Error),pe("ERR_INVALID_ARG_TYPE",(t,e,r)=>{rt(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";const i=[],a=[],u=[];for(const p of e)rt(typeof p=="string","All expected entries have to be of type string"),ko.includes(p)?i.push(p.toLowerCase()):Oo.test(p)?a.push(p):(rt(p!=="object",'The value "object" should be written as "Object"'),u.push(p));if(a.length>0){const p=i.indexOf("object");p!==-1&&(i.splice(i,p,1),a.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{const p=i.pop();n+=`one of type ${i.join(", ")}, or ${p}`}}(a.length>0||u.length>0)&&(n+=" or ")}if(a.length>0){switch(a.length){case 1:n+=`an instance of ${a[0]}`;break;case 2:n+=`an instance of ${a[0]} or ${a[1]}`;break;default:{const p=a.pop();n+=`an instance of ${a.join(", ")}, or ${p}`}}u.length>0&&(n+=" or ")}switch(u.length){case 0:break;case 1:u[0].toLowerCase()!==u[0]&&(n+="an "),n+=`${u[0]}`;break;case 2:n+=`one of ${u[0]} or ${u[1]}`;break;default:{const p=u.pop();n+=`one of ${u.join(", ")}, or ${p}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var l;if((l=r.constructor)!==null&&l!==void 0&&l.name)n+=`. Received an instance of ${r.constructor.name}`;else{const p=Vt(r,{depth:-1});n+=`. Received ${p}`}}else{let p=Vt(r,{colors:!1});p.length>25&&(p=`${p.slice(0,25)}...`),n+=`. Received type ${typeof r} (${p})`}return n},TypeError),pe("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=Vt(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError),pe("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;const i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError),pe("ERR_MISSING_ARGS",(...t)=>{rt(t.length>0,"At least one arg needs to be specified");let e;const r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{const n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError),pe("ERR_OUT_OF_RANGE",(t,e,r)=>{rt(e,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=ni(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=ni(n)),n+="n"):n=Vt(r),`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError),pe("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),pe("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),pe("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),pe("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),pe("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),pe("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),pe("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),pe("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),pe("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),pe("ERR_STREAM_WRITE_AFTER_END","write after end",Error),pe("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var xe={AbortError:Wo,aggregateTwoErrors:ii(Uo),hideStackFrames:ii,codes:Kt};const{ArrayIsArray:$r,ArrayPrototypeIncludes:si,ArrayPrototypeJoin:oi,ArrayPrototypeMap:Go,NumberIsInteger:jr,NumberIsNaN:qo,NumberMAX_SAFE_INTEGER:zo,NumberMIN_SAFE_INTEGER:Ho,NumberParseInt:Qo,ObjectPrototypeHasOwnProperty:Vo,RegExpPrototypeExec:ai,String:Ko,StringPrototypeToUpperCase:Yo,StringPrototypeTrim:Xo}=ce,{hideStackFrames:ve,codes:{ERR_SOCKET_BAD_PORT:Zo,ERR_INVALID_ARG_TYPE:be,ERR_INVALID_ARG_VALUE:wt,ERR_OUT_OF_RANGE:nt,ERR_UNKNOWN_SIGNAL:li}}=xe,{normalizeEncoding:Jo}=me,{isAsyncFunction:ea,isArrayBufferView:ta}=me.types,ui={};function ra(t){return t===(t|0)}function na(t){return t===t>>>0}const ia=/^[0-7]+$/,sa="must be a 32-bit unsigned integer or an octal string";function oa(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(ai(ia,t)===null)throw new wt(e,t,sa);t=Qo(t,8)}return fi(t,e),t}const aa=ve((t,e,r=Ho,n=zo)=>{if(typeof t!="number")throw new be(e,"number",t);if(!jr(t))throw new nt(e,"an integer",t);if(t<r||t>n)throw new nt(e,`>= ${r} && <= ${n}`,t)}),la=ve((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new be(e,"number",t);if(!jr(t))throw new nt(e,"an integer",t);if(t<r||t>n)throw new nt(e,`>= ${r} && <= ${n}`,t)}),fi=ve((t,e,r=!1)=>{if(typeof t!="number")throw new be(e,"number",t);if(!jr(t))throw new nt(e,"an integer",t);const n=r?1:0,i=4294967295;if(t<n||t>i)throw new nt(e,`>= ${n} && <= ${i}`,t)});function Lr(t,e){if(typeof t!="string")throw new be(e,"string",t)}function ua(t,e,r=void 0,n){if(typeof t!="number")throw new be(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&qo(t))throw new nt(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}const fa=ve((t,e,r)=>{if(!si(r,t)){const i="must be one of: "+oi(Go(r,a=>typeof a=="string"?`'${a}'`:Ko(a)),", ");throw new wt(e,t,i)}});function ci(t,e){if(typeof t!="boolean")throw new be(e,"boolean",t)}function Fr(t,e,r){return t==null||!Vo(t,e)?r:t[e]}const ca=ve((t,e,r=null)=>{const n=Fr(r,"allowArray",!1),i=Fr(r,"allowFunction",!1);if(!Fr(r,"nullable",!1)&&t===null||!n&&$r(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new be(e,"Object",t)}),da=ve((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new be(e,"a dictionary",t)}),Yt=ve((t,e,r=0)=>{if(!$r(t))throw new be(e,"Array",t);if(t.length<r){const n=`must be longer than ${r}`;throw new wt(e,t,n)}});function ha(t,e){Yt(t,e);for(let r=0;r<t.length;r++)Lr(t[r],`${e}[${r}]`)}function pa(t,e){Yt(t,e);for(let r=0;r<t.length;r++)ci(t[r],`${e}[${r}]`)}function _a(t,e){Yt(t,e);for(let r=0;r<t.length;r++){const n=t[r],i=`${e}[${r}]`;if(n==null)throw new be(i,"AbortSignal",n);di(n,i)}}function ba(t,e="signal"){if(Lr(t,e),ui[t]===void 0)throw ui[Yo(t)]!==void 0?new li(t+" (signals must use all capital letters)"):new li(t)}const ga=ve((t,e="buffer")=>{if(!ta(t))throw new be(e,["Buffer","TypedArray","DataView"],t)});function ya(t,e){const r=Jo(e),n=t.length;if(r==="hex"&&n%2!==0)throw new wt("encoding",e,`is invalid for data of length ${n}`)}function wa(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&Xo(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new Zo(e,t,r);return t|0}const di=ve((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new be(e,"AbortSignal",t)}),ma=ve((t,e)=>{if(typeof t!="function")throw new be(e,"Function",t)}),Ea=ve((t,e)=>{if(typeof t!="function"||ea(t))throw new be(e,"Function",t)}),xa=ve((t,e)=>{if(t!==void 0)throw new be(e,"undefined",t)});function Sa(t,e,r){if(!si(r,t))throw new be(e,`('${oi(r,"|")}')`,t)}const Ia=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function hi(t,e){if(typeof t>"u"||!ai(Ia,t))throw new wt(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Ra(t){if(typeof t=="string")return hi(t,"hints"),t;if($r(t)){const e=t.length;let r="";if(e===0)return r;for(let n=0;n<e;n++){const i=t[n];hi(i,"hints"),r+=i,n!==e-1&&(r+=", ")}return r}throw new wt("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}var Bt={isInt32:ra,isUint32:na,parseFileMode:oa,validateArray:Yt,validateStringArray:ha,validateBooleanArray:pa,validateAbortSignalArray:_a,validateBoolean:ci,validateBuffer:ga,validateDictionary:da,validateEncoding:ya,validateFunction:ma,validateInt32:la,validateInteger:aa,validateNumber:ua,validateObject:ca,validateOneOf:fa,validatePlainFunction:Ea,validatePort:wa,validateSignalName:ba,validateString:Lr,validateUint32:fi,validateUndefined:xa,validateUnion:Sa,validateAbortSignal:di,validateLinkHeaderValue:Ra},Br={exports:{}},pi={exports:{}},he=pi.exports={},Be,Ce;function Cr(){throw new Error("setTimeout has not been defined")}function kr(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Be=setTimeout:Be=Cr}catch{Be=Cr}try{typeof clearTimeout=="function"?Ce=clearTimeout:Ce=kr}catch{Ce=kr}})();function _i(t){if(Be===setTimeout)return setTimeout(t,0);if((Be===Cr||!Be)&&setTimeout)return Be=setTimeout,setTimeout(t,0);try{return Be(t,0)}catch{try{return Be.call(null,t,0)}catch{return Be.call(this,t,0)}}}function Aa(t){if(Ce===clearTimeout)return clearTimeout(t);if((Ce===kr||!Ce)&&clearTimeout)return Ce=clearTimeout,clearTimeout(t);try{return Ce(t)}catch{try{return Ce.call(null,t)}catch{return Ce.call(this,t)}}}var We=[],mt=!1,it,Xt=-1;function Ta(){!mt||!it||(mt=!1,it.length?We=it.concat(We):Xt=-1,We.length&&bi())}function bi(){if(!mt){var t=_i(Ta);mt=!0;for(var e=We.length;e;){for(it=We,We=[];++Xt<e;)it&&it[Xt].run();Xt=-1,e=We.length}it=null,mt=!1,Aa(t)}}he.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];We.push(new gi(t,e)),We.length===1&&!mt&&_i(bi)};function gi(t,e){this.fun=t,this.array=e}gi.prototype.run=function(){this.fun.apply(null,this.array)},he.title="browser",he.browser=!0,he.env={},he.argv=[],he.version="",he.versions={};function Ge(){}he.on=Ge,he.addListener=Ge,he.once=Ge,he.off=Ge,he.removeListener=Ge,he.removeAllListeners=Ge,he.emit=Ge,he.prependListener=Ge,he.prependOnceListener=Ge,he.listeners=function(t){return[]},he.binding=function(t){throw new Error("process.binding is not supported")},he.cwd=function(){return"/"},he.chdir=function(t){throw new Error("process.chdir is not supported")},he.umask=function(){return 0};var st=pi.exports;const{SymbolAsyncIterator:yi,SymbolIterator:wi,SymbolFor:ot}=ce,mi=ot("nodejs.stream.destroyed"),Ei=ot("nodejs.stream.errored"),Or=ot("nodejs.stream.readable"),Dr=ot("nodejs.stream.writable"),xi=ot("nodejs.stream.disturbed"),va=ot("nodejs.webstream.isClosedPromise"),Na=ot("nodejs.webstream.controllerErrorFunction");function Zt(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function Jt(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function Pa(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function ke(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function Si(t){return!!(t&&!ke(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function Ii(t){return!!(t&&!ke(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function Ri(t){return!!(t&&!ke(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function $a(t){return Si(t)||Ii(t)||Ri(t)}function ja(t,e){return t==null?!1:e===!0?typeof t[yi]=="function":e===!1?typeof t[wi]=="function":typeof t[yi]=="function"||typeof t[wi]=="function"}function er(t){if(!ke(t))return null;const e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[mi]||n!=null&&n.destroyed)}function Ai(t){if(!Jt(t))return null;if(t.writableEnded===!0)return!0;const e=t._writableState;return e!=null&&e.errored?!1:typeof(e==null?void 0:e.ended)!="boolean"?null:e.ended}function La(t,e){if(!Jt(t))return null;if(t.writableFinished===!0)return!0;const r=t._writableState;return r!=null&&r.errored?!1:typeof(r==null?void 0:r.finished)!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function Fa(t){if(!Zt(t))return null;if(t.readableEnded===!0)return!0;const e=t._readableState;return!e||e.errored?!1:typeof(e==null?void 0:e.ended)!="boolean"?null:e.ended}function Ti(t,e){if(!Zt(t))return null;const r=t._readableState;return r!=null&&r.errored?!1:typeof(r==null?void 0:r.endEmitted)!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function vi(t){return t&&t[Or]!=null?t[Or]:typeof(t==null?void 0:t.readable)!="boolean"?null:er(t)?!1:Zt(t)&&t.readable&&!Ti(t)}function Ni(t){return t&&t[Dr]!=null?t[Dr]:typeof(t==null?void 0:t.writable)!="boolean"?null:er(t)?!1:Jt(t)&&t.writable&&!Ai(t)}function Ba(t,e){return ke(t)?er(t)?!0:!((e==null?void 0:e.readable)!==!1&&vi(t)||(e==null?void 0:e.writable)!==!1&&Ni(t)):null}function Ca(t){var e,r;return ke(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function ka(t){var e,r;return ke(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function Oa(t){if(!ke(t))return null;if(typeof t.closed=="boolean")return t.closed;const e=t._writableState,r=t._readableState;return typeof(e==null?void 0:e.closed)=="boolean"||typeof(r==null?void 0:r.closed)=="boolean"?(e==null?void 0:e.closed)||(r==null?void 0:r.closed):typeof t._closed=="boolean"&&Pi(t)?t._closed:null}function Pi(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function $i(t){return typeof t._sent100=="boolean"&&Pi(t)}function Da(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function Ma(t){if(!ke(t))return null;const e=t._writableState,r=t._readableState,n=e||r;return!n&&$i(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function Ua(t){var e;return!!(t&&((e=t[xi])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function Wa(t){var e,r,n,i,a,u,l,p,_,m;return!!(t&&((e=(r=(n=(i=(a=(u=t[Ei])!==null&&u!==void 0?u:t.readableErrored)!==null&&a!==void 0?a:t.writableErrored)!==null&&i!==void 0?i:(l=t._readableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&n!==void 0?n:(p=t._writableState)===null||p===void 0?void 0:p.errorEmitted)!==null&&r!==void 0?r:(_=t._readableState)===null||_===void 0?void 0:_.errored)!==null&&e!==void 0?e:!((m=t._writableState)===null||m===void 0)&&m.errored))}var qe={isDestroyed:er,kIsDestroyed:mi,isDisturbed:Ua,kIsDisturbed:xi,isErrored:Wa,kIsErrored:Ei,isReadable:vi,kIsReadable:Or,kIsClosedPromise:va,kControllerErrorFunction:Na,kIsWritable:Dr,isClosed:Oa,isDuplexNodeStream:Pa,isFinished:Ba,isIterable:ja,isReadableNodeStream:Zt,isReadableStream:Si,isReadableEnded:Fa,isReadableFinished:Ti,isReadableErrored:ka,isNodeStream:ke,isWebStream:$a,isWritable:Ni,isWritableNodeStream:Jt,isWritableStream:Ii,isWritableEnded:Ai,isWritableFinished:La,isWritableErrored:Ca,isServerRequest:Da,isServerResponse:$i,willEmitClose:Ma,isTransformStream:Ri};const Je=st,{AbortError:ji,codes:Ga}=xe,{ERR_INVALID_ARG_TYPE:qa,ERR_STREAM_PREMATURE_CLOSE:Li}=Ga,{kEmptyObject:Mr,once:Ur}=me,{validateAbortSignal:za,validateFunction:Ha,validateObject:Qa,validateBoolean:Va}=Bt,{Promise:Ka,PromisePrototypeThen:Ya,SymbolDispose:Fi}=ce,{isClosed:Xa,isReadable:Bi,isReadableNodeStream:Wr,isReadableStream:Za,isReadableFinished:Ci,isReadableErrored:ki,isWritable:Oi,isWritableNodeStream:Di,isWritableStream:Ja,isWritableFinished:Mi,isWritableErrored:Ui,isNodeStream:el,willEmitClose:tl,kIsClosedPromise:rl}=qe;let Et;function nl(t){return t.setHeader&&typeof t.abort=="function"}const Gr=()=>{};function Wi(t,e,r){var n,i;if(arguments.length===2?(r=e,e=Mr):e==null?e=Mr:Qa(e,"options"),Ha(r,"callback"),za(e.signal,"options.signal"),r=Ur(r),Za(t)||Ja(t))return il(t,e,r);if(!el(t))throw new qa("stream",["ReadableStream","WritableStream","Stream"],t);const a=(n=e.readable)!==null&&n!==void 0?n:Wr(t),u=(i=e.writable)!==null&&i!==void 0?i:Di(t),l=t._writableState,p=t._readableState,_=()=>{t.writable||E()};let m=tl(t)&&Wr(t)===a&&Di(t)===u,S=Mi(t,!1);const E=()=>{S=!0,t.destroyed&&(m=!1),!(m&&(!t.readable||a))&&(!a||y)&&r.call(t)};let y=Ci(t,!1);const R=()=>{y=!0,t.destroyed&&(m=!1),!(m&&(!t.writable||u))&&(!u||S)&&r.call(t)},I=U=>{r.call(t,U)};let N=Xa(t);const C=()=>{N=!0;const U=Ui(t)||ki(t);if(U&&typeof U!="boolean")return r.call(t,U);if(a&&!y&&Wr(t,!0)&&!Ci(t,!1))return r.call(t,new Li);if(u&&!S&&!Mi(t,!1))return r.call(t,new Li);r.call(t)},O=()=>{N=!0;const U=Ui(t)||ki(t);if(U&&typeof U!="boolean")return r.call(t,U);r.call(t)},T=()=>{t.req.on("finish",E)};nl(t)?(t.on("complete",E),m||t.on("abort",C),t.req?T():t.on("request",T)):u&&!l&&(t.on("end",_),t.on("close",_)),!m&&typeof t.aborted=="boolean"&&t.on("aborted",C),t.on("end",R),t.on("finish",E),e.error!==!1&&t.on("error",I),t.on("close",C),N?Je.nextTick(C):l!=null&&l.errorEmitted||p!=null&&p.errorEmitted?m||Je.nextTick(O):(!a&&(!m||Bi(t))&&(S||Oi(t)===!1)||!u&&(!m||Oi(t))&&(y||Bi(t)===!1)||p&&t.req&&t.aborted)&&Je.nextTick(O);const q=()=>{r=Gr,t.removeListener("aborted",C),t.removeListener("complete",E),t.removeListener("abort",C),t.removeListener("request",T),t.req&&t.req.removeListener("finish",E),t.removeListener("end",_),t.removeListener("close",_),t.removeListener("finish",E),t.removeListener("end",R),t.removeListener("error",I),t.removeListener("close",C)};if(e.signal&&!N){const U=()=>{const oe=r;q(),oe.call(t,new ji(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)Je.nextTick(U);else{Et=Et||me.addAbortListener;const oe=Et(e.signal,U),Ee=r;r=Ur((...ee)=>{oe[Fi](),Ee.apply(t,ee)})}}return q}function il(t,e,r){let n=!1,i=Gr;if(e.signal)if(i=()=>{n=!0,r.call(t,new ji(void 0,{cause:e.signal.reason}))},e.signal.aborted)Je.nextTick(i);else{Et=Et||me.addAbortListener;const u=Et(e.signal,i),l=r;r=Ur((...p)=>{u[Fi](),l.apply(t,p)})}const a=(...u)=>{n||Je.nextTick(()=>r.apply(t,u))};return Ya(t[rl].promise,a,a),Gr}function sl(t,e){var r;let n=!1;return e===null&&(e=Mr),(r=e)!==null&&r!==void 0&&r.cleanup&&(Va(e.cleanup,"cleanup"),n=e.cleanup),new Ka((i,a)=>{const u=Wi(t,e,l=>{n&&u(),l?a(l):i()})})}Br.exports=Wi,Br.exports.finished=sl;var et=Br.exports;const Oe=st,{aggregateTwoErrors:ol,codes:{ERR_MULTIPLE_CALLBACK:al},AbortError:ll}=xe,{Symbol:Gi}=ce,{kIsDestroyed:ul,isDestroyed:fl,isFinished:cl,isServerRequest:dl}=qe,qi=Gi("kDestroy"),qr=Gi("kConstruct");function zi(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function hl(t,e){const r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(zi(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?Hi(this,t,e):this.once(qi,function(a){Hi(this,ol(a,t),e)}),this)}function Hi(t,e,r){let n=!1;function i(a){if(n)return;n=!0;const u=t._readableState,l=t._writableState;zi(a,l,u),l&&(l.closed=!0),u&&(u.closed=!0),typeof r=="function"&&r(a),a?Oe.nextTick(pl,t,a):Oe.nextTick(Qi,t)}try{t._destroy(e||null,i)}catch(a){i(a)}}function pl(t,e){zr(t,e),Qi(t)}function Qi(t){const e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function zr(t,e){const r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function _l(){const t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function Hr(t,e,r){const n=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),n&&!n.errored&&(n.errored=e),r?Oe.nextTick(zr,t,e):zr(t,e))}function bl(t,e){if(typeof t._construct!="function")return;const r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(qr,e),!(t.listenerCount(qr)>1)&&Oe.nextTick(gl,t)}function gl(t){let e=!1;function r(n){if(e){Hr(t,n??new al);return}e=!0;const i=t._readableState,a=t._writableState,u=a||i;i&&(i.constructed=!0),a&&(a.constructed=!0),u.destroyed?t.emit(qi,n):n?Hr(t,n,!0):Oe.nextTick(yl,t)}try{t._construct(n=>{Oe.nextTick(r,n)})}catch(n){Oe.nextTick(r,n)}}function yl(t){t.emit(qr)}function Vi(t){return(t==null?void 0:t.setHeader)&&typeof t.abort=="function"}function Ki(t){t.emit("close")}function wl(t,e){t.emit("error",e),Oe.nextTick(Ki,t)}function ml(t,e){!t||fl(t)||(!e&&!cl(t)&&(e=new ll),dl(t)?(t.socket=null,t.destroy(e)):Vi(t)?t.abort():Vi(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?Oe.nextTick(wl,t,e):Oe.nextTick(Ki,t),t.destroyed||(t[ul]=!0))}var xt={construct:bl,destroyer:ml,destroy:hl,undestroy:_l,errorOrDestroy:Hr};const{ArrayIsArray:El,ObjectSetPrototypeOf:Yi}=ce,{EventEmitter:tr}=Qt;function rr(t){tr.call(this,t)}Yi(rr.prototype,tr.prototype),Yi(rr,tr),rr.prototype.pipe=function(t,e){const r=this;function n(m){t.writable&&t.write(m)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",u),r.on("close",l));let a=!1;function u(){a||(a=!0,t.end())}function l(){a||(a=!0,typeof t.destroy=="function"&&t.destroy())}function p(m){_(),tr.listenerCount(this,"error")===0&&this.emit("error",m)}Qr(r,"error",p),Qr(t,"error",p);function _(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",u),r.removeListener("close",l),r.removeListener("error",p),t.removeListener("error",p),r.removeListener("end",_),r.removeListener("close",_),t.removeListener("close",_)}return r.on("end",_),r.on("close",_),t.on("close",_),t.emit("pipe",r),t};function Qr(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):El(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}var Vr={Stream:rr,prependListener:Qr},Xi={exports:{}};(function(t){const{SymbolDispose:e}=ce,{AbortError:r,codes:n}=xe,{isNodeStream:i,isWebStream:a,kControllerErrorFunction:u}=qe,l=et,{ERR_INVALID_ARG_TYPE:p}=n;let _;const m=(S,E)=>{if(typeof S!="object"||!("aborted"in S))throw new p(E,"AbortSignal",S)};t.exports.addAbortSignal=function(E,y){if(m(E,"signal"),!i(y)&&!a(y))throw new p("stream",["ReadableStream","WritableStream","Stream"],y);return t.exports.addAbortSignalNoValidate(E,y)},t.exports.addAbortSignalNoValidate=function(S,E){if(typeof S!="object"||!("aborted"in S))return E;const y=i(E)?()=>{E.destroy(new r(void 0,{cause:S.reason}))}:()=>{E[u](new r(void 0,{cause:S.reason}))};if(S.aborted)y();else{_=_||me.addAbortListener;const R=_(S,y);l(E,R[e])}return E}})(Xi);var nr=Xi.exports;const{StringPrototypeSlice:Zi,SymbolIterator:xl,TypedArrayPrototypeSet:ir,Uint8Array:Sl}=ce,{Buffer:Kr}=je,{inspect:Il}=me;var Rl=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){const r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;const e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return Kr.alloc(0);const r=Kr.allocUnsafe(e>>>0);let n=this.head,i=0;for(;n;)ir(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(e,r){const n=this.head.data;if(e<n.length){const i=n.slice(0,e);return this.head.data=n.slice(e),i}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[xl](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,i=0;do{const a=n.data;if(e>a.length)r+=a,e-=a.length;else{e===a.length?(r+=a,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=Zi(a,0,e),this.head=n,n.data=Zi(a,e));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(e){const r=Kr.allocUnsafe(e),n=e;let i=this.head,a=0;do{const u=i.data;if(e>u.length)ir(r,u,n-e),e-=u.length;else{e===u.length?(ir(r,u,n-e),++a,i.next?this.head=i.next:this.head=this.tail=null):(ir(r,new Sl(u.buffer,u.byteOffset,e),n-e),this.head=i,i.data=u.slice(e));break}++a}while((i=i.next)!==null);return this.length-=a,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return Il(this,{...r,depth:0,customInspect:!1})}};const{MathFloor:Al,NumberIsInteger:Tl}=ce,{validateInteger:vl}=Bt,{ERR_INVALID_ARG_VALUE:Nl}=xe.codes;let Ji=16*1024,es=16;function Pl(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function ts(t){return t?es:Ji}function $l(t,e){vl(e,"value",0),t?es=e:Ji=e}function jl(t,e,r,n){const i=Pl(e,n,r);if(i!=null){if(!Tl(i)||i<0){const a=n?`options.${r}`:"options.highWaterMark";throw new Nl(a,i)}return Al(i)}return ts(t.objectMode)}var sr={getHighWaterMark:jl,getDefaultHighWaterMark:ts,setDefaultHighWaterMark:$l},rs={},Yr={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=je,n=r.Buffer;function i(u,l){for(var p in u)l[p]=u[p]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=a);function a(u,l,p){return n(u,l,p)}a.prototype=Object.create(n.prototype),i(n,a),a.from=function(u,l,p){if(typeof u=="number")throw new TypeError("Argument must not be a number");return n(u,l,p)},a.alloc=function(u,l,p){if(typeof u!="number")throw new TypeError("Argument must be a number");var _=n(u);return l!==void 0?typeof p=="string"?_.fill(l,p):_.fill(l):_.fill(0),_},a.allocUnsafe=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return n(u)},a.allocUnsafeSlow=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(u)}})(Yr,Yr.exports);var Ll=Yr.exports,Xr=Ll.Buffer,ns=Xr.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Fl(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function Bl(t){var e=Fl(t);if(typeof e!="string"&&(Xr.isEncoding===ns||!ns(t)))throw new Error("Unknown encoding: "+t);return e||t}rs.StringDecoder=Ct;function Ct(t){this.encoding=Bl(t);var e;switch(this.encoding){case"utf16le":this.text=Ul,this.end=Wl,e=4;break;case"utf8":this.fillLast=Ol,e=4;break;case"base64":this.text=Gl,this.end=ql,e=3;break;default:this.write=zl,this.end=Hl;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Xr.allocUnsafe(e)}Ct.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},Ct.prototype.end=Ml,Ct.prototype.text=Dl,Ct.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function Zr(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function Cl(t,e,r){var n=e.length-1;if(n<r)return 0;var i=Zr(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=Zr(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=Zr(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function kl(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"�"}}function Ol(t){var e=this.lastTotal-this.lastNeed,r=kl(this,t);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function Dl(t,e){var r=Cl(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function Ml(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e}function Ul(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function Wl(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function Gl(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function ql(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function zl(t){return t.toString(this.encoding)}function Hl(t){return t&&t.length?this.write(t):""}const is=st,{PromisePrototypeThen:Ql,SymbolAsyncIterator:ss,SymbolIterator:os}=ce,{Buffer:Vl}=je,{ERR_INVALID_ARG_TYPE:Kl,ERR_STREAM_NULL_VALUES:Yl}=xe.codes;function Xl(t,e,r){let n;if(typeof e=="string"||e instanceof Vl)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let i;if(e&&e[ss])i=!0,n=e[ss]();else if(e&&e[os])i=!1,n=e[os]();else throw new Kl("iterable",["Iterable"],e);const a=new t({objectMode:!0,highWaterMark:1,...r});let u=!1;a._read=function(){u||(u=!0,p())},a._destroy=function(_,m){Ql(l(_),()=>is.nextTick(m,_),S=>is.nextTick(m,S||_))};async function l(_){const m=_!=null,S=typeof n.throw=="function";if(m&&S){const{value:E,done:y}=await n.throw(_);if(await E,y)return}if(typeof n.return=="function"){const{value:E}=await n.return();await E}}async function p(){for(;;){try{const{value:_,done:m}=i?await n.next():n.next();if(m)a.push(null);else{const S=_&&typeof _.then=="function"?await _:_;if(S===null)throw u=!1,new Yl;if(a.push(S))continue;u=!1}}catch(_){a.destroy(_)}break}}return a}var as=Xl,Jr,ls;function or(){if(ls)return Jr;ls=1;const t=st,{ArrayPrototypeIndexOf:e,NumberIsInteger:r,NumberIsNaN:n,NumberParseInt:i,ObjectDefineProperties:a,ObjectKeys:u,ObjectSetPrototypeOf:l,Promise:p,SafeSet:_,SymbolAsyncDispose:m,SymbolAsyncIterator:S,Symbol:E}=ce;Jr=k,k.ReadableState=Se;const{EventEmitter:y}=Qt,{Stream:R,prependListener:I}=Vr,{Buffer:N}=je,{addAbortSignal:C}=nr,O=et;let T=me.debuglog("stream",c=>{T=c});const q=Rl,U=xt,{getHighWaterMark:oe,getDefaultHighWaterMark:Ee}=sr,{aggregateTwoErrors:ee,codes:{ERR_INVALID_ARG_TYPE:ae,ERR_METHOD_NOT_IMPLEMENTED:ge,ERR_OUT_OF_RANGE:ye,ERR_STREAM_PUSH_AFTER_EOF:H,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:P},AbortError:K}=xe,{validateObject:G}=Bt,z=E("kPaused"),{StringDecoder:le}=rs,ue=as;l(k.prototype,R.prototype),l(k,R);const re=()=>{},{errorOrDestroy:fe}=U,M=1,ne=2,D=4,de=8,Re=16,Qe=32,Ve=64,Ae=128,Ke=256,Rt=512,ct=1024,Ye=2048,g=4096,w=8192,v=16384,B=32768,L=65536,Z=1<<17,te=1<<18;function Y(c){return{enumerable:!1,get(){return(this.state&c)!==0},set(h){h?this.state|=c:this.state&=~c}}}a(Se.prototype,{objectMode:Y(M),ended:Y(ne),endEmitted:Y(D),reading:Y(de),constructed:Y(Re),sync:Y(Qe),needReadable:Y(Ve),emittedReadable:Y(Ae),readableListening:Y(Ke),resumeScheduled:Y(Rt),errorEmitted:Y(ct),emitClose:Y(Ye),autoDestroy:Y(g),destroyed:Y(w),closed:Y(v),closeEmitted:Y(B),multiAwaitDrain:Y(L),readingMore:Y(Z),dataEmitted:Y(te)});function Se(c,h,$){typeof $!="boolean"&&($=h instanceof ze()),this.state=Ye|g|Re|Qe,c&&c.objectMode&&(this.state|=M),$&&c&&c.readableObjectMode&&(this.state|=M),this.highWaterMark=c?oe(this,c,"readableHighWaterMark",$):Ee(!1),this.buffer=new q,this.length=0,this.pipes=[],this.flowing=null,this[z]=null,c&&c.emitClose===!1&&(this.state&=~Ye),c&&c.autoDestroy===!1&&(this.state&=~g),this.errored=null,this.defaultEncoding=c&&c.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,c&&c.encoding&&(this.decoder=new le(c.encoding),this.encoding=c.encoding)}function k(c){if(!(this instanceof k))return new k(c);const h=this instanceof ze();this._readableState=new Se(c,this,h),c&&(typeof c.read=="function"&&(this._read=c.read),typeof c.destroy=="function"&&(this._destroy=c.destroy),typeof c.construct=="function"&&(this._construct=c.construct),c.signal&&!h&&C(c.signal,this)),R.call(this,c),U.construct(this,()=>{this._readableState.needReadable&&b(this,this._readableState)})}k.prototype.destroy=U.destroy,k.prototype._undestroy=U.undestroy,k.prototype._destroy=function(c,h){h(c)},k.prototype[y.captureRejectionSymbol]=function(c){this.destroy(c)},k.prototype[m]=function(){let c;return this.destroyed||(c=this.readableEnded?null:new K,this.destroy(c)),new p((h,$)=>O(this,j=>j&&j!==c?$(j):h(null)))},k.prototype.push=function(c,h){return Ne(this,c,h,!1)},k.prototype.unshift=function(c,h){return Ne(this,c,h,!0)};function Ne(c,h,$,j){T("readableAddChunk",h);const F=c._readableState;let we;if(F.state&M||(typeof h=="string"?($=$||F.defaultEncoding,F.encoding!==$&&(j&&F.encoding?h=N.from(h,$).toString(F.encoding):(h=N.from(h,$),$=""))):h instanceof N?$="":R._isUint8Array(h)?(h=R._uint8ArrayToBuffer(h),$=""):h!=null&&(we=new ae("chunk",["string","Buffer","Uint8Array"],h))),we)fe(c,we);else if(h===null)F.state&=~de,s(c,F);else if(F.state&M||h&&h.length>0)if(j)if(F.state&D)fe(c,new P);else{if(F.destroyed||F.errored)return!1;Ut(c,F,h,!0)}else if(F.ended)fe(c,new H);else{if(F.destroyed||F.errored)return!1;F.state&=~de,F.decoder&&!$?(h=F.decoder.write(h),F.objectMode||h.length!==0?Ut(c,F,h,!1):b(c,F)):Ut(c,F,h,!1)}else j||(F.state&=~de,b(c,F));return!F.ended&&(F.length<F.highWaterMark||F.length===0)}function Ut(c,h,$,j){h.flowing&&h.length===0&&!h.sync&&c.listenerCount("data")>0?(h.state&L?h.awaitDrainWriters.clear():h.awaitDrainWriters=null,h.dataEmitted=!0,c.emit("data",$)):(h.length+=h.objectMode?1:$.length,j?h.buffer.unshift($):h.buffer.push($),h.state&Ve&&o(c)),b(c,h)}k.prototype.isPaused=function(){const c=this._readableState;return c[z]===!0||c.flowing===!1},k.prototype.setEncoding=function(c){const h=new le(c);this._readableState.decoder=h,this._readableState.encoding=this._readableState.decoder.encoding;const $=this._readableState.buffer;let j="";for(const F of $)j+=h.write(F);return $.clear(),j!==""&&$.push(j),this._readableState.length=j.length,this};const Ue=1073741824;function In(c){if(c>Ue)throw new ye("size","<= 1GiB",c);return c--,c|=c>>>1,c|=c>>>2,c|=c>>>4,c|=c>>>8,c|=c>>>16,c++,c}function f(c,h){return c<=0||h.length===0&&h.ended?0:h.state&M?1:n(c)?h.flowing&&h.length?h.buffer.first().length:h.length:c<=h.length?c:h.ended?h.length:0}k.prototype.read=function(c){T("read",c),c===void 0?c=NaN:r(c)||(c=i(c,10));const h=this._readableState,$=c;if(c>h.highWaterMark&&(h.highWaterMark=In(c)),c!==0&&(h.state&=~Ae),c===0&&h.needReadable&&((h.highWaterMark!==0?h.length>=h.highWaterMark:h.length>0)||h.ended))return T("read: emitReadable",h.length,h.ended),h.length===0&&h.ended?Rn(this):o(this),null;if(c=f(c,h),c===0&&h.ended)return h.length===0&&Rn(this),null;let j=(h.state&Ve)!==0;if(T("need readable",j),(h.length===0||h.length-c<h.highWaterMark)&&(j=!0,T("length less than watermark",j)),h.ended||h.reading||h.destroyed||h.errored||!h.constructed)j=!1,T("reading, ended or constructing",j);else if(j){T("do read"),h.state|=de|Qe,h.length===0&&(h.state|=Ve);try{this._read(h.highWaterMark)}catch(we){fe(this,we)}h.state&=~Qe,h.reading||(c=f($,h))}let F;return c>0?F=qs(c,h):F=null,F===null?(h.needReadable=h.length<=h.highWaterMark,c=0):(h.length-=c,h.multiAwaitDrain?h.awaitDrainWriters.clear():h.awaitDrainWriters=null),h.length===0&&(h.ended||(h.needReadable=!0),$!==c&&h.ended&&Rn(this)),F!==null&&!h.errorEmitted&&!h.closeEmitted&&(h.dataEmitted=!0,this.emit("data",F)),F};function s(c,h){if(T("onEofChunk"),!h.ended){if(h.decoder){const $=h.decoder.end();$&&$.length&&(h.buffer.push($),h.length+=h.objectMode?1:$.length)}h.ended=!0,h.sync?o(c):(h.needReadable=!1,h.emittedReadable=!0,d(c))}}function o(c){const h=c._readableState;T("emitReadable",h.needReadable,h.emittedReadable),h.needReadable=!1,h.emittedReadable||(T("emitReadable",h.flowing),h.emittedReadable=!0,t.nextTick(d,c))}function d(c){const h=c._readableState;T("emitReadable_",h.destroyed,h.length,h.ended),!h.destroyed&&!h.errored&&(h.length||h.ended)&&(c.emit("readable"),h.emittedReadable=!1),h.needReadable=!h.flowing&&!h.ended&&h.length<=h.highWaterMark,V(c)}function b(c,h){!h.readingMore&&h.constructed&&(h.readingMore=!0,t.nextTick(x,c,h))}function x(c,h){for(;!h.reading&&!h.ended&&(h.length<h.highWaterMark||h.flowing&&h.length===0);){const $=h.length;if(T("maybeReadMore read 0"),c.read(0),$===h.length)break}h.readingMore=!1}k.prototype._read=function(c){throw new ge("_read()")},k.prototype.pipe=function(c,h){const $=this,j=this._readableState;j.pipes.length===1&&(j.multiAwaitDrain||(j.multiAwaitDrain=!0,j.awaitDrainWriters=new _(j.awaitDrainWriters?[j.awaitDrainWriters]:[]))),j.pipes.push(c),T("pipe count=%d opts=%j",j.pipes.length,h);const we=(!h||h.end!==!1)&&c!==t.stdout&&c!==t.stderr?Hs:Wt;j.endEmitted?t.nextTick(we):$.once("end",we),c.on("unpipe",Pe);function Pe(ht,Xe){T("onunpipe"),ht===$&&Xe&&Xe.hasUnpiped===!1&&(Xe.hasUnpiped=!0,pf())}function Hs(){T("onend"),c.end()}let dt,Qs=!1;function pf(){T("cleanup"),c.removeListener("close",vn),c.removeListener("finish",Nn),dt&&c.removeListener("drain",dt),c.removeListener("error",Tn),c.removeListener("unpipe",Pe),$.removeListener("end",Hs),$.removeListener("end",Wt),$.removeListener("data",Ks),Qs=!0,dt&&j.awaitDrainWriters&&(!c._writableState||c._writableState.needDrain)&&dt()}function Vs(){Qs||(j.pipes.length===1&&j.pipes[0]===c?(T("false write response, pause",0),j.awaitDrainWriters=c,j.multiAwaitDrain=!1):j.pipes.length>1&&j.pipes.includes(c)&&(T("false write response, pause",j.awaitDrainWriters.size),j.awaitDrainWriters.add(c)),$.pause()),dt||(dt=A($,c),c.on("drain",dt))}$.on("data",Ks);function Ks(ht){T("ondata");const Xe=c.write(ht);T("dest.write",Xe),Xe===!1&&Vs()}function Tn(ht){if(T("onerror",ht),Wt(),c.removeListener("error",Tn),c.listenerCount("error")===0){const Xe=c._writableState||c._readableState;Xe&&!Xe.errorEmitted?fe(c,ht):c.emit("error",ht)}}I(c,"error",Tn);function vn(){c.removeListener("finish",Nn),Wt()}c.once("close",vn);function Nn(){T("onfinish"),c.removeListener("close",vn),Wt()}c.once("finish",Nn);function Wt(){T("unpipe"),$.unpipe(c)}return c.emit("pipe",$),c.writableNeedDrain===!0?Vs():j.flowing||(T("pipe resume"),$.resume()),c};function A(c,h){return function(){const j=c._readableState;j.awaitDrainWriters===h?(T("pipeOnDrain",1),j.awaitDrainWriters=null):j.multiAwaitDrain&&(T("pipeOnDrain",j.awaitDrainWriters.size),j.awaitDrainWriters.delete(h)),(!j.awaitDrainWriters||j.awaitDrainWriters.size===0)&&c.listenerCount("data")&&c.resume()}}k.prototype.unpipe=function(c){const h=this._readableState,$={hasUnpiped:!1};if(h.pipes.length===0)return this;if(!c){const F=h.pipes;h.pipes=[],this.pause();for(let we=0;we<F.length;we++)F[we].emit("unpipe",this,{hasUnpiped:!1});return this}const j=e(h.pipes,c);return j===-1?this:(h.pipes.splice(j,1),h.pipes.length===0&&this.pause(),c.emit("unpipe",this,$),this)},k.prototype.on=function(c,h){const $=R.prototype.on.call(this,c,h),j=this._readableState;return c==="data"?(j.readableListening=this.listenerCount("readable")>0,j.flowing!==!1&&this.resume()):c==="readable"&&!j.endEmitted&&!j.readableListening&&(j.readableListening=j.needReadable=!0,j.flowing=!1,j.emittedReadable=!1,T("on readable",j.length,j.reading),j.length?o(this):j.reading||t.nextTick(ie,this)),$},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function(c,h){const $=R.prototype.removeListener.call(this,c,h);return c==="readable"&&t.nextTick(W,this),$},k.prototype.off=k.prototype.removeListener,k.prototype.removeAllListeners=function(c){const h=R.prototype.removeAllListeners.apply(this,arguments);return(c==="readable"||c===void 0)&&t.nextTick(W,this),h};function W(c){const h=c._readableState;h.readableListening=c.listenerCount("readable")>0,h.resumeScheduled&&h[z]===!1?h.flowing=!0:c.listenerCount("data")>0?c.resume():h.readableListening||(h.flowing=null)}function ie(c){T("readable nexttick read 0"),c.read(0)}k.prototype.resume=function(){const c=this._readableState;return c.flowing||(T("resume"),c.flowing=!c.readableListening,J(this,c)),c[z]=!1,this};function J(c,h){h.resumeScheduled||(h.resumeScheduled=!0,t.nextTick(se,c,h))}function se(c,h){T("resume",h.reading),h.reading||c.read(0),h.resumeScheduled=!1,c.emit("resume"),V(c),h.flowing&&!h.reading&&c.read(0)}k.prototype.pause=function(){return T("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(T("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[z]=!0,this};function V(c){const h=c._readableState;for(T("flow",h.flowing);h.flowing&&c.read()!==null;);}k.prototype.wrap=function(c){let h=!1;c.on("data",j=>{!this.push(j)&&c.pause&&(h=!0,c.pause())}),c.on("end",()=>{this.push(null)}),c.on("error",j=>{fe(this,j)}),c.on("close",()=>{this.destroy()}),c.on("destroy",()=>{this.destroy()}),this._read=()=>{h&&c.resume&&(h=!1,c.resume())};const $=u(c);for(let j=1;j<$.length;j++){const F=$[j];this[F]===void 0&&typeof c[F]=="function"&&(this[F]=c[F].bind(c))}return this},k.prototype[S]=function(){return Gs(this)},k.prototype.iterator=function(c){return c!==void 0&&G(c,"options"),Gs(this,c)};function Gs(c,h){typeof c.read!="function"&&(c=k.wrap(c,{objectMode:!0}));const $=cf(c,h);return $.stream=c,$}async function*cf(c,h){let $=re;function j(Pe){this===c?($(),$=re):$=Pe}c.on("readable",j);let F;const we=O(c,{writable:!1},Pe=>{F=Pe?ee(F,Pe):null,$(),$=re});try{for(;;){const Pe=c.destroyed?null:c.read();if(Pe!==null)yield Pe;else{if(F)throw F;if(F===null)return;await new p(j)}}}catch(Pe){throw F=ee(F,Pe),F}finally{(F||(h==null?void 0:h.destroyOnReturn)!==!1)&&(F===void 0||c._readableState.autoDestroy)?U.destroyer(c,null):(c.off("readable",j),we())}}a(k.prototype,{readable:{__proto__:null,get(){const c=this._readableState;return!!c&&c.readable!==!1&&!c.destroyed&&!c.errorEmitted&&!c.endEmitted},set(c){this._readableState&&(this._readableState.readable=!!c)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(c){this._readableState&&(this._readableState.flowing=c)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(c){this._readableState&&(this._readableState.destroyed=c)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),a(Se.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[z]!==!1},set(c){this[z]=!!c}}}),k._fromList=qs;function qs(c,h){if(h.length===0)return null;let $;return h.objectMode?$=h.buffer.shift():!c||c>=h.length?(h.decoder?$=h.buffer.join(""):h.buffer.length===1?$=h.buffer.first():$=h.buffer.concat(h.length),h.buffer.clear()):$=h.buffer.consume(c,h.decoder),$}function Rn(c){const h=c._readableState;T("endReadable",h.endEmitted),h.endEmitted||(h.ended=!0,t.nextTick(df,h,c))}function df(c,h){if(T("endReadableNT",c.endEmitted,c.length),!c.errored&&!c.closeEmitted&&!c.endEmitted&&c.length===0){if(c.endEmitted=!0,h.emit("end"),h.writable&&h.allowHalfOpen===!1)t.nextTick(hf,h);else if(c.autoDestroy){const $=h._writableState;(!$||$.autoDestroy&&($.finished||$.writable===!1))&&h.destroy()}}}function hf(c){c.writable&&!c.writableEnded&&!c.destroyed&&c.end()}k.from=function(c,h){return ue(k,c,h)};let An;function zs(){return An===void 0&&(An={}),An}return k.fromWeb=function(c,h){return zs().newStreamReadableFromReadableStream(c,h)},k.toWeb=function(c,h){return zs().newReadableStreamFromStreamReadable(c,h)},k.wrap=function(c,h){var $,j;return new k({objectMode:($=(j=c.readableObjectMode)!==null&&j!==void 0?j:c.objectMode)!==null&&$!==void 0?$:!0,...h,destroy(F,we){U.destroyer(c,F),we(F)}}).wrap(c)},Jr}var en,us;function tn(){if(us)return en;us=1;const t=st,{ArrayPrototypeSlice:e,Error:r,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:i,ObjectDefineProperties:a,ObjectSetPrototypeOf:u,StringPrototypeToLowerCase:l,Symbol:p,SymbolHasInstance:_}=ce;en=G,G.WritableState=P;const{EventEmitter:m}=Qt,S=Vr.Stream,{Buffer:E}=je,y=xt,{addAbortSignal:R}=nr,{getHighWaterMark:I,getDefaultHighWaterMark:N}=sr,{ERR_INVALID_ARG_TYPE:C,ERR_METHOD_NOT_IMPLEMENTED:O,ERR_MULTIPLE_CALLBACK:T,ERR_STREAM_CANNOT_PIPE:q,ERR_STREAM_DESTROYED:U,ERR_STREAM_ALREADY_FINISHED:oe,ERR_STREAM_NULL_VALUES:Ee,ERR_STREAM_WRITE_AFTER_END:ee,ERR_UNKNOWN_ENCODING:ae}=xe.codes,{errorOrDestroy:ge}=y;u(G.prototype,S.prototype),u(G,S);function ye(){}const H=p("kOnFinished");function P(g,w,v){typeof v!="boolean"&&(v=w instanceof ze()),this.objectMode=!!(g&&g.objectMode),v&&(this.objectMode=this.objectMode||!!(g&&g.writableObjectMode)),this.highWaterMark=g?I(this,g,"writableHighWaterMark",v):N(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const B=!!(g&&g.decodeStrings===!1);this.decodeStrings=!B,this.defaultEncoding=g&&g.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=fe.bind(void 0,w),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,K(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!g||g.emitClose!==!1,this.autoDestroy=!g||g.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[H]=[]}function K(g){g.buffered=[],g.bufferedIndex=0,g.allBuffers=!0,g.allNoop=!0}P.prototype.getBuffer=function(){return e(this.buffered,this.bufferedIndex)},i(P.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function G(g){const w=this instanceof ze();if(!w&&!n(G,this))return new G(g);this._writableState=new P(g,this,w),g&&(typeof g.write=="function"&&(this._write=g.write),typeof g.writev=="function"&&(this._writev=g.writev),typeof g.destroy=="function"&&(this._destroy=g.destroy),typeof g.final=="function"&&(this._final=g.final),typeof g.construct=="function"&&(this._construct=g.construct),g.signal&&R(g.signal,this)),S.call(this,g),y.construct(this,()=>{const v=this._writableState;v.writing||de(this,v),Ae(this,v)})}i(G,_,{__proto__:null,value:function(g){return n(this,g)?!0:this!==G?!1:g&&g._writableState instanceof P}}),G.prototype.pipe=function(){ge(this,new q)};function z(g,w,v,B){const L=g._writableState;if(typeof v=="function")B=v,v=L.defaultEncoding;else{if(!v)v=L.defaultEncoding;else if(v!=="buffer"&&!E.isEncoding(v))throw new ae(v);typeof B!="function"&&(B=ye)}if(w===null)throw new Ee;if(!L.objectMode)if(typeof w=="string")L.decodeStrings!==!1&&(w=E.from(w,v),v="buffer");else if(w instanceof E)v="buffer";else if(S._isUint8Array(w))w=S._uint8ArrayToBuffer(w),v="buffer";else throw new C("chunk",["string","Buffer","Uint8Array"],w);let Z;return L.ending?Z=new ee:L.destroyed&&(Z=new U("write")),Z?(t.nextTick(B,Z),ge(g,Z,!0),Z):(L.pendingcb++,le(g,L,w,v,B))}G.prototype.write=function(g,w,v){return z(this,g,w,v)===!0},G.prototype.cork=function(){this._writableState.corked++},G.prototype.uncork=function(){const g=this._writableState;g.corked&&(g.corked--,g.writing||de(this,g))},G.prototype.setDefaultEncoding=function(w){if(typeof w=="string"&&(w=l(w)),!E.isEncoding(w))throw new ae(w);return this._writableState.defaultEncoding=w,this};function le(g,w,v,B,L){const Z=w.objectMode?1:v.length;w.length+=Z;const te=w.length<w.highWaterMark;return te||(w.needDrain=!0),w.writing||w.corked||w.errored||!w.constructed?(w.buffered.push({chunk:v,encoding:B,callback:L}),w.allBuffers&&B!=="buffer"&&(w.allBuffers=!1),w.allNoop&&L!==ye&&(w.allNoop=!1)):(w.writelen=Z,w.writecb=L,w.writing=!0,w.sync=!0,g._write(v,B,w.onwrite),w.sync=!1),te&&!w.errored&&!w.destroyed}function ue(g,w,v,B,L,Z,te){w.writelen=B,w.writecb=te,w.writing=!0,w.sync=!0,w.destroyed?w.onwrite(new U("write")):v?g._writev(L,w.onwrite):g._write(L,Z,w.onwrite),w.sync=!1}function re(g,w,v,B){--w.pendingcb,B(v),D(w),ge(g,v)}function fe(g,w){const v=g._writableState,B=v.sync,L=v.writecb;if(typeof L!="function"){ge(g,new T);return}v.writing=!1,v.writecb=null,v.length-=v.writelen,v.writelen=0,w?(w.stack,v.errored||(v.errored=w),g._readableState&&!g._readableState.errored&&(g._readableState.errored=w),B?t.nextTick(re,g,v,w,L):re(g,v,w,L)):(v.buffered.length>v.bufferedIndex&&de(g,v),B?v.afterWriteTickInfo!==null&&v.afterWriteTickInfo.cb===L?v.afterWriteTickInfo.count++:(v.afterWriteTickInfo={count:1,cb:L,stream:g,state:v},t.nextTick(M,v.afterWriteTickInfo)):ne(g,v,1,L))}function M({stream:g,state:w,count:v,cb:B}){return w.afterWriteTickInfo=null,ne(g,w,v,B)}function ne(g,w,v,B){for(!w.ending&&!g.destroyed&&w.length===0&&w.needDrain&&(w.needDrain=!1,g.emit("drain"));v-- >0;)w.pendingcb--,B();w.destroyed&&D(w),Ae(g,w)}function D(g){if(g.writing)return;for(let L=g.bufferedIndex;L<g.buffered.length;++L){var w;const{chunk:Z,callback:te}=g.buffered[L],Y=g.objectMode?1:Z.length;g.length-=Y,te((w=g.errored)!==null&&w!==void 0?w:new U("write"))}const v=g[H].splice(0);for(let L=0;L<v.length;L++){var B;v[L]((B=g.errored)!==null&&B!==void 0?B:new U("end"))}K(g)}function de(g,w){if(w.corked||w.bufferProcessing||w.destroyed||!w.constructed)return;const{buffered:v,bufferedIndex:B,objectMode:L}=w,Z=v.length-B;if(!Z)return;let te=B;if(w.bufferProcessing=!0,Z>1&&g._writev){w.pendingcb-=Z-1;const Y=w.allNoop?ye:k=>{for(let Ne=te;Ne<v.length;++Ne)v[Ne].callback(k)},Se=w.allNoop&&te===0?v:e(v,te);Se.allBuffers=w.allBuffers,ue(g,w,!0,w.length,Se,"",Y),K(w)}else{do{const{chunk:Y,encoding:Se,callback:k}=v[te];v[te++]=null;const Ne=L?1:Y.length;ue(g,w,!1,Ne,Y,Se,k)}while(te<v.length&&!w.writing);te===v.length?K(w):te>256?(v.splice(0,te),w.bufferedIndex=0):w.bufferedIndex=te}w.bufferProcessing=!1}G.prototype._write=function(g,w,v){if(this._writev)this._writev([{chunk:g,encoding:w}],v);else throw new O("_write()")},G.prototype._writev=null,G.prototype.end=function(g,w,v){const B=this._writableState;typeof g=="function"?(v=g,g=null,w=null):typeof w=="function"&&(v=w,w=null);let L;if(g!=null){const Z=z(this,g,w);Z instanceof r&&(L=Z)}return B.corked&&(B.corked=1,this.uncork()),L||(!B.errored&&!B.ending?(B.ending=!0,Ae(this,B,!0),B.ended=!0):B.finished?L=new oe("end"):B.destroyed&&(L=new U("end"))),typeof v=="function"&&(L||B.finished?t.nextTick(v,L):B[H].push(v)),this};function Re(g){return g.ending&&!g.destroyed&&g.constructed&&g.length===0&&!g.errored&&g.buffered.length===0&&!g.finished&&!g.writing&&!g.errorEmitted&&!g.closeEmitted}function Qe(g,w){let v=!1;function B(L){if(v){ge(g,L??T());return}if(v=!0,w.pendingcb--,L){const Z=w[H].splice(0);for(let te=0;te<Z.length;te++)Z[te](L);ge(g,L,w.sync)}else Re(w)&&(w.prefinished=!0,g.emit("prefinish"),w.pendingcb++,t.nextTick(Ke,g,w))}w.sync=!0,w.pendingcb++;try{g._final(B)}catch(L){B(L)}w.sync=!1}function Ve(g,w){!w.prefinished&&!w.finalCalled&&(typeof g._final=="function"&&!w.destroyed?(w.finalCalled=!0,Qe(g,w)):(w.prefinished=!0,g.emit("prefinish")))}function Ae(g,w,v){Re(w)&&(Ve(g,w),w.pendingcb===0&&(v?(w.pendingcb++,t.nextTick((B,L)=>{Re(L)?Ke(B,L):L.pendingcb--},g,w)):Re(w)&&(w.pendingcb++,Ke(g,w))))}function Ke(g,w){w.pendingcb--,w.finished=!0;const v=w[H].splice(0);for(let B=0;B<v.length;B++)v[B]();if(g.emit("finish"),w.autoDestroy){const B=g._readableState;(!B||B.autoDestroy&&(B.endEmitted||B.readable===!1))&&g.destroy()}}a(G.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(g){this._writableState&&(this._writableState.destroyed=g)}},writable:{__proto__:null,get(){const g=this._writableState;return!!g&&g.writable!==!1&&!g.destroyed&&!g.errored&&!g.ending&&!g.ended},set(g){this._writableState&&(this._writableState.writable=!!g)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const g=this._writableState;return g?!g.destroyed&&!g.ending&&g.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Rt=y.destroy;G.prototype.destroy=function(g,w){const v=this._writableState;return!v.destroyed&&(v.bufferedIndex<v.buffered.length||v[H].length)&&t.nextTick(D,v),Rt.call(this,g,w),this},G.prototype._undestroy=y.undestroy,G.prototype._destroy=function(g,w){w(g)},G.prototype[m.captureRejectionSymbol]=function(g){this.destroy(g)};let ct;function Ye(){return ct===void 0&&(ct={}),ct}return G.fromWeb=function(g,w){return Ye().newStreamWritableFromWritableStream(g,w)},G.toWeb=function(g){return Ye().newWritableStreamFromStreamWritable(g)},en}var rn,fs;function Zl(){if(fs)return rn;fs=1;const t=st,e=je,{isReadable:r,isWritable:n,isIterable:i,isNodeStream:a,isReadableNodeStream:u,isWritableNodeStream:l,isDuplexNodeStream:p,isReadableStream:_,isWritableStream:m}=qe,S=et,{AbortError:E,codes:{ERR_INVALID_ARG_TYPE:y,ERR_INVALID_RETURN_VALUE:R}}=xe,{destroyer:I}=xt,N=ze(),C=or(),O=tn(),{createDeferredPromise:T}=me,q=as,U=globalThis.Blob||e.Blob,oe=typeof U<"u"?function(P){return P instanceof U}:function(P){return!1},Ee=globalThis.AbortController||Ft().AbortController,{FunctionPrototypeCall:ee}=ce;class ae extends N{constructor(P){super(P),(P==null?void 0:P.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(P==null?void 0:P.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}rn=function H(P,K){if(p(P))return P;if(u(P))return ye({readable:P});if(l(P))return ye({writable:P});if(a(P))return ye({writable:!1,readable:!1});if(_(P))return ye({readable:C.fromWeb(P)});if(m(P))return ye({writable:O.fromWeb(P)});if(typeof P=="function"){const{value:z,write:le,final:ue,destroy:re}=ge(P);if(i(z))return q(ae,z,{objectMode:!0,write:le,final:ue,destroy:re});const fe=z==null?void 0:z.then;if(typeof fe=="function"){let M;const ne=ee(fe,z,D=>{if(D!=null)throw new R("nully","body",D)},D=>{I(M,D)});return M=new ae({objectMode:!0,readable:!1,write:le,final(D){ue(async()=>{try{await ne,t.nextTick(D,null)}catch(de){t.nextTick(D,de)}})},destroy:re})}throw new R("Iterable, AsyncIterable or AsyncFunction",K,z)}if(oe(P))return H(P.arrayBuffer());if(i(P))return q(ae,P,{objectMode:!0,writable:!1});if(_(P==null?void 0:P.readable)&&m(P==null?void 0:P.writable))return ae.fromWeb(P);if(typeof(P==null?void 0:P.writable)=="object"||typeof(P==null?void 0:P.readable)=="object"){const z=P!=null&&P.readable?u(P==null?void 0:P.readable)?P==null?void 0:P.readable:H(P.readable):void 0,le=P!=null&&P.writable?l(P==null?void 0:P.writable)?P==null?void 0:P.writable:H(P.writable):void 0;return ye({readable:z,writable:le})}const G=P==null?void 0:P.then;if(typeof G=="function"){let z;return ee(G,P,le=>{le!=null&&z.push(le),z.push(null)},le=>{I(z,le)}),z=new ae({objectMode:!0,writable:!1,read(){}})}throw new y(K,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],P)};function ge(H){let{promise:P,resolve:K}=T();const G=new Ee,z=G.signal;return{value:H(async function*(){for(;;){const ue=P;P=null;const{chunk:re,done:fe,cb:M}=await ue;if(t.nextTick(M),fe)return;if(z.aborted)throw new E(void 0,{cause:z.reason});({promise:P,resolve:K}=T()),yield re}}(),{signal:z}),write(ue,re,fe){const M=K;K=null,M({chunk:ue,done:!1,cb:fe})},final(ue){const re=K;K=null,re({done:!0,cb:ue})},destroy(ue,re){G.abort(),re(ue)}}}function ye(H){const P=H.readable&&typeof H.readable.read!="function"?C.wrap(H.readable):H.readable,K=H.writable;let G=!!r(P),z=!!n(K),le,ue,re,fe,M;function ne(D){const de=fe;fe=null,de?de(D):D&&M.destroy(D)}return M=new ae({readableObjectMode:!!(P!=null&&P.readableObjectMode),writableObjectMode:!!(K!=null&&K.writableObjectMode),readable:G,writable:z}),z&&(S(K,D=>{z=!1,D&&I(P,D),ne(D)}),M._write=function(D,de,Re){K.write(D,de)?Re():le=Re},M._final=function(D){K.end(),ue=D},K.on("drain",function(){if(le){const D=le;le=null,D()}}),K.on("finish",function(){if(ue){const D=ue;ue=null,D()}})),G&&(S(P,D=>{G=!1,D&&I(P,D),ne(D)}),P.on("readable",function(){if(re){const D=re;re=null,D()}}),P.on("end",function(){M.push(null)}),M._read=function(){for(;;){const D=P.read();if(D===null){re=M._read;return}if(!M.push(D))return}}),M._destroy=function(D,de){!D&&fe!==null&&(D=new E),re=null,le=null,ue=null,fe===null?de(D):(fe=de,I(K,D),I(P,D))},M}return rn}var nn,cs;function ze(){if(cs)return nn;cs=1;const{ObjectDefineProperties:t,ObjectGetOwnPropertyDescriptor:e,ObjectKeys:r,ObjectSetPrototypeOf:n}=ce;nn=u;const i=or(),a=tn();n(u.prototype,i.prototype),n(u,i);{const m=r(a.prototype);for(let S=0;S<m.length;S++){const E=m[S];u.prototype[E]||(u.prototype[E]=a.prototype[E])}}function u(m){if(!(this instanceof u))return new u(m);i.call(this,m),a.call(this,m),m?(this.allowHalfOpen=m.allowHalfOpen!==!1,m.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),m.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}t(u.prototype,{writable:{__proto__:null,...e(a.prototype,"writable")},writableHighWaterMark:{__proto__:null,...e(a.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...e(a.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...e(a.prototype,"writableBuffer")},writableLength:{__proto__:null,...e(a.prototype,"writableLength")},writableFinished:{__proto__:null,...e(a.prototype,"writableFinished")},writableCorked:{__proto__:null,...e(a.prototype,"writableCorked")},writableEnded:{__proto__:null,...e(a.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...e(a.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(m){this._readableState&&this._writableState&&(this._readableState.destroyed=m,this._writableState.destroyed=m)}}});let l;function p(){return l===void 0&&(l={}),l}u.fromWeb=function(m,S){return p().newStreamDuplexFromReadableWritablePair(m,S)},u.toWeb=function(m){return p().newReadableWritablePairFromDuplex(m)};let _;return u.from=function(m){return _||(_=Zl()),_(m,"body")},nn}const{ObjectSetPrototypeOf:ds,Symbol:Jl}=ce;var hs=He;const{ERR_METHOD_NOT_IMPLEMENTED:eu}=xe.codes,sn=ze(),{getHighWaterMark:tu}=sr;ds(He.prototype,sn.prototype),ds(He,sn);const kt=Jl("kCallback");function He(t){if(!(this instanceof He))return new He(t);const e=t?tu(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),sn.call(this,t),this._readableState.sync=!1,this[kt]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",ru)}function on(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function ru(){this._final!==on&&on.call(this)}He.prototype._final=on,He.prototype._transform=function(t,e,r){throw new eu("_transform()")},He.prototype._write=function(t,e,r){const n=this._readableState,i=this._writableState,a=n.length;this._transform(t,e,(u,l)=>{if(u){r(u);return}l!=null&&this.push(l),i.ended||a===n.length||n.length<n.highWaterMark?r():this[kt]=r})},He.prototype._read=function(){if(this[kt]){const t=this[kt];this[kt]=null,t()}};const{ObjectSetPrototypeOf:ps}=ce;var _s=St;const an=hs;ps(St.prototype,an.prototype),ps(St,an);function St(t){if(!(this instanceof St))return new St(t);an.call(this,t)}St.prototype._transform=function(t,e,r){r(null,t)};const Ot=st,{ArrayIsArray:nu,Promise:iu,SymbolAsyncIterator:su,SymbolDispose:ou}=ce,ar=et,{once:au}=me,lu=xt,bs=ze(),{aggregateTwoErrors:uu,codes:{ERR_INVALID_ARG_TYPE:ln,ERR_INVALID_RETURN_VALUE:un,ERR_MISSING_ARGS:fu,ERR_STREAM_DESTROYED:cu,ERR_STREAM_PREMATURE_CLOSE:du},AbortError:hu}=xe,{validateFunction:pu,validateAbortSignal:_u}=Bt,{isIterable:at,isReadable:fn,isReadableNodeStream:lr,isNodeStream:gs,isTransformStream:It,isWebStream:bu,isReadableStream:cn,isReadableFinished:gu}=qe,yu=globalThis.AbortController||Ft().AbortController;let dn,hn,pn;function ys(t,e,r){let n=!1;t.on("close",()=>{n=!0});const i=ar(t,{readable:e,writable:r},a=>{n=!a});return{destroy:a=>{n||(n=!0,lu.destroyer(t,a||new cu("pipe")))},cleanup:i}}function wu(t){return pu(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function _n(t){if(at(t))return t;if(lr(t))return mu(t);throw new ln("val",["Readable","Iterable","AsyncIterable"],t)}async function*mu(t){hn||(hn=or()),yield*hn.prototype[su].call(t)}async function ur(t,e,r,{end:n}){let i,a=null;const u=_=>{if(_&&(i=_),a){const m=a;a=null,m()}},l=()=>new iu((_,m)=>{i?m(i):a=()=>{i?m(i):_()}});e.on("drain",u);const p=ar(e,{readable:!1},u);try{e.writableNeedDrain&&await l();for await(const _ of t)e.write(_)||await l();n&&(e.end(),await l()),r()}catch(_){r(i!==_?uu(i,_):_)}finally{p(),e.off("drain",u)}}async function bn(t,e,r,{end:n}){It(e)&&(e=e.writable);const i=e.getWriter();try{for await(const a of t)await i.ready,i.write(a).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(a){try{await i.abort(a),r(a)}catch(u){r(u)}}}function Eu(...t){return ws(t,au(wu(t)))}function ws(t,e,r){if(t.length===1&&nu(t[0])&&(t=t[0]),t.length<2)throw new fu("streams");const n=new yu,i=n.signal,a=r==null?void 0:r.signal,u=[];_u(a,"options.signal");function l(){R(new hu)}pn=pn||me.addAbortListener;let p;a&&(p=pn(a,l));let _,m;const S=[];let E=0;function y(O){R(O,--E===0)}function R(O,T){var q;if(O&&(!_||_.code==="ERR_STREAM_PREMATURE_CLOSE")&&(_=O),!(!_&&!T)){for(;S.length;)S.shift()(_);(q=p)===null||q===void 0||q[ou](),n.abort(),T&&(_||u.forEach(U=>U()),Ot.nextTick(e,_,m))}}let I;for(let O=0;O<t.length;O++){const T=t[O],q=O<t.length-1,U=O>0,oe=q||(r==null?void 0:r.end)!==!1,Ee=O===t.length-1;if(gs(T)){let ee=function(ae){ae&&ae.name!=="AbortError"&&ae.code!=="ERR_STREAM_PREMATURE_CLOSE"&&y(ae)};if(oe){const{destroy:ae,cleanup:ge}=ys(T,q,U);S.push(ae),fn(T)&&Ee&&u.push(ge)}T.on("error",ee),fn(T)&&Ee&&u.push(()=>{T.removeListener("error",ee)})}if(O===0)if(typeof T=="function"){if(I=T({signal:i}),!at(I))throw new un("Iterable, AsyncIterable or Stream","source",I)}else at(T)||lr(T)||It(T)?I=T:I=bs.from(T);else if(typeof T=="function"){if(It(I)){var N;I=_n((N=I)===null||N===void 0?void 0:N.readable)}else I=_n(I);if(I=T(I,{signal:i}),q){if(!at(I,!0))throw new un("AsyncIterable",`transform[${O-1}]`,I)}else{var C;dn||(dn=_s);const ee=new dn({objectMode:!0}),ae=(C=I)===null||C===void 0?void 0:C.then;if(typeof ae=="function")E++,ae.call(I,H=>{m=H,H!=null&&ee.write(H),oe&&ee.end(),Ot.nextTick(y)},H=>{ee.destroy(H),Ot.nextTick(y,H)});else if(at(I,!0))E++,ur(I,ee,y,{end:oe});else if(cn(I)||It(I)){const H=I.readable||I;E++,ur(H,ee,y,{end:oe})}else throw new un("AsyncIterable or Promise","destination",I);I=ee;const{destroy:ge,cleanup:ye}=ys(I,!1,!0);S.push(ge),Ee&&u.push(ye)}}else if(gs(T)){if(lr(I)){E+=2;const ee=xu(I,T,y,{end:oe});fn(T)&&Ee&&u.push(ee)}else if(It(I)||cn(I)){const ee=I.readable||I;E++,ur(ee,T,y,{end:oe})}else if(at(I))E++,ur(I,T,y,{end:oe});else throw new ln("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],I);I=T}else if(bu(T)){if(lr(I))E++,bn(_n(I),T,y,{end:oe});else if(cn(I)||at(I))E++,bn(I,T,y,{end:oe});else if(It(I))E++,bn(I.readable,T,y,{end:oe});else throw new ln("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],I);I=T}else I=bs.from(T)}return(i!=null&&i.aborted||a!=null&&a.aborted)&&Ot.nextTick(l),I}function xu(t,e,r,{end:n}){let i=!1;if(e.on("close",()=>{i||r(new du)}),t.pipe(e,{end:!1}),n){let a=function(){i=!0,e.end()};gu(t)?Ot.nextTick(a):t.once("end",a)}else r();return ar(t,{readable:!0,writable:!1},a=>{const u=t._readableState;a&&a.code==="ERR_STREAM_PREMATURE_CLOSE"&&u&&u.ended&&!u.errored&&!u.errorEmitted?t.once("end",r).once("error",r):r(a)}),ar(e,{readable:!1,writable:!0},r)}var gn={pipelineImpl:ws,pipeline:Eu};const{pipeline:Su}=gn,fr=ze(),{destroyer:Iu}=xt,{isNodeStream:cr,isReadable:ms,isWritable:Es,isWebStream:yn,isTransformStream:lt,isWritableStream:xs,isReadableStream:Ss}=qe,{AbortError:Ru,codes:{ERR_INVALID_ARG_VALUE:Is,ERR_MISSING_ARGS:Au}}=xe,Tu=et;var Rs=function(...e){if(e.length===0)throw new Au("streams");if(e.length===1)return fr.from(e[0]);const r=[...e];if(typeof e[0]=="function"&&(e[0]=fr.from(e[0])),typeof e[e.length-1]=="function"){const y=e.length-1;e[y]=fr.from(e[y])}for(let y=0;y<e.length;++y)if(!(!cr(e[y])&&!yn(e[y]))){if(y<e.length-1&&!(ms(e[y])||Ss(e[y])||lt(e[y])))throw new Is(`streams[${y}]`,r[y],"must be readable");if(y>0&&!(Es(e[y])||xs(e[y])||lt(e[y])))throw new Is(`streams[${y}]`,r[y],"must be writable")}let n,i,a,u,l;function p(y){const R=u;u=null,R?R(y):y?l.destroy(y):!E&&!S&&l.destroy()}const _=e[0],m=Su(e,p),S=!!(Es(_)||xs(_)||lt(_)),E=!!(ms(m)||Ss(m)||lt(m));if(l=new fr({writableObjectMode:!!(_!=null&&_.writableObjectMode),readableObjectMode:!!(m!=null&&m.readableObjectMode),writable:S,readable:E}),S){if(cr(_))l._write=function(R,I,N){_.write(R,I)?N():n=N},l._final=function(R){_.end(),i=R},_.on("drain",function(){if(n){const R=n;n=null,R()}});else if(yn(_)){const I=(lt(_)?_.writable:_).getWriter();l._write=async function(N,C,O){try{await I.ready,I.write(N).catch(()=>{}),O()}catch(T){O(T)}},l._final=async function(N){try{await I.ready,I.close().catch(()=>{}),i=N}catch(C){N(C)}}}const y=lt(m)?m.readable:m;Tu(y,()=>{if(i){const R=i;i=null,R()}})}if(E){if(cr(m))m.on("readable",function(){if(a){const y=a;a=null,y()}}),m.on("end",function(){l.push(null)}),l._read=function(){for(;;){const y=m.read();if(y===null){a=l._read;return}if(!l.push(y))return}};else if(yn(m)){const R=(lt(m)?m.readable:m).getReader();l._read=async function(){for(;;)try{const{value:I,done:N}=await R.read();if(!l.push(I))return;if(N){l.push(null);return}}catch{return}}}}return l._destroy=function(y,R){!y&&u!==null&&(y=new Ru),a=null,n=null,i=null,u===null?R(y):(u=R,cr(m)&&Iu(m,y))},l};const vu=globalThis.AbortController||Ft().AbortController,{codes:{ERR_INVALID_ARG_VALUE:Nu,ERR_INVALID_ARG_TYPE:Dt,ERR_MISSING_ARGS:Pu,ERR_OUT_OF_RANGE:$u},AbortError:De}=xe,{validateAbortSignal:ut,validateInteger:As,validateObject:ft}=Bt,ju=ce.Symbol("kWeak"),Lu=ce.Symbol("kResistStopPropagation"),{finished:Fu}=et,Bu=Rs,{addAbortSignalNoValidate:Cu}=nr,{isWritable:ku,isNodeStream:Ou}=qe,{deprecate:Du}=me,{ArrayPrototypePush:Mu,Boolean:Uu,MathFloor:Ts,Number:Wu,NumberIsNaN:Gu,Promise:vs,PromiseReject:Ns,PromiseResolve:qu,PromisePrototypeThen:Ps,Symbol:$s}=ce,dr=$s("kEmpty"),js=$s("kEof");function zu(t,e){if(e!=null&&ft(e,"options"),(e==null?void 0:e.signal)!=null&&ut(e.signal,"options.signal"),Ou(t)&&!ku(t))throw new Nu("stream",t,"must be writable");const r=Bu(this,t);return e!=null&&e.signal&&Cu(e.signal,r),r}function hr(t,e){if(typeof t!="function")throw new Dt("fn",["Function","AsyncFunction"],t);e!=null&&ft(e,"options"),(e==null?void 0:e.signal)!=null&&ut(e.signal,"options.signal");let r=1;(e==null?void 0:e.concurrency)!=null&&(r=Ts(e.concurrency));let n=r-1;return(e==null?void 0:e.highWaterMark)!=null&&(n=Ts(e.highWaterMark)),As(r,"options.concurrency",1),As(n,"options.highWaterMark",0),n+=r,(async function*(){const a=me.AbortSignalAny([e==null?void 0:e.signal].filter(Uu)),u=this,l=[],p={signal:a};let _,m,S=!1,E=0;function y(){S=!0,R()}function R(){E-=1,I()}function I(){m&&!S&&E<r&&l.length<n&&(m(),m=null)}async function N(){try{for await(let C of u){if(S)return;if(a.aborted)throw new De;try{if(C=t(C,p),C===dr)continue;C=qu(C)}catch(O){C=Ns(O)}E+=1,Ps(C,R,y),l.push(C),_&&(_(),_=null),!S&&(l.length>=n||E>=r)&&await new vs(O=>{m=O})}l.push(js)}catch(C){const O=Ns(C);Ps(O,R,y),l.push(O)}finally{S=!0,_&&(_(),_=null)}}N();try{for(;;){for(;l.length>0;){const C=await l[0];if(C===js)return;if(a.aborted)throw new De;C!==dr&&(yield C),l.shift(),I()}await new vs(C=>{_=C})}}finally{S=!0,m&&(m(),m=null)}}).call(this)}function Hu(t=void 0){return t!=null&&ft(t,"options"),(t==null?void 0:t.signal)!=null&&ut(t.signal,"options.signal"),(async function*(){let r=0;for await(const i of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new De({cause:t.signal.reason});yield[r++,i]}}).call(this)}async function Ls(t,e=void 0){for await(const r of wn.call(this,t,e))return!0;return!1}async function Qu(t,e=void 0){if(typeof t!="function")throw new Dt("fn",["Function","AsyncFunction"],t);return!await Ls.call(this,async(...r)=>!await t(...r),e)}async function Vu(t,e){for await(const r of wn.call(this,t,e))return r}async function Ku(t,e){if(typeof t!="function")throw new Dt("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i),dr}for await(const n of hr.call(this,r,e));}function wn(t,e){if(typeof t!="function")throw new Dt("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i)?n:dr}return hr.call(this,r,e)}class Yu extends Pu{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Xu(t,e,r){var n;if(typeof t!="function")throw new Dt("reducer",["Function","AsyncFunction"],t);r!=null&&ft(r,"options"),(r==null?void 0:r.signal)!=null&&ut(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){const _=new De(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await Fu(this.destroy(_)),_}const a=new vu,u=a.signal;if(r!=null&&r.signal){const _={once:!0,[ju]:this,[Lu]:!0};r.signal.addEventListener("abort",()=>a.abort(),_)}let l=!1;try{for await(const _ of this){var p;if(l=!0,r!=null&&(p=r.signal)!==null&&p!==void 0&&p.aborted)throw new De;i?e=await t(e,_,{signal:u}):(e=_,i=!0)}if(!l&&!i)throw new Yu}finally{a.abort()}return e}async function Zu(t){t!=null&&ft(t,"options"),(t==null?void 0:t.signal)!=null&&ut(t.signal,"options.signal");const e=[];for await(const n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new De(void 0,{cause:t.signal.reason});Mu(e,n)}return e}function Ju(t,e){const r=hr.call(this,t,e);return(async function*(){for await(const i of r)yield*i}).call(this)}function Fs(t){if(t=Wu(t),Gu(t))return 0;if(t<0)throw new $u("number",">= 0",t);return t}function ef(t,e=void 0){return e!=null&&ft(e,"options"),(e==null?void 0:e.signal)!=null&&ut(e.signal,"options.signal"),t=Fs(t),(async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new De;for await(const a of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new De;t--<=0&&(yield a)}}).call(this)}function tf(t,e=void 0){return e!=null&&ft(e,"options"),(e==null?void 0:e.signal)!=null&&ut(e.signal,"options.signal"),t=Fs(t),(async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new De;for await(const a of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new De;if(t-- >0&&(yield a),t<=0)return}}).call(this)}Pr.streamReturningOperators={asIndexedPairs:Du(Hu,"readable.asIndexedPairs will be removed in a future version."),drop:ef,filter:wn,flatMap:Ju,map:hr,take:tf,compose:zu},Pr.promiseReturningOperators={every:Qu,forEach:Ku,reduce:Xu,toArray:Zu,some:Ls,find:Vu};var mn,Bs;function Cs(){if(Bs)return mn;Bs=1;const{ArrayPrototypePop:t,Promise:e}=ce,{isIterable:r,isNodeStream:n,isWebStream:i}=qe,{pipelineImpl:a}=gn,{finished:u}=et;Os();function l(...p){return new e((_,m)=>{let S,E;const y=p[p.length-1];if(y&&typeof y=="object"&&!n(y)&&!r(y)&&!i(y)){const R=t(p);S=R.signal,E=R.end}a(p,(R,I)=>{R?m(R):_(I)},{signal:S,end:E})})}return mn={finished:u,pipeline:l},mn}var ks;function Os(){if(ks)return vr.exports;ks=1;const{Buffer:t}=je,{ObjectDefineProperty:e,ObjectKeys:r,ReflectApply:n}=ce,{promisify:{custom:i}}=me,{streamReturningOperators:a,promiseReturningOperators:u}=Pr,{codes:{ERR_ILLEGAL_CONSTRUCTOR:l}}=xe,p=Rs,{setDefaultHighWaterMark:_,getDefaultHighWaterMark:m}=sr,{pipeline:S}=gn,{destroyer:E}=xt,y=et,R=Cs(),I=qe,N=vr.exports=Vr.Stream;N.isDestroyed=I.isDestroyed,N.isDisturbed=I.isDisturbed,N.isErrored=I.isErrored,N.isReadable=I.isReadable,N.isWritable=I.isWritable,N.Readable=or();for(const O of r(a)){let q=function(...U){if(new.target)throw l();return N.Readable.from(n(T,this,U))};const T=a[O];e(q,"name",{__proto__:null,value:T.name}),e(q,"length",{__proto__:null,value:T.length}),e(N.Readable.prototype,O,{__proto__:null,value:q,enumerable:!1,configurable:!0,writable:!0})}for(const O of r(u)){let q=function(...U){if(new.target)throw l();return n(T,this,U)};const T=u[O];e(q,"name",{__proto__:null,value:T.name}),e(q,"length",{__proto__:null,value:T.length}),e(N.Readable.prototype,O,{__proto__:null,value:q,enumerable:!1,configurable:!0,writable:!0})}N.Writable=tn(),N.Duplex=ze(),N.Transform=hs,N.PassThrough=_s,N.pipeline=S;const{addAbortSignal:C}=nr;return N.addAbortSignal=C,N.finished=y,N.destroy=E,N.compose=p,N.setDefaultHighWaterMark=_,N.getDefaultHighWaterMark=m,e(N,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return R}}),e(S,i,{__proto__:null,enumerable:!0,get(){return R.pipeline}}),e(y,i,{__proto__:null,enumerable:!0,get(){return R.finished}}),N.Stream=N,N._isUint8Array=function(T){return T instanceof Uint8Array},N._uint8ArrayToBuffer=function(T){return t.from(T.buffer,T.byteOffset,T.byteLength)},vr.exports}(function(t){const e=Os(),r=Cs(),n=e.Readable.destroy;t.exports=e.Readable,t.exports._uint8ArrayToBuffer=e._uint8ArrayToBuffer,t.exports._isUint8Array=e._isUint8Array,t.exports.isDisturbed=e.isDisturbed,t.exports.isErrored=e.isErrored,t.exports.isReadable=e.isReadable,t.exports.Readable=e.Readable,t.exports.Writable=e.Writable,t.exports.Duplex=e.Duplex,t.exports.Transform=e.Transform,t.exports.PassThrough=e.PassThrough,t.exports.addAbortSignal=e.addAbortSignal,t.exports.finished=e.finished,t.exports.destroy=e.destroy,t.exports.destroy=n,t.exports.pipeline=e.pipeline,t.exports.compose=e.compose,Object.defineProperty(e,"promises",{configurable:!0,enumerable:!0,get(){return r}}),t.exports.Stream=e.Stream,t.exports.default=t.exports})(qn);var Ds=qn.exports;const En=Symbol("iter");function pr(t,e,r=4){if(r===0)return Object.assign(t,e);for(const n in e)t[n]=pr(t[n]||Object.create(null),e[n],r-1);return t}class rf{constructor(e={}){this._id=1,this._ids=Object.create(null),this._ids[""]=1,this._entities=Object.create(null),this._entities[1]="",this._blankNodeIndex=0,this._factory=e.factory||Nt}_termFromId(e){if(e[0]==="."){const r=this._entities,n=e.split(".");return this._factory.quad(this._termFromId(r[n[1]]),this._termFromId(r[n[2]]),this._termFromId(r[n[3]]),n[4]&&this._termFromId(r[n[4]]))}return Pt(e,this._factory)}_termToNumericId(e){if(e.termType==="Quad"){const r=this._termToNumericId(e.subject),n=this._termToNumericId(e.predicate),i=this._termToNumericId(e.object);let a;return r&&n&&i&&(Tr(e.graph)||(a=this._termToNumericId(e.graph)))&&this._ids[a?`.${r}.${n}.${i}.${a}`:`.${r}.${n}.${i}`]}return this._ids[bt(e)]}_termToNewNumericId(e){const r=e&&e.termType==="Quad"?`.${this._termToNewNumericId(e.subject)}.${this._termToNewNumericId(e.predicate)}.${this._termToNewNumericId(e.object)}${Tr(e.graph)?"":`.${this._termToNewNumericId(e.graph)}`}`:bt(e);return this._ids[r]||(this._ids[this._entities[++this._id]=r]=this._id)}createBlankNode(e){let r,n;if(e)for(r=e=`_:${e}`,n=1;this._ids[r];)r=e+n++;else do r=`_:b${this._blankNodeIndex++}`;while(this._ids[r]);return this._ids[r]=++this._id,this._entities[this._id]=r,this._factory.blankNode(r.substr(2))}}class Me{constructor(e,r){this._size=0,this._graphs=Object.create(null),!r&&e&&!e[0]&&(r=e,e=null),r=r||{},this._factory=r.factory||Nt,this._entityIndex=r.entityIndex||new rf({factory:this._factory}),this._entities=this._entityIndex._entities,this._termFromId=this._entityIndex._termFromId.bind(this._entityIndex),this._termToNumericId=this._entityIndex._termToNumericId.bind(this._entityIndex),this._termToNewNumericId=this._entityIndex._termToNewNumericId.bind(this._entityIndex),e&&this.addQuads(e)}get size(){let e=this._size;if(e!==null)return e;e=0;const r=this._graphs;let n,i;for(const a in r)for(const u in n=r[a].subjects)for(const l in i=n[u])e+=Object.keys(i[l]).length;return this._size=e}_addToIndex(e,r,n,i){const a=e[r]||(e[r]={}),u=a[n]||(a[n]={}),l=i in u;return l||(u[i]=null),!l}_removeFromIndex(e,r,n,i){const a=e[r],u=a[n];delete u[i];for(const l in u)return;delete a[n];for(const l in a)return;delete e[r]}*_findInIndex(e,r,n,i,a,u,l,p){let _,m,S;const E=this._entities,y=this._termFromId(E[p]),R={subject:null,predicate:null,object:null};r&&((_=e,e={})[r]=_[r]);for(const I in e)if(m=e[I]){R[a]=this._termFromId(E[I]),n&&((_=m,m={})[n]=_[n]);for(const N in m)if(S=m[N]){R[u]=this._termFromId(E[N]);const C=i?i in S?[i]:[]:Object.keys(S);for(let O=0;O<C.length;O++)R[l]=this._termFromId(E[C[O]]),yield this._factory.quad(R.subject,R.predicate,R.object,y)}}}_loop(e,r){for(const n in e)r(n)}_loopByKey0(e,r,n){let i,a;if(i=e[r])for(a in i)n(a)}_loopByKey1(e,r,n){let i,a;for(i in e)a=e[i],a[r]&&n(i)}_loopBy2Keys(e,r,n,i){let a,u,l;if((a=e[r])&&(u=a[n]))for(l in u)i(l)}_countInIndex(e,r,n,i){let a=0,u,l,p;r&&((u=e,e={})[r]=u[r]);for(const _ in e)if(l=e[_]){n&&((u=l,l={})[n]=u[n]);for(const m in l)(p=l[m])&&(i?i in p&&a++:a+=Object.keys(p).length)}return a}_getGraphs(e){return e=e===""?1:e&&(this._termToNumericId(e)||-1),typeof e!="number"?this._graphs:{[e]:this._graphs[e]}}_uniqueEntities(e){const r=Object.create(null);return n=>{n in r||(r[n]=!0,e(this._termFromId(this._entities[n],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,r,n,i){r||(i=e.graph,n=e.object,r=e.predicate,e=e.subject),i=i?this._termToNewNumericId(i):1;let a=this._graphs[i];return a||(a=this._graphs[i]={subjects:{},predicates:{},objects:{}},Object.freeze(a)),e=this._termToNewNumericId(e),r=this._termToNewNumericId(r),n=this._termToNewNumericId(n),this._addToIndex(a.subjects,e,r,n)?(this._addToIndex(a.predicates,r,n,e),this._addToIndex(a.objects,n,e,r),this._size=null,!0):!1}addQuads(e){for(let r=0;r<e.length;r++)this.addQuad(e[r])}delete(e){return this.removeQuad(e),this}has(e,r,n,i){return e&&e.subject&&({subject:e,predicate:r,object:n,graph:i}=e),!this.readQuads(e,r,n,i).next().done}import(e){return e.on("data",r=>{this.addQuad(r)}),e}removeQuad(e,r,n,i){r||(i=e.graph,n=e.object,r=e.predicate,e=e.subject),i=i?this._termToNumericId(i):1;const a=this._graphs;let u,l,p;if(!(e=e&&this._termToNumericId(e))||!(r=r&&this._termToNumericId(r))||!(n=n&&this._termToNumericId(n))||!(u=a[i])||!(l=u.subjects[e])||!(p=l[r])||!(n in p))return!1;this._removeFromIndex(u.subjects,e,r,n),this._removeFromIndex(u.predicates,r,n,e),this._removeFromIndex(u.objects,n,e,r),this._size!==null&&this._size--;for(e in u.subjects)return!0;return delete a[i],!0}removeQuads(e){for(let r=0;r<e.length;r++)this.removeQuad(e[r])}remove(e){return e.on("data",r=>{this.removeQuad(r)}),e}removeMatches(e,r,n,i){const a=new Ds.Readable({objectMode:!0}),u=this.readQuads(e,r,n,i);return a._read=l=>{for(;l-- >0;){const{done:p,value:_}=u.next();if(p){a.push(null);return}a.push(_)}},this.remove(a)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,r,n,i){return[...this.readQuads(e,r,n,i)]}*readQuads(e,r,n,i){const a=this._getGraphs(i);let u,l,p,_;if(!(e&&!(l=this._termToNumericId(e))||r&&!(p=this._termToNumericId(r))||n&&!(_=this._termToNumericId(n))))for(const m in a)(u=a[m])&&(l?_?yield*this._findInIndex(u.objects,_,l,p,"object","subject","predicate",m):yield*this._findInIndex(u.subjects,l,p,null,"subject","predicate","object",m):p?yield*this._findInIndex(u.predicates,p,_,null,"predicate","object","subject",m):_?yield*this._findInIndex(u.objects,_,null,null,"object","subject","predicate",m):yield*this._findInIndex(u.subjects,null,null,null,"subject","predicate","object",m))}match(e,r,n,i){return new xn(this,e,r,n,i,{entityIndex:this._entityIndex})}countQuads(e,r,n,i){const a=this._getGraphs(i);let u=0,l,p,_,m;if(e&&!(p=this._termToNumericId(e))||r&&!(_=this._termToNumericId(r))||n&&!(m=this._termToNumericId(n)))return 0;for(const S in a)(l=a[S])&&(e?n?u+=this._countInIndex(l.objects,m,p,_):u+=this._countInIndex(l.subjects,p,_,m):r?u+=this._countInIndex(l.predicates,_,m,p):u+=this._countInIndex(l.objects,m,p,_));return u}forEach(e,r,n,i,a){this.some(u=>(e(u,this),!1),r,n,i,a)}every(e,r,n,i,a){return!this.some(u=>!e(u,this),r,n,i,a)}some(e,r,n,i,a){for(const u of this.readQuads(r,n,i,a))if(e(u))return!0;return!1}getSubjects(e,r,n){const i=[];return this.forSubjects(a=>{i.push(a)},e,r,n),i}forSubjects(e,r,n,i){const a=this._getGraphs(i);let u,l,p;if(e=this._uniqueEntities(e),!(r&&!(l=this._termToNumericId(r))||n&&!(p=this._termToNumericId(n))))for(i in a)(u=a[i])&&(l?p?this._loopBy2Keys(u.predicates,l,p,e):this._loopByKey1(u.subjects,l,e):p?this._loopByKey0(u.objects,p,e):this._loop(u.subjects,e))}getPredicates(e,r,n){const i=[];return this.forPredicates(a=>{i.push(a)},e,r,n),i}forPredicates(e,r,n,i){const a=this._getGraphs(i);let u,l,p;if(e=this._uniqueEntities(e),!(r&&!(l=this._termToNumericId(r))||n&&!(p=this._termToNumericId(n))))for(i in a)(u=a[i])&&(l?p?this._loopBy2Keys(u.objects,p,l,e):this._loopByKey0(u.subjects,l,e):p?this._loopByKey1(u.predicates,p,e):this._loop(u.predicates,e))}getObjects(e,r,n){const i=[];return this.forObjects(a=>{i.push(a)},e,r,n),i}forObjects(e,r,n,i){const a=this._getGraphs(i);let u,l,p;if(e=this._uniqueEntities(e),!(r&&!(l=this._termToNumericId(r))||n&&!(p=this._termToNumericId(n))))for(i in a)(u=a[i])&&(l?p?this._loopBy2Keys(u.subjects,l,p,e):this._loopByKey1(u.objects,l,e):p?this._loopByKey0(u.predicates,p,e):this._loop(u.objects,e))}getGraphs(e,r,n){const i=[];return this.forGraphs(a=>{i.push(a)},e,r,n),i}forGraphs(e,r,n,i){for(const a in this._graphs)this.some(u=>(e(u.graph),!0),r,n,i,this._termFromId(this._entities[a]))}createBlankNode(e){return this._entityIndex.createBlankNode(e)}extractLists({remove:e=!1,ignoreErrors:r=!1}={}){const n={},i=r?()=>!0:(l,p)=>{throw new Error(`${l.value} ${p}`)},a=this.getQuads(null,_e.rdf.rest,_e.rdf.nil,null),u=e?[...a]:[];return a.forEach(l=>{const p=[];let _=!1,m,S;const E=l.graph;let y=l.subject;for(;y&&!_;){const R=this.getQuads(null,null,y,null),I=this.getQuads(y,null,null,null);let N,C=null,O=null,T=null;for(let q=0;q<I.length&&!_;q++)N=I[q],N.graph.equals(E)?m?_=i(y,"has non-list arcs out"):N.predicate.value===_e.rdf.first?C?_=i(y,"has multiple rdf:first arcs"):u.push(C=N):N.predicate.value===_e.rdf.rest?O?_=i(y,"has multiple rdf:rest arcs"):u.push(O=N):R.length?_=i(y,"can't be subject and object"):(m=N,S="subject"):_=i(y,"not confined to single graph");for(let q=0;q<R.length&&!_;++q)N=R[q],m?_=i(y,"can't have coreferences"):N.predicate.value===_e.rdf.rest?T?_=i(y,"has incoming rdf:rest arcs"):T=N:(m=N,S="object");C?p.unshift(C.object):_=i(y,"has no list head"),y=T&&T.subject}_?e=!1:m&&(n[m[S].value]=p)}),e&&this.removeQuads(u),n}addAll(e){if(Array.isArray(e))this.addQuads(e);else if(e instanceof Me&&e._entityIndex===this._entityIndex)e._size!==0&&(this._graphs=pr(this._graphs,e._graphs),this._size=null);else for(const r of e)this.add(r);return this}contains(e){if(e===this)return!0;if(!(e instanceof Me)||this._entityIndex!==e._entityIndex)return e.every(_=>this.has(_));const r=this._graphs,n=e._graphs;let i,a,u,l,p;for(const _ in n){if(!(i=r[_]))return!1;i=i.subjects;for(const m in a=n[_].subjects){if(!(u=i[m]))return!1;for(const S in l=a[m]){if(!(p=u[S]))return!1;for(const E in l[S])if(!(E in p))return!1}}}return!0}deleteMatches(e,r,n,i){for(const a of this.match(e,r,n,i))this.removeQuad(a);return this}difference(e){return e===this?new Me({entityIndex:this._entityIndex}):this.filter(r=>!e.has(r))}equals(e){return e===this||this.size===e.size&&this.contains(e)}filter(e){const r=new Me({entityIndex:this._entityIndex});for(const n of this)e(n,this)&&r.add(n);return r}intersection(e){if(e===this){const r=new Me({entityIndex:this._entityIndex});r._graphs=pr(Object.create(null),this._graphs),r._size=this._size}return this.filter(r=>e.has(r))}map(e){const r=new Me({entityIndex:this._entityIndex});for(const n of this)r.add(e(n,this));return r}reduce(e,r){const n=this.readQuads();let i=r===void 0?n.next().value:r;for(const a of n)i=e(i,a,this);return i}toArray(){return this.getQuads()}toCanonical(){throw new Error("not implemented")}toStream(){return this.match()}toString(){return new Un().quadsToString(this)}union(e){const r=new Me({entityIndex:this._entityIndex});return r._graphs=pr(Object.create(null),this._graphs),r._size=this._size,r.addAll(e),r}*[Symbol.iterator](){yield*this.readQuads()}}class xn extends Ds.Readable{constructor(e,r,n,i,a,u){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:r,predicate:n,object:i,graph:a,options:u})}get filtered(){if(!this._filtered){const{n3Store:e,graph:r,object:n,predicate:i,subject:a}=this,u=this._filtered=new Me({factory:e._factory,entityIndex:this.options.entityIndex});for(const l of e.readQuads(a,i,n,r))u.addQuad(l)}return this._filtered}get size(){return this.filtered.size}_read(e){e>0&&!this[En]&&(this[En]=this[Symbol.iterator]());const r=this[En];for(;e-- >0;){const{done:n,value:i}=r.next();if(n){this.push(null);return}this.push(i)}}addAll(e){return this.filtered.addAll(e)}contains(e){return this.filtered.contains(e)}deleteMatches(e,r,n,i){return this.filtered.deleteMatches(e,r,n,i)}difference(e){return this.filtered.difference(e)}equals(e){return this.filtered.equals(e)}every(e,r,n,i,a){return this.filtered.every(e,r,n,i,a)}filter(e){return this.filtered.filter(e)}forEach(e,r,n,i,a){return this.filtered.forEach(e,r,n,i,a)}import(e){return this.filtered.import(e)}intersection(e){return this.filtered.intersection(e)}map(e){return this.filtered.map(e)}some(e,r,n,i,a){return this.filtered.some(e,r,n,i,a)}toCanonical(){return this.filtered.toCanonical()}toStream(){return this._filtered?this._filtered.toStream():this.n3Store.match(this.subject,this.predicate,this.object,this.graph)}union(e){return this._filtered?this._filtered.union(e):this.n3Store.match(this.subject,this.predicate,this.object,this.graph).addAll(e)}toArray(){return this._filtered?this._filtered.toArray():this.n3Store.getQuads(this.subject,this.predicate,this.object,this.graph)}reduce(e,r){return this.filtered.reduce(e,r)}toString(){return new Un().quadsToString(this)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,r,n,i){return new xn(this.filtered,e,r,n,i,this.options)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}const _r={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#"},$e={namespace:"https://prez.dev/",label:"https://prez.dev/label",description:"https://prez.dev/description",provenance:"https://prez.dev/provenance",focusNode:"https://prez.dev/FocusNode",link:"https://prez.dev/link",members:"https://prez.dev/members",identifier:"https://prez.dev/identifier",count:"https://prez.dev/count",searchResult:"https://prez.dev/SearchResult",searchResultWeight:"https://prez.dev/searchResultWeight",searchResultPredicate:"https://prez.dev/searchResultPredicate",searchResultURI:"https://prez.dev/searchResultURI",hasChildren:"https://prez.dev/hasChildren"},br={skosConceptScheme:"http://www.w3.org/2004/02/skos/core#ConceptScheme",skosConcept:"http://www.w3.org/2004/02/skos/core#Concept",a:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type",rdfLangString:"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",xmlString:"http://www.w3.org/2001/XMLSchema#string"},Ms={label:["https://prez.dev/label"],description:["https://prez.dev/description"],provenance:["https://prez.dev/provenance"]};function Us(t,e=_r){if(t==="a")return e.rdf+"type";{const[r,n]=t.split(":");return e[r]+n}}function Ws(t,e=_r){let r="";return Object.entries(e).forEach(([n,i])=>{t.startsWith(i)&&(r=n+":"+t.split(i)[1])}),r}const Sn=t=>{const e=new URL(t);return`${e.protocol}//${e.hostname}`},gr=t=>new URL(t).pathname,nf=(t,e)=>{var i,a;const r=e?Sn(e):"",n=(a=(i=t.identifiers)==null?void 0:i.find(u=>u.value))==null?void 0:a.value;return n?r+`/concept-hierarchy/${n}/narrowers`:""},sf=(t,e)=>{var u;const r=e?Sn(e):"",n=(u=t.identifiers)==null?void 0:u.find(l=>l.value),i=n?n.value:"";return i?r+`/concept-hierarchy/${i}/top-concepts`:""},{namedNode:Mt}=Nt;class yr{constructor(){mr(this,"store");mr(this,"parser");mr(this,"prefixes");this.store=new Me,this.parser=new kn,this.prefixes=_r}load(e){e=`PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
`+e;const r=this.parser.parse(e,null,(n,i)=>{this.prefixes[n]=i.value});this.store.addQuads(r)}toIri(e){return Us(e,this.prefixes)}fromIri(e){return Ws(e,this.prefixes)}getAnnotation(e,r){return this.getObjects(e,Ms[r]).map(n=>this.toPrezTerm(n))[0]||void 0}getObjectLiteral(e,r){return this.getObjects(e,r).map(n=>this.toPrezTerm(n))[0]||void 0}getLabel(e){return this.getAnnotation(e,"label")}getDescription(e){return this.getAnnotation(e,"description")}getProvenance(e){return this.getAnnotation(e,"provenance")}getProperties(e,r){const n={};return this.store.forEach(i=>{var a;r!=null&&r.excludePrefix&&i.predicate.value.startsWith(r.excludePrefix)||r!=null&&r.includePrefix&&!i.predicate.value.startsWith(r.includePrefix)||(n[a=i.predicate.value]??(n[a]={predicate:this.toPrezTerm(i.predicate),objects:[]}),n[i.predicate.value].objects.push(this.toPrezTerm(i.object)))},e,null,null,null),n}getParents(e){const r=e.split("/"),n=[];let i="";for(const a of r){if(a=="")continue;i+="/"+a;const u={url:i,segment:a};if(a.includes(":")){const l=a.split(":"),p=this.prefixes[l[0]];if(p){const _=this.getObjects(p+l[1],$e.label);_.length>0&&(u.label=Er(_[0].value))}}n.push(u)}return n}toPrezTerm(e){switch(e.termType){case"NamedNode":const r=Ze(e.value);r.label=this.getObjectLiteral(e.value,$e.label),r.description=this.getObjectLiteral(e.value,$e.description),r.provenance=this.getObjectLiteral(e.value,$e.provenance);const n=this.getObjects(e.value,$e.identifier);n.length>0&&(r.identifiers=n.map(_=>this.toPrezTerm(_)));const i=this.getObjects(e.value,$e.link);i.length>0&&(r.links=i.map(_=>({value:_.value,parents:this.getParents(_.value)})));const a=this.getObjects(e.value,$e.members);a.length>0&&(r.members={value:a[0].value,parents:this.getParents(a[0].value)});const u=this.getObjects(e.value,br.a);return u.length>0&&(r.rdfTypes=u.map(_=>this.toPrezTerm(_))),r;case"Literal":const l=Er(e.value);return e.datatype&&(l.datatype=this.toPrezTerm(e.datatype)),e.language&&(l.language=e.language),l;case"BlankNode":const p=Pn(e.value);return p.properties=this.getProperties(e),p;default:throw"Invalid n3 Term object"}}toPrezFocusNode(e){var n,i,a,u,l;const r=this.toPrezTerm(e);return r.properties=this.getProperties(e,{excludePrefix:$e.namespace}),r.systemProperties=this.getProperties(e,{includePrefix:$e.namespace}),(n=r.rdfTypes)!=null&&n.map(p=>p.value).includes(br.skosConcept)&&(r.hasChildren=((l=(u=(a=(i=r.systemProperties)==null?void 0:i[$e.hasChildren])==null?void 0:a.objects)==null?void 0:u[0])==null?void 0:l.value)=="true"),r}getSubjects(e,r){return this.store.getSubjects(e,r,null)}getObjects(e,r){if(typeof r=="string")return this.store.getObjects(Mt(e),Mt(r),null);{const n=[];return r.forEach(i=>{n.push(...this.store.getObjects(Mt(e),Mt(i),null))}),n}}getMembers(e){this.getObjects(e,this.toIri("prez:members")).forEach(n=>({value:n.value,parents:[]}))}getConcepts(e){const r=this.getSubjects(this.toIri("skos:inScheme"),e.value);function n(_){return r.map(m=>m.value).includes(_.value)}const i=this.getObjects(e.value,this.toIri("skos:hasTopConcept")),a=this.getObjects(e.value,this.toIri("skos:topConceptOf")),u={},l=[...i,...a].filter(_=>n(_));r.forEach(_=>{u[_.value]=[]}),r.forEach(_=>{this.getObjects(_.value,this.toIri("skos:broader")).forEach(E=>{n(E)&&u[E.value].push(_)}),this.getObjects(_.value,this.toIri("skos:narrower")).forEach(E=>{n(E)&&u[_.value].push(E)})});const p=[];return l.forEach(_=>{p.push(this.createHierarchy(_,u))}),p}createHierarchy(e,r){const n=r[e.value].map(i=>this.createHierarchy(i,r));return{...this.toPrezTerm(e),hasChildren:n.length>0,narrowers:n}}getByPrezId(e){const r=[];return this.store.forEach(n=>{r.push(n)},null,null,Mt("https://prez.dev/FocusNode"),null),e?r.find(n=>n.object.value===e).subject:r.map(n=>n.subject)}getCount(){const e=this.store.getObjects(null,this.toIri("prez:count"),null);return e.length>0?Number(e[0].value):0}getList(){const e=[];return this.getByPrezId().forEach(n=>{e.push(this.toPrezFocusNode(n))}),e}getItem(){var n;const e=this.getByPrezId();if(e.length==0)throw new Error("Unable to find item");const r=this.toPrezFocusNode(e[0]);if((n=r.rdfTypes)!=null&&n.map(i=>i.value).includes(br.skosConcept)){const i=this.getConcepts(e[0]);return{...r,topConcepts:{narrowers:i,hasChildren:i.length>0}}}return r}search(){return this.getSubjects(this.toIri("a"),this.toIri("prez:SearchResult")).map(n=>({hash:n.value.split("urn:hash:").slice(-1)[0],weight:Number(this.getObjects(n.value,this.toIri("prez:searchResultWeight"))[0].value),predicate:this.toPrezTerm(this.getObjects(n.value,this.toIri("prez:searchResultPredicate"))[0]),match:this.toPrezTerm(this.getObjects(n.value,this.toIri("prez:searchResultMatch"))[0]),resource:this.toPrezFocusNode(this.getObjects(n.value,this.toIri("prez:searchResultURI"))[0])}))}}class of extends Error{constructor(e){super(e),this.name="NetworkError"}}function af(t){let e={};const r=t.split(", ").map(i=>{const[,a,u]=i.match(/<(.+)>; (.+)/),l={uri:a};return u.split("; ").forEach(p=>{const[,_,m]=p.match(/(.+)=[\"<](.+)[\">]/);l[_]=m}),l});r.filter(i=>i.rel==="type").forEach(i=>{e[i.anchor]={default:!1,current:!1,token:i.token,mediatypes:[],title:i.title,description:"",uri:i.anchor}});const n=r.find(i=>i.rel==="self");return e[n.profile].current=!0,r.filter(i=>i.rel==="alternate").forEach(i=>{e[i.profile].mediatypes.map(a=>a.mediatype).includes(i.type)||e[i.profile].mediatypes.push({title:"",mediatype:i.type,default:!1})}),Object.values(e)}async function wr(t){const e=await fetch(t,{method:"GET",headers:{Accept:"text/anot+turtle"}});if(!e.ok)throw new of(`Network error - status code ${e.status}: ${e.statusText}`);const r=e.headers.get("link")?af(e.headers.get("link")):[];return{data:await e.text(),profiles:r}}async function lf(t){const{data:e,profiles:r}=await wr(t),n=new yr;n.load(e);const i=gr(t);return{type:"list",data:n.getList(),profiles:r,count:n.getCount(),parents:n.getParents(i)}}async function uf(t){const{data:e,profiles:r}=await wr(t),n=new yr;n.load(e);const i=gr(t);return{type:"item",data:n.getItem(),profiles:r,parents:n.getParents(i)}}async function ff(t){const{data:e,profiles:r}=await wr(t),n=new yr;n.load(e);const i=gr(t);return{type:"search",data:n.search(),profiles:r,parents:n.getParents(i)}}Q.ANNOTATION_PREDICATES=Ms,Q.DEFAULT_PREFIXES=_r,Q.PREZ_PREDICATES=$e,Q.RDFStore=yr,Q.SYSTEM_PREDICATES=br,Q.apiGet=wr,Q.bnode=Pn,Q.defaultFromIri=Ws,Q.defaultToIri=Us,Q.getBaseUrl=Sn,Q.getItem=uf,Q.getList=lf,Q.getNarrowersUrl=nf,Q.getTopConceptsUrl=sf,Q.getUrlPath=gr,Q.isTypePrezTerm=Ie,Q.literal=Er,Q.node=Ze,Q.search=ff,Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})});
